!function(){function t(t,e,a,i){Object.defineProperty(t,e,{get:a,set:i,enumerable:!0,configurable:!0})}var e="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:"u">typeof global?global:{},a={},i={},s=e.parcelRequiree003;null==s&&((s=function(t){if(t in a)return a[t].exports;if(t in i){var e=i[t];delete i[t];var s={id:t,exports:{}};return a[t]=s,e.call(s.exports,s,s.exports),s.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){i[t]=e},e.parcelRequiree003=s);var n=s.register;n("7mhep",function(e,a){let i;t(e.exports,"default",function(){return s});var s=(i=()=>{let t=document.querySelectorAll(".pw-masthead .pw-primary-nav > li > a");if("Fluency"===new URLSearchParams(window.location.search).get("name"))return!1;t.forEach((t,e)=>{let a=t.href.split("/").filter(Boolean);a[a.length-1].includes("fluency")&&(t.href=t.href+"?modal=1",t.classList.add("pw-modal-large"),t.classList.add("pw-modal"))})},{init:()=>{i()}})}),n("aUodT",function(e,a){let i,n,l,r,o,c,u;t(e.exports,"default",function(){return g});var d=s("iN3hH"),g=(i=d.default.getUiTextFor("errors"),n=t=>{let e={"X-Requested-With":"XMLHttpRequest"};return"GET"===t&&(e.Accept="application/json"),"POST"===t&&(e["Content-Type"]="application/json"),e},l=(t,e,a)=>fetch(t,{method:"POST",cache:"no-store",headers:n,body:JSON.stringify(e)}).then(c).then(a).catch(u),r=(t,e)=>fetch(t,{method:"GET",cache:"no-store",headers:n("GET")}).then(c).then(e).catch(u),o=(t,e)=>fetch(t,{method:"DELETE",headers:n("GET")}).then(c).then(e).catch(u),c=t=>{if(204===t.status)return t;if(t.ok)return t.json();throw Error()},u=t=>{console.error("[Fluency module API failure]",t.message);let e={error:null,message:null};return"NetworkError"===t.message.split(" ")[0]?(e.error="FLUENCY_CLIENT_DISCONNECTED",e.message=i.FLUENCY_CLIENT_DISCONNECTED):(e.error="UNKNOWN_ERROR",e.message=i.UNKNOWN_ERROR),e},{deleteTranslatableLanguagesCache:()=>o(d.default.getApiEndpointFor("translatableLanguagesCache"),t=>t),deleteTranslationCache:()=>o(d.default.getApiEndpointFor("translationCache"),t=>t),getAvailableLanguages:()=>r(d.default.getApiEndpointFor("languages"),t=>t),getTranslation:(t,e,a,i=[],s=null)=>l(d.default.getApiEndpointFor("translation"),{sourceLanguage:t,targetLanguage:e,content:a,options:i,caching:s},t=>t),getUsage:()=>r(d.default.getApiEndpointFor("usage"),t=>t)})}),n("iN3hH",function(e,a){let i,s,n,l,r,o,c,u,d,g;t(e.exports,"default",function(){return h});var h=(s=(i=ProcessWire.config.fluency).localization,n={translateButton:{container:"ft-translate-button-container",button:"ft-translate-button"},languageTranslator:{container:"Inputfield InputfieldHeaderHidden",content:"InputfieldContent ft-language-translator-button-content",translateButton:"ft-translate-all-button",sourceLanguageSelect:"uk-select ft-source-language-select",sourceLanguageSelectLabel:"ft-source-language-select-label"},statusPlaceholder:{container:"ft-translation-status-container",label:"ft-translation-status"},icon:"ft-icon"},l={activityOverlay:s.activityOverlay,languageSelect:s.languageSelect,inputfieldTranslateButtons:s.inputfieldTranslateButtons,standaloneTranslator:s.standaloneTranslator,usage:s.usage,errors:s.errors,languageTranslator:s.languageTranslator},r={languages:i.apiEndpoints.languages,translatableLanguagesCache:i.apiEndpoints.translatableLanguagesCache,test:i.apiEndpoints.test,translation:i.apiEndpoints.translation,translationCache:i.apiEndpoints.translationCache,usage:i.apiEndpoints.usage},o=i.configuredLanguages,c=i.unconfiguredLanguages,u=()=>o,d=()=>c,{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:t=>r[t],getConfiguredLanguages:u,getDefaultLanguage:()=>u().reduce((t,e)=>e.default?e:t,null),getElementClassesFor:t=>n[t],getEngineInfo:g=()=>i.engine,getEngineProvidesUsageData:()=>g().providesUsageData,getLanguageCount:()=>u().length+d().length,getLanguageForId:t=>(t=parseInt(t,10),u().reduce((e,a)=>a.id===t?a:e,null)),getTranslationAction:()=>i.interface.inputfieldTranslationAction,getTranslationDisabledFieldAttribute:()=>`[${i.interface.translationDisabledFieldAttr}]`,getUiTextFor:t=>l[t],getUnconfiguredLanguages:d,languageIsTranslatable:t=>!d().includes(parseInt(t,10)),moduleShouldInitialize:()=>u().length>1,translationActionTypes:{each:"translate_each_language",all:"translate_to_all_languages",both:"both"}})}),n("gvk63",function(e,a){t(e.exports,"default",function(){return n});var i=s("iN3hH"),n=function(t,e="translating"){let a,s,n,l,r={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=(t,e=5e3)=>{this.setMessageContent(t),this.setActivityInactive(),this.setMessageActive(),this.setOverlayVisible(),this.hide(e)},this.flashSuccess=(t,e=500)=>{this.setSuccessActive(),this.setFlashActive(),this.showMessage(t,e)},this.flashError=(t,e=500)=>{this.setFlashActive(),this.setErrorActive(),this.showMessage(t,e)},this.showError=(t,e=5e3)=>{this.setErrorActive(),this.showMessage(t,e)},this.hide=(t=0)=>{setTimeout(()=>{this.setOverlayInvisible()},t),setTimeout(()=>{this.setActivityInactive(),this.setMessageInactive(),this.setErrorInactive(),this.setFlashInactive(),this.setMessageContent("")},t+500)},this.setActivityActive=()=>a.classList.add(r.activity),this.setActivityInactive=()=>a.classList.remove(r.activity),this.setMessageActive=()=>a.classList.add(r.message),this.setMessageInactive=()=>a.classList.remove(r.message),this.setMessageContent=t=>s.innerText=t,this.setFlashActive=()=>a.classList.add(r.flash),this.setFlashInactive=()=>a.classList.remove(r.flash),this.setSuccessActive=()=>a.classList.add(r.success),this.setSuccessInactive=()=>a.classList.remove(r.success),this.setErrorActive=()=>a.classList.add(r.error),this.setErrorInactive=()=>a.classList.remove(r.error),this.setOverlayVisible=()=>a.classList.add(r.visible),this.setOverlayInvisible=()=>a.classList.remove(r.visible),this.create=()=>(a=this.buildOverlayEl(),n=this.buildActivityEl(),s=this.buildMessageEl(),a.appendChild(n),a.appendChild(s),a),this.buildOverlayEl=()=>{let t=document.createElement("div");return t.setAttribute("class",r.overlay),t},this.buildActivityEl=()=>{let t=this.getActivityTexts(),e=document.createElement("div");e.setAttribute("class",r.activityAnimationContainer),e=t.animated.reduce((t,e)=>{let a=document.createElement("span");return a.setAttribute("class",r.activityAnimationItem),a.innerHTML=e,t.appendChild(a),t},e);let a=document.createElement("div");return a.setAttribute("class",r.activityStaticText),a.innerText=t.static,(n=document.createElement("div")).setAttribute("class",r.activityContainer),n.appendChild(a),n.appendChild(e),n},this.getActivityTexts=()=>{let t=i.default.getUiTextFor("activityOverlay")[e],a=t.animated;for(let t=a.length-1;t>0;t--){let e=Math.floor(Math.random()*(t+1)),i=a[t];a[t]=a[e],a[e]=i}return t.animated=a,t},this.buildMessageEl=()=>((s=document.createElement("div")).setAttribute("class",r.messageContainer),s),l=t.getSelf(),a=this.create(),l.classList.add(r.parent),l.appendChild(a)}});var l=s("7mhep"),r=s("aUodT"),o=s("gvk63");let c=function(t){let e=null,a=null;this.getSelf=()=>e,this.bindEventListener=()=>{let e=this.getSelf().querySelector(".notes");t.addEventListener("click",t=>{t.preventDefault(),a.showActivity(),r.default.deleteTranslationCache().then(t=>{t.error?a.showError(t.detail):(e&&(e.textContent=e.textContent.split(": ")[0]+": 0"),a.hide())})})},e=t.closest(".Inputfields").parentElement,a=new(0,o.default)(this,"clearingCache"),this.bindEventListener()};var r=s("aUodT"),o=s("gvk63");let u=function(t){let e=null,a=null;this.getSelf=()=>e,this.bindEventListener=()=>{let e=this.getSelf().querySelector(".notes");t.addEventListener("click",t=>{t.preventDefault(),a.showActivity(),r.default.deleteTranslatableLanguagesCache().then(t=>{t.error?a.showError(t.detail):(e&&(e.textContent="There are no languages cached"),a.hide())})})},e=t.closest(".Inputfields").parentElement,a=new(0,o.default)(this,"clearingCache"),this.bindEventListener()};window.addEventListener("load",t=>{l.default.init(),(()=>{let t=[...document.querySelectorAll(".js-ft-clear-translation-cache")];if(t.length)for(let e of t)new c(e)})(),(()=>{let t=[...document.querySelectorAll(".js-ft-clear-translatable-languages-cache")];if(t.length)for(let e of t)new u(e)})()})}();
//# sourceMappingURL=fluency_module_config.js.map
