!function(){let t;function e(t,e,a,n){Object.defineProperty(t,e,{get:a,set:n,enumerable:!0,configurable:!0})}var a="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:"u">typeof global?global:{},n={},s={},i=a.parcelRequiree003;null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in s){var e=s[t];delete s[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){s[t]=e},a.parcelRequiree003=i);var l=i.register;l("aUodT",function(t,a){let n,s,l,r,o,c,u;e(t.exports,"default",function(){return g});var d=i("iN3hH"),g=(n=d.default.getUiTextFor("errors"),s=t=>{let e={"X-Requested-With":"XMLHttpRequest"};return"GET"===t&&(e.Accept="application/json"),"POST"===t&&(e["Content-Type"]="application/json"),e},l=(t,e,a)=>fetch(t,{method:"POST",cache:"no-store",headers:s,body:JSON.stringify(e)}).then(c).then(a).catch(u),r=(t,e)=>fetch(t,{method:"GET",cache:"no-store",headers:s("GET")}).then(c).then(e).catch(u),o=(t,e)=>fetch(t,{method:"DELETE",headers:s("GET")}).then(c).then(e).catch(u),c=t=>{if(204===t.status)return t;if(t.ok)return t.json();throw Error()},u=t=>{console.error("[Fluency module API failure]",t.message);let e={error:null,message:null};return"NetworkError"===t.message.split(" ")[0]?(e.error="FLUENCY_CLIENT_DISCONNECTED",e.message=n.FLUENCY_CLIENT_DISCONNECTED):(e.error="UNKNOWN_ERROR",e.message=n.UNKNOWN_ERROR),e},{deleteTranslatableLanguagesCache:()=>o(d.default.getApiEndpointFor("translatableLanguagesCache"),t=>t),deleteTranslationCache:()=>o(d.default.getApiEndpointFor("translationCache"),t=>t),getAvailableLanguages:()=>r(d.default.getApiEndpointFor("languages"),t=>t),getTranslation:(t,e,a,n=[],s=null)=>l(d.default.getApiEndpointFor("translation"),{sourceLanguage:t,targetLanguage:e,content:a,options:n,caching:s},t=>t),getUsage:()=>r(d.default.getApiEndpointFor("usage"),t=>t)})}),l("iN3hH",function(t,a){let n,s,i,l,r,o,c,u,d,g;e(t.exports,"default",function(){return h});var h=(s=(n=ProcessWire.config.fluency).localization,i={translateButton:{container:"ft-translate-button-container",button:"ft-translate-button"},languageTranslator:{container:"Inputfield InputfieldHeaderHidden",content:"InputfieldContent ft-language-translator-button-content",translateButton:"ft-translate-all-button",sourceLanguageSelect:"uk-select ft-source-language-select",sourceLanguageSelectLabel:"ft-source-language-select-label"},statusPlaceholder:{container:"ft-translation-status-container",label:"ft-translation-status"},icon:"ft-icon"},l={activityOverlay:s.activityOverlay,languageSelect:s.languageSelect,inputfieldTranslateButtons:s.inputfieldTranslateButtons,standaloneTranslator:s.standaloneTranslator,usage:s.usage,errors:s.errors,languageTranslator:s.languageTranslator},r={languages:n.apiEndpoints.languages,translatableLanguagesCache:n.apiEndpoints.translatableLanguagesCache,test:n.apiEndpoints.test,translation:n.apiEndpoints.translation,translationCache:n.apiEndpoints.translationCache,usage:n.apiEndpoints.usage},o=n.configuredLanguages,c=n.unconfiguredLanguages,u=()=>o,d=()=>c,{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:t=>r[t],getConfiguredLanguages:u,getDefaultLanguage:()=>u().reduce((t,e)=>e.default?e:t,null),getElementClassesFor:t=>i[t],getEngineInfo:g=()=>n.engine,getEngineProvidesUsageData:()=>g().providesUsageData,getLanguageCount:()=>u().length+d().length,getLanguageForId:t=>(t=parseInt(t,10),u().reduce((e,a)=>a.id===t?a:e,null)),getTranslationAction:()=>n.interface.inputfieldTranslationAction,getTranslationDisabledFieldAttribute:()=>`[${n.interface.translationDisabledFieldAttr}]`,getUiTextFor:t=>l[t],getUnconfiguredLanguages:d,languageIsTranslatable:t=>!d().includes(parseInt(t,10)),moduleShouldInitialize:()=>u().length>1,translationActionTypes:{each:"translate_each_language",all:"translate_to_all_languages",both:"both"}})}),l("gvk63",function(t,a){e(t.exports,"default",function(){return s});var n=i("iN3hH"),s=function(t,e="translating"){let a,s,i,l,r={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=(t,e=5e3)=>{this.setMessageContent(t),this.setActivityInactive(),this.setMessageActive(),this.setOverlayVisible(),this.hide(e)},this.flashSuccess=(t,e=500)=>{this.setSuccessActive(),this.setFlashActive(),this.showMessage(t,e)},this.flashError=(t,e=500)=>{this.setFlashActive(),this.setErrorActive(),this.showMessage(t,e)},this.showError=(t,e=5e3)=>{this.setErrorActive(),this.showMessage(t,e)},this.hide=(t=0)=>{setTimeout(()=>{this.setOverlayInvisible()},t),setTimeout(()=>{this.setActivityInactive(),this.setMessageInactive(),this.setErrorInactive(),this.setFlashInactive(),this.setMessageContent("")},t+500)},this.setActivityActive=()=>a.classList.add(r.activity),this.setActivityInactive=()=>a.classList.remove(r.activity),this.setMessageActive=()=>a.classList.add(r.message),this.setMessageInactive=()=>a.classList.remove(r.message),this.setMessageContent=t=>s.innerText=t,this.setFlashActive=()=>a.classList.add(r.flash),this.setFlashInactive=()=>a.classList.remove(r.flash),this.setSuccessActive=()=>a.classList.add(r.success),this.setSuccessInactive=()=>a.classList.remove(r.success),this.setErrorActive=()=>a.classList.add(r.error),this.setErrorInactive=()=>a.classList.remove(r.error),this.setOverlayVisible=()=>a.classList.add(r.visible),this.setOverlayInvisible=()=>a.classList.remove(r.visible),this.create=()=>(a=this.buildOverlayEl(),i=this.buildActivityEl(),s=this.buildMessageEl(),a.appendChild(i),a.appendChild(s),a),this.buildOverlayEl=()=>{let t=document.createElement("div");return t.setAttribute("class",r.overlay),t},this.buildActivityEl=()=>{let t=this.getActivityTexts(),e=document.createElement("div");e.setAttribute("class",r.activityAnimationContainer),e=t.animated.reduce((t,e)=>{let a=document.createElement("span");return a.setAttribute("class",r.activityAnimationItem),a.innerHTML=e,t.appendChild(a),t},e);let a=document.createElement("div");return a.setAttribute("class",r.activityStaticText),a.innerText=t.static,(i=document.createElement("div")).setAttribute("class",r.activityContainer),i.appendChild(a),i.appendChild(e),i},this.getActivityTexts=()=>{let t=n.default.getUiTextFor("activityOverlay")[e],a=t.animated;for(let t=a.length-1;t>0;t--){let e=Math.floor(Math.random()*(t+1)),n=a[t];a[t]=a[e],a[e]=n}return t.animated=a,t},this.buildMessageEl=()=>((s=document.createElement("div")).setAttribute("class",r.messageContainer),s),l=t.getSelf(),a=this.create(),l.classList.add(r.parent),l.appendChild(a)}});var r=i("aUodT"),o=i("iN3hH"),c=i("gvk63");let u={initializedAttr:t="data-ft-initialized",init:()=>{[...document.querySelectorAll(`.ft-standalone-translator-fieldset:not([${t}])`)].forEach(t=>{new d(t)})}},d=function(t){let e,a,n,s,i,l=o.default.getUiTextFor("standaloneTranslator"),u={sourceLanguageSelect:"ft-source-language",targetLanguageSelect:"ft-target-language",sourceContentInputfield:"ft-source-content",translatedContentInputfield:"ft-translated-content",translateButton:"js-ft-translate",copyButton:"ft-click-to-copy",clearButton:"ft-click-to-clear",swapButton:"js-ft-swap-languages"};this.cacheElements=()=>{u.translateButton=t.querySelector(`.${u.translateButton}`),u.swapButton=document.querySelector(`.${u.swapButton}`),u.sourceLanguageSelect=t.querySelector(`.${u.sourceLanguageSelect}`).closest("li.Inputfield"),u.targetLanguageSelect=t.querySelector(`.${u.targetLanguageSelect}`).closest("li.Inputfield"),u.sourceContentInputfield=t.querySelector(`.${u.sourceContentInputfield}`).closest("li.Inputfield"),u.translatedContentInputfield=t.querySelector(`.${u.translatedContentInputfield}`).closest("li.Inputfield")},this.getSelf=()=>t,this.bindTranslateButton=()=>{u.translateButton.addEventListener("click",t=>{t.preventDefault();let l=s.getValue(),o=i.getValue(),c=a.getContent();l||s.indicateError(),o||i.indicateError(),c||a.indicateError(),l&&o&&c&&(e.showActivity(),r.default.getTranslation(l,o,c).then(t=>{t.error&&e.showError(t.message),n.setContent(t.translations[0]),e.hide()}))})},this.selectedLanguages={source:null,target:null},this.bindLanguageSwapButton=()=>{u.swapButton.addEventListener("click",t=>{t.preventDefault(),this.swapLanguageSelectValues(),this.swapTranslationContent()})},this.swapTranslationContent=()=>{let t=a.getContent(),e=n.getContent();a.setContent(e),n.setContent(t)},this.swapLanguageSelectValues=()=>{let t=this.selectedLanguages.source,e=this.selectedLanguages.target,a=s.getOptions(),n=i.getOptions(),l=this.getLanguageSwapValue("target",a),r=this.getLanguageSwapValue("source",n);s.setValue(l),i.setValue(r),this.selectedLanguages.source=e,this.selectedLanguages.target=t},this.getLanguageSwapValue=(t,e)=>{let a=this.selectedLanguages[t];if(e.includes(a))return a;let n=a.split("-")[0],s=e.map(t=>t.split("-")[0]).indexOf(n);if(s)return e[s]},this.initLanguageSwapButtonState=()=>{let t=s.getValue(),e=i.getValue();(this.selectedLanguages.source=t,this.selectedLanguages.target=e,t&&e)?this.setSwapButtonState.enabled():this.setSwapButtonState.disabled()},this.setSwapButtonState={enabled:()=>u.swapButton.disabled=!1,disabled:()=>u.swapButton.disabled=!0},this.addClearContentButton=()=>{let t=u.clearButton;u.clearButton=document.createElement("a"),u.clearButton.setAttribute("class",t);let e=document.createElement("i");e.setAttribute("class","ft-clear-icon fa fa-fw fa-trash-o");let a=document.createElement("span");a.innerText=l.clickToClear,a.setAttribute("class","ft-clear-text"),u.clearButton.append(a,e);let n=u.sourceContentInputfield.querySelector(".InputfieldHeader");n.classList.add(`${t}-container`),n.appendChild(u.clearButton),this.bindClearContentButton()},this.bindClearContentButton=()=>{u.clearButton.addEventListener("click",t=>{t.preventDefault(),a.clearContent(),n.clearContent()})},this.addCopyContentButton=()=>{let t=u.copyButton;u.copyButton=document.createElement("a"),u.copyButton.setAttribute("class",t);let e=document.createElement("i");e.setAttribute("class","ft-copy-icon fa fa-fw fa-clone");let a=document.createElement("span");a.innerText=l.clickToCopy,a.setAttribute("class","ft-copy-text"),u.copyButton.append(a,e);let n=u.translatedContentInputfield.querySelector(".InputfieldHeader");n.classList.add(`${t}-container`),n.appendChild(u.copyButton),this.bindCopyContentButton()},this.bindCopyContentButton=()=>{u.copyButton.addEventListener("click",t=>{t.preventDefault();let e=n.getContent();e&&navigator.clipboard.writeText(e).then(()=>{n.indicateSuccess(l.copied)})})},this.toggleCopyContentButton=t=>{t?u.copyButton.classList.add("enabled"):u.copyButton.classList.remove("enabled")},this.createInputControllers=()=>{s=new g("source",u.sourceLanguageSelect,this.languageSelectCallback),i=new g("target",u.targetLanguageSelect,this.languageSelectCallback),a=new h(u.sourceContentInputfield),n=new h(u.translatedContentInputfield,this.toggleCopyContentButton)},this.languageSelectCallback=(t,e)=>{let a=t.getType(),n=t.getValue();this.selectedLanguages[a]=n||null,n?this.setSwapButtonState.enabled():this.setSwapButtonState.disabled()},this.cacheElements(),this.createInputControllers(),e=new(0,c.default)(this),this.addCopyContentButton(),this.addClearContentButton(),this.bindTranslateButton(),this.initLanguageSwapButtonState(),this.bindLanguageSwapButton()},g=function(t,e,a){let n,s;this.getType=()=>t,this.getSelf=()=>e,this.getValue=()=>s.value||"",this.setValue=t=>s.value=t,this.getOptions=()=>[...s.options].map(t=>t.value).filter(t=>!!t),this.indicateError=()=>n.flashError("",300),(s=e.querySelector("select")).addEventListener("change",t=>a(this,t)),n=new(0,c.default)(this)},h=function(t,e=null){let a,n;o.default.getUiTextFor("standaloneTranslator"),this.getSelf=()=>t,this.getContent=()=>a.get(),this.setContent=t=>a.set(t),this.clearContent=()=>this.setContent(""),this.indicateError=()=>n.flashError("",300),this.indicateSuccess=t=>n.flashSuccess(t),a=new p(t,e),n=new(0,c.default)(this)},p=function(t,e=null){let a,n=!1;this.set=t=>{a.value=t,a.dispatchEvent(new Event("input"))},this.get=()=>a.value,this.bindContentChangeListener=()=>{a.addEventListener("input",t=>{let a=t.target.value;a&&!n&&(n=!0,e(!0)),!a&&n&&(n=!1,e(!1))})},a=t.querySelector("textarea"),e&&this.bindContentChangeListener()};var o=i("iN3hH");window.addEventListener("load",t=>{o.default.moduleShouldInitialize()&&u.init()})}();
//# sourceMappingURL=fluency_standalone_translator.js.map
