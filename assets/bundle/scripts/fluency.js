!function(){let e,t,a,n,i,s,r,l,g,u,o;function c(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var d="u">typeof globalThis?globalThis:"u">typeof self?self:"u">typeof window?window:"u">typeof global?global:{},h={},f={},v=d.parcelRequiree003;null==v&&((v=function(e){if(e in h)return h[e].exports;if(e in f){var t=f[e];delete f[e];var a={id:e,exports:{}};return h[e]=a,t.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){f[e]=t},d.parcelRequiree003=v);var p=v.register;p("iN3hH",function(e,t){let a,n,i,s,r,l,g,u,o,d;c(e.exports,"default",function(){return h});var h=(n=(a=ProcessWire.config.fluency).localization,i={translateButton:{container:"ft-translate-button-container",button:"ft-translate-button"},languageTranslator:{container:"Inputfield InputfieldHeaderHidden",content:"InputfieldContent ft-language-translator-button-content",translateButton:"ft-translate-all-button",sourceLanguageSelect:"uk-select ft-source-language-select",sourceLanguageSelectLabel:"ft-source-language-select-label"},statusPlaceholder:{container:"ft-translation-status-container",label:"ft-translation-status"},icon:"ft-icon"},s={activityOverlay:n.activityOverlay,languageSelect:n.languageSelect,inputfieldTranslateButtons:n.inputfieldTranslateButtons,standaloneTranslator:n.standaloneTranslator,usage:n.usage,errors:n.errors,languageTranslator:n.languageTranslator},r={languages:a.apiEndpoints.languages,translatableLanguagesCache:a.apiEndpoints.translatableLanguagesCache,test:a.apiEndpoints.test,translation:a.apiEndpoints.translation,translationCache:a.apiEndpoints.translationCache,usage:a.apiEndpoints.usage},l=a.configuredLanguages,g=a.unconfiguredLanguages,u=()=>l,o=()=>g,{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:e=>r[e],getConfiguredLanguages:u,getDefaultLanguage:()=>u().reduce((e,t)=>t.default?t:e,null),getElementClassesFor:e=>i[e],getEngineInfo:d=()=>a.engine,getEngineProvidesUsageData:()=>d().providesUsageData,getLanguageCount:()=>u().length+o().length,getLanguageForId:e=>(e=parseInt(e,10),u().reduce((t,a)=>a.id===e?a:t,null)),getTranslationAction:()=>a.interface.inputfieldTranslationAction,getTranslationDisabledFieldAttribute:()=>`[${a.interface.translationDisabledFieldAttr}]`,getUiTextFor:e=>s[e],getUnconfiguredLanguages:o,languageIsTranslatable:e=>!o().includes(parseInt(e,10)),moduleShouldInitialize:()=>u().length>1,translationActionTypes:{each:"translate_each_language",all:"translate_to_all_languages",both:"both"}})}),p("gvk63",function(e,t){c(e.exports,"default",function(){return n});var a=v("iN3hH"),n=function(e,t="translating"){let n,i,s,r,l={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=(e,t=5e3)=>{this.setMessageContent(e),this.setActivityInactive(),this.setMessageActive(),this.setOverlayVisible(),this.hide(t)},this.flashSuccess=(e,t=500)=>{this.setSuccessActive(),this.setFlashActive(),this.showMessage(e,t)},this.flashError=(e,t=500)=>{this.setFlashActive(),this.setErrorActive(),this.showMessage(e,t)},this.showError=(e,t=5e3)=>{this.setErrorActive(),this.showMessage(e,t)},this.hide=(e=0)=>{setTimeout(()=>{this.setOverlayInvisible()},e),setTimeout(()=>{this.setActivityInactive(),this.setMessageInactive(),this.setErrorInactive(),this.setFlashInactive(),this.setMessageContent("")},e+500)},this.setActivityActive=()=>n.classList.add(l.activity),this.setActivityInactive=()=>n.classList.remove(l.activity),this.setMessageActive=()=>n.classList.add(l.message),this.setMessageInactive=()=>n.classList.remove(l.message),this.setMessageContent=e=>i.innerText=e,this.setFlashActive=()=>n.classList.add(l.flash),this.setFlashInactive=()=>n.classList.remove(l.flash),this.setSuccessActive=()=>n.classList.add(l.success),this.setSuccessInactive=()=>n.classList.remove(l.success),this.setErrorActive=()=>n.classList.add(l.error),this.setErrorInactive=()=>n.classList.remove(l.error),this.setOverlayVisible=()=>n.classList.add(l.visible),this.setOverlayInvisible=()=>n.classList.remove(l.visible),this.create=()=>(n=this.buildOverlayEl(),s=this.buildActivityEl(),i=this.buildMessageEl(),n.appendChild(s),n.appendChild(i),n),this.buildOverlayEl=()=>{let e=document.createElement("div");return e.setAttribute("class",l.overlay),e},this.buildActivityEl=()=>{let e=this.getActivityTexts(),t=document.createElement("div");t.setAttribute("class",l.activityAnimationContainer),t=e.animated.reduce((e,t)=>{let a=document.createElement("span");return a.setAttribute("class",l.activityAnimationItem),a.innerHTML=t,e.appendChild(a),e},t);let a=document.createElement("div");return a.setAttribute("class",l.activityStaticText),a.innerText=e.static,(s=document.createElement("div")).setAttribute("class",l.activityContainer),s.appendChild(a),s.appendChild(t),s},this.getActivityTexts=()=>{let e=a.default.getUiTextFor("activityOverlay")[t],n=e.animated;for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1)),a=n[e];n[e]=n[t],n[t]=a}return e.animated=n,e},this.buildMessageEl=()=>((i=document.createElement("div")).setAttribute("class",l.messageContainer),i),r=e.getSelf(),n=this.create(),r.classList.add(l.parent),r.appendChild(n)}}),p("aUodT",function(e,t){let a,n,i,s,r,l,g;c(e.exports,"default",function(){return o});var u=v("iN3hH"),o=(a=u.default.getUiTextFor("errors"),n=e=>{let t={"X-Requested-With":"XMLHttpRequest"};return"GET"===e&&(t.Accept="application/json"),"POST"===e&&(t["Content-Type"]="application/json"),t},i=(e,t,a)=>fetch(e,{method:"POST",cache:"no-store",headers:n,body:JSON.stringify(t)}).then(l).then(a).catch(g),s=(e,t)=>fetch(e,{method:"GET",cache:"no-store",headers:n("GET")}).then(l).then(t).catch(g),r=(e,t)=>fetch(e,{method:"DELETE",headers:n("GET")}).then(l).then(t).catch(g),l=e=>{if(204===e.status)return e;if(e.ok)return e.json();throw Error()},g=e=>{console.error("[Fluency module API failure]",e.message);let t={error:null,message:null};return"NetworkError"===e.message.split(" ")[0]?(t.error="FLUENCY_CLIENT_DISCONNECTED",t.message=a.FLUENCY_CLIENT_DISCONNECTED):(t.error="UNKNOWN_ERROR",t.message=a.UNKNOWN_ERROR),t},{deleteTranslatableLanguagesCache:()=>r(u.default.getApiEndpointFor("translatableLanguagesCache"),e=>e),deleteTranslationCache:()=>r(u.default.getApiEndpointFor("translationCache"),e=>e),getAvailableLanguages:()=>s(u.default.getApiEndpointFor("languages"),e=>e),getTranslation:(e,t,a,n=[],s=null)=>i(u.default.getApiEndpointFor("translation"),{sourceLanguage:e,targetLanguage:t,content:a,options:n,caching:s},e=>e),getUsage:()=>s(u.default.getApiEndpointFor("usage"),e=>e)})}),p("75OpQ",function(e,t){let a,n,i;c(e.exports,"default",function(){return r});var s=v("iN3hH");v("aUodT");var r=(a=s.default.elementClasses,n=s.default.getUiTextFor("inputfieldTranslateButtons"),{createStatusElement:e=>{let t=s.default.getElementClassesFor("statusPlaceholder"),a=document.createElement("span");a.setAttribute("class",t.label),a.innerText=e;let n=document.createElement("div");return n.setAttribute("class",t.container),n.appendChild(i()),n.appendChild(a),n},createTranslateButton:e=>{let t=s.default.getElementClassesFor("translateButton"),a=document.createElement("a");a.innerText=e,a.setAttribute("class",t.button),a.setAttribute("href","");let n=document.createElement("div");return n.setAttribute("class",t.container),n.appendChild(i()),n.appendChild(a),{button:a,container:n}},createLanguageTranslatorInputs:()=>{let e=s.default.getElementClassesFor("languageTranslator"),t=s.default.getUiTextFor("languageTranslator"),a=document.createElement("a");a.innerText=t.translateAllButton,a.setAttribute("class",e.translateButton),a.setAttribute("href","");let n=document.createElement("select");n.setAttribute("class",e.sourceLanguageSelect),s.default.getConfiguredLanguages().forEach(function(e){let t=document.createElement("option");if(t.textContent=e.title,t.value=e.engineLanguage.sourceCode,e.default){t.selected="selected",n.prepend(t);return}n.appendChild(t)});let i=document.createElement("span");i.innerText=t.sourceLanguageSelectLabel;let r=document.createElement("label");r.setAttribute("class",e.sourceLanguageSelectLabel),r.appendChild(i),r.appendChild(n);let l=document.createElement("div");l.setAttribute("class",e.content),l.appendChild(a),l.appendChild(r);let g=document.createElement("li");return g.setAttribute("class",e.container),g.appendChild(l),{translateAllButton:a,sourceLanguageSelect:n,container:g}},createIcon:i=()=>{let e=document.createElement("a");e.setAttribute("href",`${ProcessWire.config.urls.admin}fluency/?modal=1`),e.setAttribute("class","pw-modal pw-modal-large");let t=document.createElement("i");return t.setAttribute("class",`${s.default.getElementClassesFor("icon")} fa fa-language`),t.setAttribute("uk-tooltip",n.showTranslator),e.appendChild(t),e},elementClasses:a})}),p("7mhep",function(e,t){let a;c(e.exports,"default",function(){return n});var n=(a=()=>{let e=document.querySelectorAll(".pw-masthead .pw-primary-nav > li > a");if("Fluency"===new URLSearchParams(window.location.search).get("name"))return!1;e.forEach((e,t)=>{let a=e.href.split("/").filter(Boolean);a[a.length-1].includes("fluency")&&(e.href=e.href+"?modal=1",e.classList.add("pw-modal-large"),e.classList.add("pw-modal"))})},{init:()=>{a()}})});var L=v("iN3hH"),E=v("gvk63"),L=(v("iN3hH"),v("iN3hH")),y=v("aUodT"),b=v("75OpQ"),m=function(e,t,a=!1){let n=L.default.getUiTextFor("inputfieldTranslateButtons");this.addTranslateFromDefaultButton=(e,t)=>{let a=L.default.languageIsTranslatable(e),i=e==L.default.getDefaultLanguage().id;if(!a)return void t.appendChild(b.default.createStatusElement(n.languageNotAvailable));if(i)return void t.appendChild(b.default.createStatusElement(n.translationAvailable));let{button:s,container:r}=b.default.createTranslateButton(n.translateButton);this.bindButton(s,L.default.getLanguageForId(e)),t.appendChild(r)},this.bindButton=(t,a)=>{t.addEventListener("click",t=>{t.preventDefault();let n=e.getValueForDefaultLanguage();if(!n)return;let i=e.getActivityOverlay()??e.getActivityOverlay(a.id);i.showActivity(),y.default.getTranslation(L.default.getDefaultLanguage().engineLanguage.sourceCode,a.engineLanguage.targetCode,n).then(t=>{t.error?e.getActivityOverlay().showError(t.message):(e.setValueForLanguage(a.id,t.translations[0]),i.hide())})})},this.addTranslateToAllButton=(e,t)=>{let a=L.default.languageIsTranslatable(e),i=t[e];if(!a)return void i.appendChild(b.default.createStatusElement(n.languageNotAvailable));let{button:s,container:r}=b.default.createTranslateButton(n.translateToAllButton);this.bindTranslateToAllButton(s,L.default.getLanguageForId(e),t),i.appendChild(r)},this.bindTranslateToAllButton=(t,a,n)=>{t.addEventListener("click",t=>{t.preventDefault();let i=e.getValueForLanguage(a.id);if(!i)return;let s=Object.keys(n).length,r=!1,l=e.getActivityOverlay();for(let t in l.showActivity(),n){t=parseInt(t,10);let n=L.default.getLanguageForId(t);if(t===a.id||!a||!n){s--;continue}y.default.getTranslation(a.engineLanguage.sourceCode,n.engineLanguage.targetCode,i).then(t=>{if(t.error){r||e.getActivityOverlay().showError(t.message),r=!0;return}e.setValueForLanguage(n.id,t.translations[0])}).then(e=>{0!=--s||r||l.hide()})}})},this.addBothTranslationButtonTypes=(e,t)=>{this.addTranslateToAllButton(e,t),this.addTranslateFromDefaultButton(e,t[e])};let i=L.default.translationActionTypes,s=L.default.getTranslationAction();for(let e in t)s!==i.all||a||this.addTranslateToAllButton(e,t),(s===i.each||a)&&this.addTranslateFromDefaultButton(e,t[e]),s!==i.both||a||(this.addTranslateToAllButton(e,t),this.addTranslateFromDefaultButton(e,t[e]))},C=function(e){let t="ft-content-changed",a=null;this.getContentModifiedClass=()=>t,this.setModifiedState=e=>e?this.setTabModified():this.setTabUnmodified(),this.setTabModified=()=>this.getLanguageTab().classList.add(t),this.setTabUnmodified=()=>this.getLanguageTab().classList.remove(t),this.getLanguageTab=()=>a??e.closest(".langTabs").querySelector(`.langTabLink[data-lang="${e.dataset.language}"`),e&&(a=this.getLanguageTab())};let F=function(e){let t,a={},n={},i={},s={},r={},l=null;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>this.getEditorInstanceForLanguage(e).getData(),this.setValueForLanguage=(e,t)=>{let a=this.getEditorInstanceForLanguage(e);return a.setData(t),a.fire("change"),$(a).trigger("change"),this.contentHasChanged(e)},this.getEditorInstanceForLanguage=e=>{if(Object.hasOwn(r,e)&&r[e])return r[e];let t=[l,e].filter(e=>!!e).join("__"),a=CKEDITOR.instances[t];return a||(a=CKEDITOR.instances[l]),r[e]=a,r[e]},this.getInputContainers=()=>(this.getSelf().querySelectorAll("[data-language]").forEach(e=>{s[e.dataset.language]=e}),s),this.contentHasChanged=e=>Object.hasOwn(n,e)&&n[e]!==a[e],this.registerInputEventListener=e=>{this.getEditorInstanceForLanguage(e).on("change",t=>{n[e]=this.getValueForLanguage(e),i[e].setModifiedState(this.contentHasChanged(e))})},this.initContainers=()=>{let e=this.getInputContainers();l=Object.values(e)[0].id.replace("langTab_","");let a=L.default.getDefaultLanguage().id.toString(),n=Object.values(e);for(var s=n.length-1;s>=0;s--){let e=n[s].id;if(e.endsWith(a)){e.replace("langTab_","");break}}for(let t in e){let a=e[t];r[t]=this.getEditorInstanceForLanguage(t),i[t]=new C(a),this.registerInputEventListener(t)}t=new(0,E.default)(this),new m(this,e)},(()=>{if(void 0===CKEDITOR)return console.error("CKEditor was not found by Fluency, translation unavailable");setTimeout(this.initContainers,50)})()};var E=v("gvk63"),L=v("iN3hH");let T=function(e){let t,a={},n={},i={},s={},r={},l={},g=null;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>{let t=this.getEditorInstanceForLanguage(e);return t?t.getData():this.getContentElementForLanguage(e).innerHTML},this.setValueForLanguage=(e,t)=>{let a=this.getEditorInstanceForLanguage(e),n=this.getContentElementForLanguage(e);return a?a.setValue(t):n.innerHTML=t,n.dispatchEvent(new Event("input")),$(n).trigger("change"),this.contentHasChanged(e)},this.getEditorInstanceForLanguage=e=>(Object.hasOwn(r,e)&&r[e]||(r[e]=CKEDITOR.instances[this.createCKEditorSelector(e)]),r[e]),this.getContentElementForLanguage=e=>(Object.hasOwn(l,e)||(l[e]=this.getInputContainerForLanguage(e).querySelector(".InputfieldCKEditorInlineEditor")),l[e]),this.createCKEditorSelector=e=>e==L.default.getDefaultLanguage().id?g:`${g}__${e}`,this.getInputContainers=()=>(Object.keys(s).length===L.default.getLanguageCount()||this.getSelf().querySelectorAll("[data-language]").forEach(e=>{s[e.dataset.language]=e}),s),this.getInputContainerForLanguage=t=>(Object.hasOwn(s,t)||(s[t]=e.querySelector(`[data-language="${t}"]`)),s[t]),this.contentHasChanged=e=>Object.hasOwn(n,e)&&n[e]!==a[e],this.registerUpdateEvent=e=>{let t=this.getContentElementForLanguage(e);new MutationObserver((e,t)=>{for(let t of e)t.target.dispatchEvent(new Event("input"))}).observe(t,{childList:!0})},this.registerInputEventListener=e=>{this.getContentElementForLanguage(e).addEventListener("input",t=>{n[e]=this.getValueForLanguage(e),i[e].setModifiedState(this.contentHasChanged(e))})},(()=>{if(void 0===CKEDITOR)return console.error("CKEditor was not found by Fluency, translation unavailable");let e=this.getInputContainers();for(let t in g=Object.values(e)[0].id.replace("langTab_",""),e){let a=e[t];r[t]=this.getEditorInstanceForLanguage(t),i[t]=new C(a),this.registerInputEventListener(t)}t=new(0,E.default)(this),new m(this,e)})()};var E=v("gvk63"),L=v("iN3hH");let I=function(e){let t,a={},n={},i={},s={},r={};this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>this.getFieldForLanguage(e).value,this.setValueForLanguage=(e,t)=>{let a=this.getFieldForLanguage(e);return D.updateValue(a,t),a.dispatchEvent(new Event("keyup")),$(a).trigger("change"),this.contentHasChanged(e)},this.getFieldForLanguage=e=>(Object.hasOwn(r,e)&&r[e]||(r[e]=this.getInputContainerForLanguage(e).querySelector("input")),r[e]),this.getInputContainerForLanguage=t=>(Object.hasOwn(s,t)&&s[t]||(s[t]=e.querySelector(`[data-language="${t}"]`)),s[t]),this.getInputContainers=()=>(e.querySelectorAll("[data-language]").forEach(e=>s[e.dataset.language]=e),s),this.contentHasChanged=e=>Object.hasOwn(n,e)&&n[e]!==a[e],this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("keyup",t=>{n[e]=t.target.value,i[e].setModifiedState(this.contentHasChanged(e))})};let l=this.getInputContainers();for(let e in l){let t=l[e];a[e]=this.getValueForLanguage(e),i[e]=new C(t),this.registerInputEventListener(e)}t=new(0,E.default)(this),new m(this,l)};var E=v("gvk63"),L=v("iN3hH");let A=function(e){let t,a={},n={},i={},s={},r={};this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>this.getFieldForLanguage(e).value,this.setValueForLanguage=(e,t)=>{let a=this.getFieldForLanguage(e);return D.updateValue(a,t),a.dispatchEvent(new Event("keyup")),$(a).trigger("change"),this.contentHasChanged(e)},this.getFieldForLanguage=t=>(Object.hasOwn(r,t)||(r[t]=e.querySelector(`[data-language="${t}"] textarea`)),r[t]),this.getInputContainers=()=>(e.querySelectorAll("[data-language]").forEach(e=>{s[e.dataset.language]=e}),s),this.contentHasChanged=e=>Object.hasOwn(n,e)&&n[e]!==a[e],this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("keyup",t=>{n[e]=t.target.value,i[e].setModifiedState(this.contentHasChanged(e))})};let l=this.getInputContainers();for(let e in l){let t=l[e];a[e]=this.getValueForLanguage(e),i[e]=new C(t),this.registerInputEventListener(e)}t=new(0,E.default)(this),new m(this,l)};var E=v("gvk63"),L=v("iN3hH");let O=function(e){let t,a,n={},i={},s={},r={},l={},g={},u=null;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>{let t=this.getTinymceInstanceForLanguage(e);return t?t.getContent():this.getTextareaForLanguage(e).value},this.setValueForLanguage=(e,t)=>{let a=this.getTinymceInstanceForLanguage(e);a&&(a.setContent(t),a.fire("input"));let n=this.getTextareaForLanguage(e);return D.updateValue(n,t),n.dispatchEvent(new Event("input")),$(n).trigger("change"),this.contentHasChanged(e)},this.getTinymceInstanceForLanguage=e=>{if(Object.hasOwn(g,e)&&g[e])return g[e];let t=this.createTinymceSelector(e);return g[e]=tinymce.get(t),g[e]},this.getTextareaForLanguage=e=>(Object.hasOwn(l,e)&&l[e]||(l[e]=this.getSelf().querySelector(`[data-language="${e}"] textarea`)),l[e]),this.getInputContainers=()=>(this.getSelf().querySelectorAll("[data-language]").forEach(e=>{r[e.dataset.language]=e}),r),this.contentHasChanged=e=>Object.hasOwn(i,e)&&i[e]!==n[e],this.createTinymceSelector=e=>e==L.default.getDefaultLanguage().id?u:`${u}__${e}`,this.bindTinymceEvents=(e,t)=>{t.on("keyup",t=>this.getTextareaForLanguage(e).dispatchEvent(new Event("input")))},this.initTinymceInstanceOnCreation=(e,t)=>{new MutationObserver((t,a)=>{for(let n of t)n.target.dataset.language==e&&(g[e]=this.getTinymceInstanceForLanguage(e),this.bindTinymceEvents(e,g[e]),g[e]&&a.disconnect())}).observe(t,{childList:!0})},this.registerInputEventListener=e=>{l[e].addEventListener("input",t=>{i[e]=this.getValueForLanguage(e),s[e].setModifiedState(this.contentHasChanged(e))})},this.initAll=e=>{for(let t in u=Object.values(e)[0].id.replace("langTab_",""),e){let a=e[t];n[t]=this.getValueForLanguage(t),s[t]=new C(a),g[t]=this.getTinymceInstanceForLanguage(t),l[t]=this.getTextareaForLanguage(t),this.registerInputEventListener(t),g[t]||this.initTinymceInstanceOnCreation(t,a)}for(let e in g)Object.hasOwn(g,e)&&g[e]&&this.bindTinymceEvents(e,g[e])},a=this.getInputContainers(),setTimeout(()=>{this.initAll(a)},50),t=new(0,E.default)(this),new m(this,a)};var E=v("gvk63"),L=v("iN3hH");let w=function(e){let t,a={},n={},i={},s={},r={},l={},g=null;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>{let t=this.getEditorInstanceForLanguage(e);return t?t.getContent():this.getContentElementForLanguage(e).innerHTML},this.setValueForLanguage=(e,t)=>{let a=this.getContentElementForLanguage(e);return a.click(),a.innerHTML=t,a.dispatchEvent(new Event("input")),$(a).trigger("change"),this.contentHasChanged(e)},this.getEditorInstanceForLanguage=e=>{if(Object.hasOwn(l,e)&&l[e])return l[e];let t=this.createTinymceSelector(e);return l[e]=tinymce.get(t),l[e]},this.getContentElementForLanguage=e=>(Object.hasOwn(r,e)||(r[e]=this.getInputContainerForLanguage(e).querySelector(".mce-content-body")),r[e]),this.getInputContainerForLanguage=e=>(Object.hasOwn(s,e)&&s[e]||(s[e]=this.getSelf().querySelector(`[data-language="${e}"]`)),s[e]),this.getInputContainers=()=>(this.getSelf().querySelectorAll("[data-language]").forEach(e=>{s[e.dataset.language]=e}),s),this.contentHasChanged=e=>Object.hasOwn(n,e)&&n[e]!==a[e],this.createTinymceSelector=e=>e==L.default.getDefaultLanguage().id?g:`${g}__${e}`,this.registerUpdateEvent=e=>{let t=this.getContentElementForLanguage(e);new MutationObserver((e,t)=>{for(let t of e)t.target.dispatchEvent(new Event("input"))}).observe(t,{childList:!0})},this.registerInputEventListener=e=>{this.getContentElementForLanguage(e).addEventListener("input",t=>{n[e]=this.getValueForLanguage(e),i[e].setModifiedState(this.contentHasChanged(e))})},(()=>{if(void 0===tinymce)return console.error("TinyMCE was not found by Fluency, translation unavailable");let e=this.getInputContainers();for(let t in g=Object.values(e)[0].id.replace("langTab_",""),e){let n=e[t];a[t]=this.getValueForLanguage(t),i[t]=new C(n),this.registerUpdateEvent(t),this.registerInputEventListener(t)}t=new(0,E.default)(this),new m(this,e)})()};var E=v("gvk63"),L=v("iN3hH");let S=function(e){let t;this.getSelf=()=>e,this.getActivityOverlay=()=>t,t=new(0,E.default)(this)};var V=function(e){let t={},a={},n={},i={},s=new C().getContentModifiedClass(),r={};this.getActivityOverlay=e=>e?r[e].getActivityOverlay():null,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(L.default.getDefaultLanguage().id),this.getValueForLanguage=e=>this.getFieldForLanguage(e).value,this.setValueForLanguage=(e,t)=>{let a=this.getFieldForLanguage(e);return D.updateValue(a,t),a.dispatchEvent(new Event("keyup")),$(a).trigger("change"),this.contentHasChanged(e)},this.getFieldForLanguage=e=>(Object.hasOwn(i,e)&&i[e]||(i[e]=this.getInputContainerForLanguage(e).querySelector("input")),i[e]),this.getInputContainerForLanguage=e=>(Object.hasOwn(n,e)||n[e]||this.getInputContainers(),n[e]),this.getInputContainers=()=>(this.getSelf().querySelectorAll(".LanguageSupport").forEach(e=>{n[e.querySelector("input[type=text]").name.replace("_pw_page_name","")||L.default.getDefaultLanguage().id]=e}),n),this.contentHasChanged=e=>Object.hasOwn(a,e)&&a[e]!==t[e],this.setModifiedState=(e,t)=>{let a=this.getInputContainerForLanguage(e);t&&a.classList.add(s),t||a.classList.remove(s)},this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("keyup",t=>{a[e]=t.target.value,this.setModifiedState(e,this.contentHasChanged(e))})};let l=this.getInputContainers();for(let e in l){let a=l[e];t[e]=this.getValueForLanguage(e),r[e]=new S(a),this.registerInputEventListener(e)}new m(this,l,!0)},D=(e="[class*='hasLangTabs']",t=L.default.getTranslationDisabledFieldAttribute(),a=e=>{for(let t of e)n(t)||i(t)},n=e=>!!e.querySelectorAll(t).length,i=e=>{if(!u(e)&&!e.classList.contains("InputfieldItemList")&&!s(e)){let t=r(e);if(o(e),!t)return}},s=e=>!!e.closest("[class*='Template']"),r=e=>{switch(!0){case!!e.classList.contains("InputfieldTable")||(e.tagName,!1):a(e.querySelectorAll(".langTabs"));break;case!!e.querySelector(".InputfieldCKEditorNormal"):return new F(e);case!!e.querySelector(".InputfieldCKEditorInline"):return new T(e);case!!e.querySelector(".InputfieldTinyMCENormal"):return new O(e);case!!e.querySelector(".InputfieldTinyMCEInline"):return new w(e);case!!e.querySelector("textarea:not(.InputfieldCKEditorNormal,.InputfieldTinyMCEEditor)"):return new A(e);case!!e.querySelector("input[type='text']"):return new I(e);default:return ProcessWire.config.debug&&console.warn("Fluency does not recognize this inputfield, translation is not available",e),null}},l=()=>{let t=document.getElementById("pw-content-body");new MutationObserver((t,n)=>{for(let n of t){let t=n.target.querySelectorAll(e);t.length&&a(t)}}).observe(t,{childList:!0,subtree:!0})},g=()=>{[...document.querySelectorAll(".InputfieldPageName")].forEach(e=>{if(e&&!u(e)){let t=new V(e);if(o(e),!t)return}})},u=e=>e.hasAttribute(L.default.fieldInitializedAttr)||!!e.querySelector(".ft-translate-button"),o=e=>e.setAttribute(L.default.fieldInitializedAttr,""),{init:function(){let t=document.querySelectorAll(e);t.length&&(a(t),l(),g())},updateValue:(e,t)=>{e.focus(),e.value=t,e.blur()},fieldIsInitialized:u}),H=v("7mhep"),L=v("iN3hH");window.addEventListener("load",e=>{L.default.moduleShouldInitialize()&&(H.default.init(),D.init())})}();
//# sourceMappingURL=fluency.js.map
