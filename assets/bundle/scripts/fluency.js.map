{"mappings":"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","sources":["resources/scripts/fluency.js","resources/scripts/inputfields/FtInputfields.js","resources/scripts/global/FtConfig.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","resources/scripts/inputfields/FtInputfieldCKEditor.js","resources/scripts/ui/FtActivityOverlay.js","resources/scripts/ui/FtInputfieldTranslateButton.js","resources/scripts/global/Fluency.js","resources/scripts/ui/FtUiElements.js","resources/scripts/ui/FtLanguageTab.js","resources/scripts/inputfields/FtInputfieldCKEditorInline.js","resources/scripts/inputfields/FtInputfieldTable.js","resources/scripts/inputfields/FtInputfieldText.js","resources/scripts/inputfields/FtInputfieldTextarea.js","resources/scripts/inputfields/FtInputfieldTinyMCE.js","resources/scripts/inputfields/FtInputfieldTinyMCEInline.js","resources/scripts/inputfields/FtInputfieldPageName.js","resources/scripts/ui/FtAdminMenu.js"],"sourcesContent":["import FtInputfields from './inputfields/FtInputfields';\nimport FtAdminMenu from './ui/FtAdminMenu';\nimport FtConfig from './global/FtConfig';\n\n// Each module has its own checks to determine if they should initialize\nwindow.addEventListener('load', e => {\n  if (FtConfig.moduleShouldInitialize()) {\n    FtAdminMenu.init();\n    FtInputfields.init();\n  }\n});\n","import FtConfig from '../global/FtConfig';\nimport { FtIsInputfieldCKEditor, FtInputfieldCKEditor } from './FtInputfieldCKEditor';\nimport {\n  FtIsInputfieldCKEditorInline,\n  FtInputfieldCKEditorInline,\n} from './FtInputfieldCKEditorInline';\nimport { FtIsInputfieldTable } from './FtInputfieldTable';\nimport { FtIsInputfieldText, FtInputfieldText } from './FtInputfieldText';\nimport { FtIsInputfieldTextarea, FtInputfieldTextarea } from './FtInputfieldTextarea';\nimport { FtIsInputfieldTinyMCE, FtInputfieldTinyMCE } from './FtInputfieldTinyMCE';\nimport {\n  FtIsInputfieldTinyMCEInline,\n  FtInputfieldTinyMCEInline,\n} from './FtInputfieldTinyMCEInline';\nimport FtInputfieldPageName from './FtInputfieldPageName';\n\n/**\n * Orchestration for initializing all multilanguage inputfields on a page\n * @return {Object}   Public interface methods\n */\nconst FtInputfields = (function () {\n  /**\n   * Selector used to find translatable Inputfields\n   * All inputfield containers on the page that are multilanguage have this class\n   * @type {String}\n   */\n  const langInputfieldClass = \"[class*='hasLangTabs']\";\n\n  /**\n   * Attribute present where per-field translation is disabled\n   * @type {String}\n   */\n  const disableTranslationAttr = FtConfig.getTranslationDisabledFieldAttribute();\n\n  /**\n   * Initializes multilanguage fields if present on page\n   * @return {void}\n   */\n  const init = function () {\n    const langInputfieldContainers = document.querySelectorAll(langInputfieldClass);\n\n    // Only init if there are multi-language Inputfields on the page\n    if (langInputfieldContainers.length) {\n      initInputfields(langInputfieldContainers);\n      initInputfieldsOnInsertion();\n      initPageNameInputfields();\n    }\n  };\n\n  /**\n   * Initializes multiple multilanguage fields in a collection of elelents\n   * @param  {NodeList} langInputfieldContainers\n   * @return {Void}\n   */\n  const initInputfields = langInputfieldContainers => {\n    for (let langInputfieldContainer of langInputfieldContainers) {\n      if (translationIsDisabled(langInputfieldContainer)) {\n        continue;\n      }\n\n      initInputfield(langInputfieldContainer);\n    }\n  };\n\n  /**\n   * Determines if a provided language inputfield has had Fluency translation disabled\n   * @param  {HTMLElement} langInputfieldContainer\n   * @return {Bool}\n   */\n  const translationIsDisabled = langInputfieldContainer =>\n    !!langInputfieldContainer.querySelectorAll(disableTranslationAttr).length;\n\n  /**\n   * Initializes the field within a container\n   * @param  {Element} langInputfieldContainer Element containing inputfield\n   * @return {void}\n   */\n  const initInputfield = langInputfieldContainer => {\n    // Do not initialize fields that have already been initialized\n    // Do not initialized fields that are a list element and not an Inputfield themselves\n    if (\n      !fieldIsInitialized(langInputfieldContainer) &&\n      !langInputfieldContainer.classList.contains('InputfieldItemList') &&\n      !isInputfieldTemplate(langInputfieldContainer)\n    ) {\n      let inputfield = getFtInputfieldObject(langInputfieldContainer);\n\n      setFieldIsInitialized(langInputfieldContainer);\n\n      if (!inputfield) {\n        return;\n      }\n    }\n  };\n\n  /**\n   * Detect if Inputfield container is a hidden template element used to dynamically create new\n   * Inputfields on demand\n   * @param  {Element} langInputfieldContainer\n   * @return {Bool}\n   */\n  const isInputfieldTemplate = langInputfieldContainer =>\n    !!langInputfieldContainer.closest(\"[class*='Template']\");\n\n  /**\n   * Initializes a FtInputfield object instance by type\n   * Order of checks is important Complex fields should be cased higher\n   * Fields with lower complexity should be cased last to prevent catching simple elements in\n   * complex fields that use simple inputs\n   * @param  {Element} langInputfieldContainers\n   * @return {?Object}\n   */\n  const getFtInputfieldObject = langInputfieldContainer => {\n    switch (true) {\n      case FtIsInputfieldTable(langInputfieldContainer):\n        // Initialize all new fields which have a different class than top-level fields\n        initInputfields(langInputfieldContainer.querySelectorAll('.langTabs'));\n        break;\n      case FtIsInputfieldCKEditor(langInputfieldContainer):\n        return new FtInputfieldCKEditor(langInputfieldContainer);\n\n      case FtIsInputfieldCKEditorInline(langInputfieldContainer):\n        return new FtInputfieldCKEditorInline(langInputfieldContainer);\n\n      case FtIsInputfieldTinyMCE(langInputfieldContainer):\n        return new FtInputfieldTinyMCE(langInputfieldContainer);\n\n      case FtIsInputfieldTinyMCEInline(langInputfieldContainer):\n        return new FtInputfieldTinyMCEInline(langInputfieldContainer);\n\n      case FtIsInputfieldTextarea(langInputfieldContainer):\n        return new FtInputfieldTextarea(langInputfieldContainer);\n\n      case FtIsInputfieldText(langInputfieldContainer):\n        return new FtInputfieldText(langInputfieldContainer);\n\n      default:\n        if (ProcessWire.config.debug) {\n          console.warn(\n            'Fluency does not recognize this inputfield, translation is not available',\n            langInputfieldContainer,\n          );\n        }\n\n        return null;\n    }\n  };\n\n  /**\n   * This sets a mutation observer on the main content area of the edit page that will initialize\n   * new fields that may be added on focus or triggered by AJAX actions\n   *\n   * @return {void}\n   */\n  const initInputfieldsOnInsertion = () => {\n    const parentNode = document.getElementById('pw-content-body');\n\n    new MutationObserver((mutations, observer) => {\n      for (let mutation of mutations) {\n        let targetEl = mutation.target;\n\n        const foundEls = targetEl.querySelectorAll(langInputfieldClass);\n\n        if (foundEls.length) {\n          initInputfields(foundEls);\n        }\n      }\n    }).observe(parentNode, {\n      childList: true,\n      subtree: true,\n    });\n  };\n\n  /**\n   * Initializes page name fields. Must be initialized separately since they do not\n   * follow the structure of other inputfields\n   * @return {void}\n   */\n  const initPageNameInputfields = () => {\n    const pageNameInputfields = document.querySelectorAll('.InputfieldPageName');\n    [...pageNameInputfields].forEach(pageNameInputfield => {\n      if (pageNameInputfield && !fieldIsInitialized(pageNameInputfield)) {\n        let inputfield = new FtInputfieldPageName(pageNameInputfield);\n\n        setFieldIsInitialized(pageNameInputfield);\n\n        if (!inputfield) {\n          return;\n        }\n      }\n    });\n  };\n\n  /**\n   * Checks if a given field has been initialized\n   * @param  {DOMNode} langInputfieldContainer Container element for multi-language field\n   * @return {bool}\n   */\n  const fieldIsInitialized = langTabContainer =>\n    langTabContainer.hasAttribute(FtConfig.fieldInitializedAttr) ||\n    !!langTabContainer.querySelector('.ft-translate-button');\n\n  /**\n   * Marks a field as initialized by adding a data attribute to the container\n   * @param  {DOMNode} langTabContainer Container element for multi-language field\n   * @return {void}\n   */\n  const setFieldIsInitialized = langTabContainer =>\n    langTabContainer.setAttribute(FtConfig.fieldInitializedAttr, '');\n\n  /**\n   * This updates the value of an input element such as text or textarea\n   * When a field is updated it must be blurred so that it is recognized as having been changed and\n   * the \"unsaved changes\" alert will be shown if navigating away from a page without saving\n   * @param  {HTMLElement} inputEl Element\n   * @param  {string}      value\n   * @return {void}\n   */\n  const updateValue = (inputEl, value) => {\n    inputEl.focus();\n    inputEl.value = value;\n    inputEl.blur();\n  };\n\n  return {\n    init,\n    updateValue,\n    fieldIsInitialized,\n  };\n})();\n\nexport default FtInputfields;\n","/**\n * This provides access methods to get module configuration values\n * @return {Object}  Public methods\n */\nconst FtConfig = (function () {\n  // Public properties\n\n  const fieldInitializedAttr = 'data-ft-initialized';\n\n  const translationActionTypes = {\n    each: 'translate_each_language',\n    all: 'translate_to_all_languages',\n    both: 'both',\n  };\n\n  // Private properties\n\n  /**\n   * Holds the data passed from the Fluency module\n   * @access Private\n   * @type {Object}\n   */\n  const config = ProcessWire.config.fluency;\n\n  /**\n   * All UI strings\n   * @type {Object}\n   */\n  const localizedStrings = config.localization;\n\n  /**\n   * Classes for elements created in UI\n   * @type {Object}\n   */\n  const elementClasses = {\n    translateButton: {\n      container: 'ft-translate-button-container',\n      button: 'ft-translate-button',\n    },\n    languageTranslator: {\n      container: 'Inputfield InputfieldHeaderHidden',\n      content: 'InputfieldContent ft-language-translator-button-content',\n      translateButton: 'ft-translate-all-button',\n      sourceLanguageSelect: 'uk-select ft-source-language-select',\n      sourceLanguageSelectLabel: 'ft-source-language-select-label',\n    },\n    statusPlaceholder: {\n      container: 'ft-translation-status-container',\n      label: 'ft-translation-status',\n    },\n    icon: 'ft-icon',\n  };\n\n  /**\n   * Objects interface with the Fluency config object so that changes to the object\n   * structure from the back end do not break the UI. Use the public methods below\n   * to access ProcessWire.config.fluency properties and data\n   */\n\n  /**\n   * Localized strings keyed sets\n   * @type {Object}\n   */\n  const strings = {\n    activityOverlay: localizedStrings.activityOverlay,\n    languageSelect: localizedStrings.languageSelect,\n    inputfieldTranslateButtons: localizedStrings.inputfieldTranslateButtons,\n    standaloneTranslator: localizedStrings.standaloneTranslator,\n    usage: localizedStrings.usage,\n    errors: localizedStrings.errors,\n    languageTranslator: localizedStrings.languageTranslator,\n  };\n\n  /**\n   * Fluency API keyed URLs\n   * @type {Object}\n   */\n  const endpoints = {\n    languages: config.apiEndpoints.languages,\n    translatableLanguagesCache: config.apiEndpoints.translatableLanguagesCache,\n    test: config.apiEndpoints.test,\n    translation: config.apiEndpoints.translation,\n    translationCache: config.apiEndpoints.translationCache,\n    usage: config.apiEndpoints.usage,\n  };\n\n  /**\n   * Contains all of the Fluency configured langauges from the module\n   * @type {Array}\n   */\n  const configuredLanguages = config.configuredLanguages;\n\n  /**\n   * Contains an array of ProcessWire language IDs not configured in Fluency\n   * @type {Array}\n   */\n  const unconfiguredLanguages = config.unconfiguredLanguages;\n\n  // Public methods\n\n  /**\n   * Fluency REST API\n   */\n  const getApiEndpointFor = key => endpoints[key];\n\n  /**\n   * Languages\n   */\n\n  /**\n   * Get all configured languages\n   * @return {object}\n   */\n  const getConfiguredLanguages = () => configuredLanguages;\n\n  /**\n   * Returns ProcessWire's default language\n   * @return {object}\n   */\n  const getDefaultLanguage = () =>\n    getConfiguredLanguages().reduce(\n      (defaultLang, lang) => (lang.default ? lang : defaultLang),\n      null,\n    );\n\n  /**\n   * Determines if the language with a given ProcessWire ID can be translated\n   * @param  {int|string} languageId ProcessWire language ID\n   * @return {bool}\n   */\n  const languageIsTranslatable = languageId =>\n    !getUnconfiguredLanguages().includes(parseInt(languageId, 10));\n\n  /**\n   * Get all languages not configured in Fluency\n   * @return {object}\n   */\n  const getUnconfiguredLanguages = () => unconfiguredLanguages;\n\n  /**\n   * Gets total count of configured and unconfigured languages\n   * @return {int}\n   */\n  const getLanguageCount = () =>\n    getConfiguredLanguages().length + getUnconfiguredLanguages().length;\n\n  /**\n   * Get a configured language by it's ProcessWire ID\n   * @param  {string|int} pwLanguageId ProcessWire language ID\n   * @return {object}\n   */\n  const getLanguageForId = pwLanguageId => {\n    pwLanguageId = parseInt(pwLanguageId, 10);\n\n    return getConfiguredLanguages().reduce(\n      (match, language) => (language.id === pwLanguageId ? language : match),\n      null,\n    );\n  };\n\n  /**\n   * Localization\n   */\n\n  /**\n   * Accessor method for localized UI strings\n   * @param  {string} key Object key\n   * @return {string}\n   */\n  const getUiTextFor = key => strings[key];\n\n  /**\n   * Module Configuration/State\n   */\n\n  /**\n   * Determines if Fluency JS should initialize based on whether languages have\n   * been configured\n   * @return {bool}\n   */\n  const moduleShouldInitialize = () => getConfiguredLanguages().length > 1;\n\n  /**\n   * Returns the translation engine config object for the engine configured in Fluency\n   * @return {object|null}\n   */\n  const getEngineInfo = () => config.engine;\n\n  /**\n   * Does this engine provide usage data?\n   * @return {bool}\n   */\n  const getEngineProvidesUsageData = () => getEngineInfo().providesUsageData;\n\n  /**\n   * Gets the type of translation action chosen in the Flunecy module config\n   * @return {string}\n   */\n  const getTranslationAction = () => config.interface.inputfieldTranslationAction;\n\n  /**\n   * The attribute added to individual field elements where translation has been disabled\n   * @return {string}\n   */\n  const getTranslationDisabledFieldAttribute = () =>\n    `[${config.interface.translationDisabledFieldAttr}]`;\n\n  /**\n   * Class names added to UI components\n   * @param  {string} element The type of component\n   * @return {string}\n   */\n  const getElementClassesFor = element => elementClasses[element];\n\n  return {\n    fieldInitializedAttr,\n    getApiEndpointFor,\n    getConfiguredLanguages,\n    getDefaultLanguage,\n    getElementClassesFor,\n    getEngineInfo,\n    getEngineProvidesUsageData,\n    getLanguageCount,\n    getLanguageForId,\n    getTranslationAction,\n    getTranslationDisabledFieldAttribute,\n    getUiTextFor,\n    getUnconfiguredLanguages,\n    languageIsTranslatable,\n    moduleShouldInitialize,\n    translationActionTypes,\n  };\n})();\n\nexport default FtConfig;\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (\n      key === 'default' ||\n      key === '__esModule' ||\n      Object.prototype.hasOwnProperty.call(dest, key)\n    ) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Determines if a given inputfield contains a regular CKEditor instance\n * @param  {Element} inputfield Inputfield (.langTabs) element\n * @return {Bool}\n */\nconst FtIsInputfieldCKEditor = inputfield =>\n  !!inputfield.querySelector('.InputfieldCKEditorNormal');\n\n/**\n * Handles translations for CKEditor Inputfields\n * @return {object}  Public methods\n */\nconst FtInputfieldCKEditor = function (inputfield) {\n  /**\n   * Contains values for all fields/languages keyed by ProcessWire language ID.\n   * Populated on object instantiation\n   *\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when they change keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {String} Inputfield content\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * Will contain FtLanguageTab object for each language keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type     {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all language input containers keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type {Object}\n   */\n  const inputContainers = {};\n\n  /**\n   * Will contain all CKEditor instances\n   * @property {String} ProcessWire Language ID\n   * @value    {CKEditor|null}\n   * @type     {Object}\n   */\n  const editorInstances = {};\n\n  /**\n   * Will contain the base CKEditor instance ID that can be used to get the default CKEditor instance\n   * using the CKEditor API, or another instance by modifying this one.\n   * Set on FtInputfieldCKEditor instantiation\n   * @type {?String}\n   */\n  let defaultLanguageInstanceId = null;\n\n  /**\n   * This is the base inputfield ID that does not have a language ID appended\n   * ex. Inputfield_example vs Inputfield_example__1028\n   * @type {?String}\n   */\n  let inputfieldBaseId = null;\n\n  /**\n   * Activity overlay object, set on instantiation\n   *\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlay;\n\n  /**\n   * Gets existing or instantiates a new activity overlay\n   *\n   * @access public\n   * @return {Object}\n   */\n  this.getActivityOverlay = () => activityOverlay;\n\n  /**\n   * @access public\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @access public\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * @access public\n   * @param  {Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => this.getEditorInstanceForLanguage(languageId).getData();\n\n  /**\n   * @access public\n   * @param  {Int}    languageId ProcessWire language ID\n   * @param  {Mixed}  value      Value to insert into field\n   * @return {Bool}              Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const instance = this.getEditorInstanceForLanguage(languageId);\n\n    instance.setData(value);\n    instance.fire('change');\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and Admin listeners work\n    $(instance).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * Attempts to get the CKEditor instance for a given language ID. This method should\n   * be used exclusively to get instances as it also sets event listeners for content\n   * changes if they have been instantiated after FtInputfieldCKEditor has loaded\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {?CKEditor}\n   */\n  this.getEditorInstanceForLanguage = languageId => {\n    if (Object.hasOwn(editorInstances, languageId) && !!editorInstances[languageId]) {\n      return editorInstances[languageId];\n    }\n\n    const editorSelectorByLanguageId = [inputfieldBaseId, languageId]\n      .filter(val => !!val)\n      .join('__');\n\n    let editor = CKEDITOR.instances[editorSelectorByLanguageId];\n\n    // If ther was no editor found with this ID then a different default language has been set\n    // and the CKEditor instance will be found without an ID appended\n    if (!editor) {\n      editor = CKEDITOR.instances[inputfieldBaseId];\n    }\n\n    editorInstances[languageId] = editor;\n\n    return editorInstances[languageId];\n  };\n\n  /**\n   * Get all input containers where content is entered, memoizes\n   * @access private\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    this.getSelf()\n      .querySelectorAll('[data-language]')\n      .forEach(el => {\n        inputContainers[el.dataset.language] = el;\n      });\n\n    return inputContainers;\n  };\n\n  /**\n   * @access private\n   * @param  {Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  /**\n   * Registers the event listener that watches for content changes\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {void}\n   */\n  this.registerInputEventListener = languageId => {\n    this.getEditorInstanceForLanguage(languageId).on('change', e => {\n      changedValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId].setModifiedState(this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Initialized the uninitialized\n   * @access private\n   * @return {void}\n   */\n  this.initContainers = () => {\n    const allInputContainers = this.getInputContainers();\n\n    // The first input container will have an inputfield ID without any language ID appended\n    inputfieldBaseId = Object.values(allInputContainers)[0].id.replace('langTab_', '');\n\n    const defaultLanguageProcessWireId = FtConfig.getDefaultLanguage().id.toString();\n\n    const containerElements = Object.values(allInputContainers);\n\n    for (var i = containerElements.length - 1; i >= 0; i--) {\n      let containerId = containerElements[i].id;\n\n      if (containerId.endsWith(defaultLanguageProcessWireId)) {\n        defaultLanguageInstanceId = containerId.replace('langTab_', '');\n\n        break;\n      }\n    }\n\n    for (let languageId in allInputContainers) {\n      let inputContainer = allInputContainers[languageId];\n\n      editorInstances[languageId] = this.getEditorInstanceForLanguage(languageId);\n      languageTabs[languageId] = new FtLanguageTab(inputContainer);\n      this.registerInputEventListener(languageId);\n    }\n\n    activityOverlay = new FtActivityOverlay(this);\n\n    new FtInputfieldTranslateButton(this, allInputContainers);\n  };\n\n  /**\n   * Init on object instantiation\n   * @access private\n   * @return {Void}\n   */\n  (() => {\n    if (CKEDITOR === undefined) {\n      console.error('CKEditor was not found by Fluency, translation unavailable');\n\n      return;\n    }\n\n    // CKEditor experiences a delay between being added to the DOM and a ready state in some\n    // situations, notably after AJAX insertion. This was a lot easier than attempting to use the\n    // CKEditor events API which fired off more events than editors\n    setTimeout(this.initContainers, 50);\n  })();\n};\n\nexport { FtIsInputfieldCKEditor, FtInputfieldCKEditor };\n","import FtConfig from '../global/FtConfig';\n\n/**\n * Creates, inserts, and controls the actions the activity overlay for the provided\n * targetContainer\n * @param {object} targetContainer An instantiated object for an inputfield or fieldset\n * @param {string} type       The type of activity for this overlay. 'translate' or 'update'\n */\nconst FtActivityOverlay = function (targetContainer, activityType = 'translating') {\n  const elClasses = {\n    parent: 'ft-activity-overlay-container',\n    overlay: 'ft-activity-overlay',\n    error: 'error',\n    message: 'message',\n    flash: 'flash',\n    activity: 'activity',\n    visible: 'visible',\n    activityContainer: 'ft-activity',\n    activityStaticText: 'ft-activity-text',\n    activityAnimationContainer: 'ft-activity-animation-container',\n    activityAnimationItem: 'ft-activity-animation-item',\n    messageContainer: 'ft-activity-message',\n  };\n\n  /**\n   * Will contain the activityOverlay Element for this targetContainer\n   * @type {Element}\n   */\n  let activityOverlay;\n\n  /**\n   * Will contain the message Element for this targetContainer's activityOverlay\n   * @type {Element}\n   */\n  let messageContainer;\n\n  /**\n   * Will contain the animation container Element for this targetContainer's activityOverlay\n   * @type {Element}\n   */\n  let activityContainer;\n\n  /**\n   * Show the overlay's activity animation that was created at instantiation\n   * @return {void}\n   */\n  this.showActivity = () => {\n    this.setActivityActive();\n    this.setOverlayVisible();\n  };\n\n  /**\n   * Shows a message in the overlay (neutral background)\n   * @param  {String} message     Text to display\n   * @param  {Number} displayTime Length of time in ms before hiding overlay after shown\n   * @return {void}\n   */\n  this.showMessage = (message, displayTime = 5000) => {\n    this.setMessageContent(message);\n    this.setActivityInactive();\n    this.setMessageActive();\n    this.setOverlayVisible();\n    this.hide(displayTime);\n  };\n\n  /**\n   * Shows a success message (success color background)\n   *\n   * @param  {String} message     Text to display\n   * @param  {Number} displayTime Length of time in ms before hiding overlay after shown\n   * @return {void}\n   */\n  this.flashSuccess = (message, displayTime = 500) => {\n    this.setSuccessActive();\n    this.setFlashActive();\n    this.showMessage(message, displayTime);\n  };\n\n  /**\n   * Shows an error message (error color background)\n   * @param  {String} message     Text to display\n   * @param  {Number} displayTime Length of time in ms before hiding overlay after shown\n   * @return {void}\n   */\n  this.flashError = (message, displayTime = 500) => {\n    this.setFlashActive();\n    this.setErrorActive();\n    this.showMessage(message, displayTime);\n  };\n\n  /**\n   * Shows an error message in a visible overlay (error background)\n   * @param  {String} message     Message to show in overlay error\n   * @param  {Number} displayTime Length of time in ms before hiding overlay after shown\n   * @return {void}\n   */\n  this.showError = (message, displayTime = 5000) => {\n    this.setErrorActive();\n    this.showMessage(message, displayTime);\n  };\n\n  /**\n   * Hide an overlay immediately or after a preset amount of time\n   * @param {Number} delay Length of time in ms before hiding overlay\n   */\n  this.hide = (delay = 0) => {\n    setTimeout(() => {\n      this.setOverlayInvisible();\n    }, delay);\n\n    // Ensures the animation is finished before modifying content\n    setTimeout(() => {\n      this.setActivityInactive();\n      this.setMessageInactive();\n      this.setErrorInactive();\n      this.setFlashInactive();\n      this.setMessageContent('');\n    }, delay + 500);\n  };\n\n  /**\n   * Shows the activity element\n   * @access Private\n   */\n  this.setActivityActive = () => activityOverlay.classList.add(elClasses.activity);\n\n  /**\n   * Hides the activity element\n   * @access Private\n   */\n  this.setActivityInactive = () => activityOverlay.classList.remove(elClasses.activity);\n\n  /**\n   * Shows the message element\n   * @access Private\n   */\n  this.setMessageActive = () => activityOverlay.classList.add(elClasses.message);\n\n  /**\n   * Hides the activity element\n   * @access Private\n   */\n  this.setMessageInactive = () => activityOverlay.classList.remove(elClasses.message);\n\n  /**\n   * Sets the content of the overlay message\n   * @access Private\n   */\n  this.setMessageContent = content => (messageContainer.innerText = content);\n\n  /**\n   * Adds flashing overlay behavior\n   * @access Private\n   */\n  this.setFlashActive = () => activityOverlay.classList.add(elClasses.flash);\n\n  /**\n   * removes flashing overlay behavior\n   * @access Private\n   */\n  this.setFlashInactive = () => activityOverlay.classList.remove(elClasses.flash);\n\n  /**\n   * Sets message to success\n   * @access Private\n   */\n  this.setSuccessActive = () => activityOverlay.classList.add(elClasses.success);\n\n  /**\n   * Unsets success message\n   * @access Private\n   */\n  this.setSuccessInactive = () => activityOverlay.classList.remove(elClasses.success);\n\n  /**\n   * Sets message to error\n   * @access Private\n   */\n  this.setErrorActive = () => activityOverlay.classList.add(elClasses.error);\n\n  /**\n   * Unsets message error\n   * @access Private\n   */\n  this.setErrorInactive = () => activityOverlay.classList.remove(elClasses.error);\n\n  /**\n   * Shows this activity overlay\n   * @access Private\n   */\n  this.setOverlayVisible = () => activityOverlay.classList.add(elClasses.visible);\n\n  /**\n   * Hides this activity overlay\n   * @access Private\n   */\n  this.setOverlayInvisible = () => activityOverlay.classList.remove(elClasses.visible);\n\n  /**\n   * Creates and returns an activity overlay element\n   * @return {HTMLElement}\n   */\n  this.create = () => {\n    activityOverlay = this.buildOverlayEl();\n    activityContainer = this.buildActivityEl();\n    messageContainer = this.buildMessageEl();\n\n    activityOverlay.appendChild(activityContainer);\n    activityOverlay.appendChild(messageContainer);\n\n    return activityOverlay;\n  };\n\n  /**\n   * Creates the parent overlay element\n   * @return {Element}\n   * @access Private\n   */\n  this.buildOverlayEl = () => {\n    const overlay = document.createElement('div');\n\n    overlay.setAttribute('class', elClasses.overlay);\n\n    return overlay;\n  };\n\n  /**\n   * Creates container for animation and contents of animation\n   * @return {Element}\n   * @access Private\n   */\n  this.buildActivityEl = () => {\n    let text = this.getActivityTexts();\n\n    let activityAnimationContainer = document.createElement('div');\n    activityAnimationContainer.setAttribute('class', elClasses.activityAnimationContainer);\n\n    // Add all animation items to the animation container\n    activityAnimationContainer = text.animated.reduce((el, string) => {\n      let activityText = document.createElement('span');\n\n      // Add text items\n      activityText.setAttribute('class', elClasses.activityAnimationItem);\n      activityText.innerHTML = string;\n\n      el.appendChild(activityText);\n\n      return el;\n    }, activityAnimationContainer);\n\n    // Create static text element\n    let staticText = document.createElement('div');\n    staticText.setAttribute('class', elClasses.activityStaticText);\n    staticText.innerText = text.static;\n\n    // Create activity container and append children\n    activityContainer = document.createElement('div');\n    activityContainer.setAttribute('class', elClasses.activityContainer);\n\n    activityContainer.appendChild(staticText);\n    activityContainer.appendChild(activityAnimationContainer);\n\n    return activityContainer;\n  };\n\n  /**\n   * Gets activity overlay texts and shuffles the animated array\n   * No purpose really other than to add some uniqueness to overlay animations and prevent looking\n   * like one language was preferred by me over another.\n   *\n   * Fisher-Yates algorithm, for the curious\n   * @return {Array} Randomized array of the activity animation texts for this instance\n   * @access Private\n   */\n  this.getActivityTexts = () => {\n    let uiTexts = FtConfig.getUiTextFor('activityOverlay')[activityType];\n    let animationTexts = uiTexts.animated;\n\n    for (let i = animationTexts.length - 1; i > 0; i--) {\n      let j = Math.floor(Math.random() * (i + 1));\n      let temp = animationTexts[i];\n\n      animationTexts[i] = animationTexts[j];\n      animationTexts[j] = temp;\n    }\n\n    uiTexts.animated = animationTexts;\n\n    return uiTexts;\n  };\n\n  /**\n   * Builds the element that will hold messages in the overlay\n   * @return {Element}\n   * @access Private\n   */\n  this.buildMessageEl = () => {\n    messageContainer = document.createElement('div');\n    messageContainer.setAttribute('class', elClasses.messageContainer);\n\n    return messageContainer;\n  };\n\n  (() => {\n    const targetContainerContainer = targetContainer.getSelf();\n\n    activityOverlay = this.create();\n\n    targetContainerContainer.classList.add(elClasses.parent);\n    targetContainerContainer.appendChild(activityOverlay);\n  })();\n};\n\nexport default FtActivityOverlay;\n","import FtConfig from '../global/FtConfig';\nimport Fluency from '../global/Fluency';\nimport FtUiElements from './FtUiElements';\n\n/**\n * The translate button establishes the UI element used to trigger translations\n * by the user. It manages the translation process by displaying/hiding the\n * activity overlay, showing messages and errors, getting translations from\n * the Fluency API, and modifying content. This is done by manipulating the\n * inputfield and activityOverlay objects passed.\n */\n\n/**\n * @param {Element}  inputfield\n * @param {NodeList}  inputContainers\n * @param {Boolean} forceEachTranslationAction Force a single field translation trigger\n */\nconst FtInputfieldTranslateButton = function (\n  inputfield,\n  inputContainers,\n  forceEachTranslationAction = false,\n) {\n  /**\n   * Gets all localized strings from the FluencyConfig object\n   * @type {object}\n   */\n  const uiText = FtConfig.getUiTextFor('inputfieldTranslateButtons');\n\n  /**\n   * Adds translate elements to inputfield containers\n   * @param  {string|int} languageId     ProcessWire language ID\n   * @param  {Element}    inputContainer Inputcontainer for this language\n   * @return {void}\n   */\n  this.addTranslateFromDefaultButton = (languageId, inputContainer) => {\n    const isTranslatable = FtConfig.languageIsTranslatable(languageId);\n    const isDefaultLanguage = languageId == FtConfig.getDefaultLanguage().id;\n\n    if (!isTranslatable) {\n      inputContainer.appendChild(FtUiElements.createStatusElement(uiText.languageNotAvailable));\n\n      return;\n    }\n\n    if (isDefaultLanguage) {\n      inputContainer.appendChild(FtUiElements.createStatusElement(uiText.translationAvailable));\n\n      return;\n    }\n\n    const { button, container } = FtUiElements.createTranslateButton(uiText.translateButton);\n\n    this.bindButton(button, FtConfig.getLanguageForId(languageId));\n\n    inputContainer.appendChild(container);\n  };\n\n  /**\n   * Binds a button for translation\n   * @param  {Element} buttonElement Element to bind translation action to\n   * @param  {Object} languageConfig Fluency language configuration object\n   * @return {Void}\n   */\n  this.bindButton = (buttonElement, languageConfig) => {\n    buttonElement.addEventListener('click', e => {\n      e.preventDefault();\n\n      const translationSourceContent = inputfield.getValueForDefaultLanguage();\n\n      if (!translationSourceContent) {\n        return;\n      }\n\n      // Try to get the inputfield activity overlay, fall back to retrieving by language ID where\n      // the inputfield element can delegate to a specific activity overlay located within it\n      const activityOverlay =\n        inputfield.getActivityOverlay() ?? inputfield.getActivityOverlay(languageConfig.id);\n\n      activityOverlay.showActivity();\n\n      Fluency.getTranslation(\n        FtConfig.getDefaultLanguage().engineLanguage.sourceCode,\n        languageConfig.engineLanguage.targetCode,\n        translationSourceContent,\n      ).then(result => {\n        if (result.error) {\n          inputfield.getActivityOverlay().showError(result.message);\n\n          return;\n        }\n\n        inputfield.setValueForLanguage(languageConfig.id, result.translations[0]);\n\n        activityOverlay.hide();\n      });\n    });\n  };\n\n  /**\n   * Creates the \"Translate to all\" button and adds it to the inputfield\n   * @param  {int}          sourceLanguageId     ProcessWire language ID\n   * @param  {HTMLElements} inputContainers      All language input containers for this inputfield\n   * @return {void}\n   */\n  this.addTranslateToAllButton = (sourceLanguageId, inputContainers) => {\n    const isTranslatable = FtConfig.languageIsTranslatable(sourceLanguageId);\n    const sourceInputContainer = inputContainers[sourceLanguageId];\n\n    if (!isTranslatable) {\n      sourceInputContainer.appendChild(\n        FtUiElements.createStatusElement(uiText.languageNotAvailable),\n      );\n\n      return;\n    }\n\n    const { button, container } = FtUiElements.createTranslateButton(uiText.translateToAllButton);\n\n    this.bindTranslateToAllButton(\n      button,\n      FtConfig.getLanguageForId(sourceLanguageId),\n      inputContainers,\n    );\n\n    sourceInputContainer.appendChild(container);\n  };\n\n  /**\n   * Binds translation action to button that translates to all other languages\n   * @param  {Element}  buttonElement        Button to bind\n   * @param  {object}   sourceLanguageConfig The FtConfig object for the source language\n   * @param  {HTMLElements} inputContainers   All language input containers for this inputfield\n   * @return {void}\n   */\n  this.bindTranslateToAllButton = (buttonElement, sourceLanguageConfig, inputContainers) => {\n    buttonElement.addEventListener('click', e => {\n      e.preventDefault();\n\n      const translationSourceContent = inputfield.getValueForLanguage(sourceLanguageConfig.id);\n\n      // Do not translate if there's no source content or risk content in other languages to\n      // be removed\n      if (!translationSourceContent) {\n        return;\n      }\n\n      // Used to count the number of languages left when translating to all\n      let translationLanguageCount = Object.keys(inputContainers).length;\n      let errorOccurred = false;\n      let activityOverlay = inputfield.getActivityOverlay();\n\n      activityOverlay.showActivity();\n\n      for (let targetLanguageId in inputContainers) {\n        targetLanguageId = parseInt(targetLanguageId, 10);\n\n        let targetLanguageConfig = FtConfig.getLanguageForId(targetLanguageId);\n\n        // No need to translate source if present\n        // Skip if source or target languages are not configured in Fluency\n        if (\n          targetLanguageId === sourceLanguageConfig.id ||\n          !sourceLanguageConfig ||\n          !targetLanguageConfig\n        ) {\n          translationLanguageCount--;\n\n          continue;\n        }\n\n        Fluency.getTranslation(\n          sourceLanguageConfig.engineLanguage.sourceCode,\n          targetLanguageConfig.engineLanguage.targetCode,\n          translationSourceContent,\n        )\n          .then(result => {\n            if (result.error) {\n              // Only show the error overlay if an error has not already occurred\n              if (!errorOccurred) {\n                inputfield.getActivityOverlay().showError(result.message);\n              }\n\n              errorOccurred = true;\n\n              return;\n            }\n\n            inputfield.setValueForLanguage(targetLanguageConfig.id, result.translations[0]);\n          })\n          .then(result => {\n            translationLanguageCount--;\n\n            // If an error occurred, messaging/overlay will be handled by the error process\n            if (translationLanguageCount === 0 && !errorOccurred) {\n              activityOverlay.hide();\n            }\n          });\n      }\n    });\n  };\n\n  this.addBothTranslationButtonTypes = (languageId, inputContainers) => {\n    this.addTranslateToAllButton(languageId, inputContainers);\n    this.addTranslateFromDefaultButton(languageId, inputContainers[languageId]);\n  };\n\n  /**\n   * Init on object instantiation\n   */\n  (() => {\n    const actionTypes = FtConfig.translationActionTypes;\n    const translationAction = FtConfig.getTranslationAction();\n\n    for (let languageId in inputContainers) {\n      if (translationAction === actionTypes.all && !forceEachTranslationAction) {\n        this.addTranslateToAllButton(languageId, inputContainers);\n      }\n\n      if (translationAction === actionTypes.each || forceEachTranslationAction) {\n        this.addTranslateFromDefaultButton(languageId, inputContainers[languageId]);\n      }\n\n      if (translationAction === actionTypes.both && !forceEachTranslationAction) {\n        this.addTranslateToAllButton(languageId, inputContainers);\n        this.addTranslateFromDefaultButton(languageId, inputContainers[languageId]);\n      }\n    }\n  })();\n};\n\nexport default FtInputfieldTranslateButton;\n","import FtConfig from './FtConfig';\n\n/**\n * Core module interface\n * Handles all interaction with the ProcessWire module backend\n * @return {object} Public interfaces\n */\n\nconst Fluency = (function () {\n  /**\n   * Localized error strings\n   * @type {Object}\n   */\n  const errors = FtConfig.getUiTextFor('errors');\n\n  /**\n   * Data Request Methods\n   */\n\n  /**\n   * Gets a translation from the Fluency module\n   * @param  {String}       sourceLanguage ISO language code\n   * @param  {String}       targetLanguage ISO langauge code\n   * @param  {String|Array} content        Content to translate\n   * @param  {Array}        options        Additional options\n   * @param  {Bool|null}         caching        Enable/disable caching\n   * @return {Promise}\n   */\n  const getTranslation = (\n    sourceLanguage,\n    targetLanguage,\n    content,\n    options = [],\n    caching = null\n  ) => {\n    return postRequest(\n      FtConfig.getApiEndpointFor('translation'),\n      {\n        sourceLanguage: sourceLanguage,\n        targetLanguage: targetLanguage,\n        content: content,\n        options: options,\n        caching: caching,\n      },\n      response => {\n        return response;\n      }\n    );\n  };\n\n  /**\n   * Gets the current translation service API usage\n   * @return {Promise}\n   */\n  const getUsage = () => {\n    return getRequest(FtConfig.getApiEndpointFor('usage'), response => {\n      return response;\n    });\n  };\n\n  /**\n   * Get all language available for translation. Provides source/target lists from the translation\n   * service API\n   * @return {Promise}\n   */\n  const getAvailableLanguages = () => {\n    return getRequest(FtConfig.getApiEndpointFor('languages'), response => {\n      return response;\n    });\n  };\n\n  /**\n   * Clear all cached translations\n   * @return {Promise}\n   */\n  const deleteTranslationCache = () => {\n    return deleteRequest(FtConfig.getApiEndpointFor('translationCache'), response => {\n      return response;\n    });\n  };\n\n  /**\n   * Clear cached list of translatable languages\n   * @return {Promise}\n   */\n  const deleteTranslatableLanguagesCache = () => {\n    return deleteRequest(FtConfig.getApiEndpointFor('translatableLanguagesCache'), response => {\n      return response;\n    });\n  };\n\n  /**\n   * HTTP Requests\n   */\n\n  /**\n   * Create headers for AJAX requests\n   * @return {Object}\n   */\n  const requestHeaders = requestType => {\n    const requestHeaders = {\n      'X-Requested-With': 'XMLHttpRequest',\n    };\n\n    if (requestType === 'GET') {\n      requestHeaders['Accept'] = 'application/json';\n    }\n\n    if (requestType === 'POST') {\n      requestHeaders['Content-Type'] = 'application/json';\n    }\n\n    return requestHeaders;\n  };\n\n  /**\n   * Executes a POST request to a given endpoint\n   * @param  {String}    endpoint URL for AJAX request\n   * @param  {Object}    data     Data for request\n   * @param  {Callable}  data     Function to handle response body\n   * @return {Promise}\n   */\n  const postRequest = (endpoint, data, responseHandler) => {\n    return fetch(endpoint, {\n      method: 'POST',\n      cache: 'no-store',\n      headers: requestHeaders,\n      body: JSON.stringify(data),\n    })\n      .then(parseResponse)\n      .then(responseHandler)\n      .catch(handleFetchError);\n  };\n\n  /**\n   * Executes a GET request to a given endpoint\n   * @param  {String}   endpoint        URL for AJAX request\n   * @param  {Callable} responseHandler Function to handle response body\n   * @return {Promise}\n   */\n  const getRequest = (endpoint, responseHandler) => {\n    return fetch(endpoint, {\n      method: 'GET',\n      cache: 'no-store',\n      headers: requestHeaders('GET'),\n    })\n      .then(parseResponse)\n      .then(responseHandler)\n      .catch(handleFetchError);\n  };\n\n  /**\n   * Executes a DELETE request to a given endpoint\n   * @param  {String}   endpoint        URL for AJAX request\n   * @param  {Callable} responseHandler Function to handle response body\n   * @return {Promise}\n   */\n  const deleteRequest = (endpoint, responseHandler) => {\n    return fetch(endpoint, {\n      method: 'DELETE',\n      headers: requestHeaders('GET'),\n    })\n      .then(parseResponse)\n      .then(responseHandler)\n      .catch(handleFetchError);\n  };\n\n  /**\n   * Parses response\n   * @param  {Object} response Fluency API response\n   * @return {Object|Void}\n   * @throws Error\n   */\n  const parseResponse = response => {\n    if (response.status === 204) {\n      return response;\n    }\n\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error();\n  };\n\n  /**\n   * Parses and returns results for a fetch error\n   * These are network level errors that occur between ProcessWire and the hosting server\n   * Any translation or service errors will be located within the response body itself\n   * @param  {Error} error Fetch API error object\n   * @return {Object}\n   */\n  const handleFetchError = error => {\n    console.error('[Fluency module API failure]', error.message);\n\n    const returnObject = {\n      error: null,\n      message: null,\n    };\n\n    switch (error.message.split(' ')[0]) {\n      case 'NetworkError':\n        returnObject.error = 'FLUENCY_CLIENT_DISCONNECTED';\n        returnObject.message = errors['FLUENCY_CLIENT_DISCONNECTED'];\n        break;\n      default:\n        returnObject.error = 'UNKNOWN_ERROR';\n        returnObject.message = errors['UNKNOWN_ERROR'];\n        break;\n    }\n\n    return returnObject;\n  };\n\n  return {\n    deleteTranslatableLanguagesCache,\n    deleteTranslationCache,\n    getAvailableLanguages,\n    getTranslation,\n    getUsage,\n  };\n})();\n\nexport default Fluency;\n","import FtConfig from '../global/FtConfig';\nimport Fluency from '../global/Fluency';\n\n/**\n * Creates common HTML elements\n *\n * @return {Object} Public methods\n */\nconst FtUiElements = (function () {\n  /**\n   * @type {Object}\n   */\n  const elementClasses = FtConfig.elementClasses;\n\n  /**\n   * Gets all localized strings from the FluencyConfig object\n   * These do nothing on their own and must be bound with any behavior after creation\n   * @type {object}\n   */\n  const uiText = FtConfig.getUiTextFor('inputfieldTranslateButtons');\n\n  /**\n   * Creates a language fontawesome icon element\n   * @return {Element}\n   */\n  const createIcon = () => {\n    const iconLink = document.createElement('a');\n    iconLink.setAttribute('href', `${ProcessWire.config.urls.admin}fluency/?modal=1`);\n    iconLink.setAttribute('class', 'pw-modal pw-modal-large');\n\n    const icon = document.createElement('i');\n    icon.setAttribute('class', `${FtConfig.getElementClassesFor('icon')} fa fa-language`);\n    icon.setAttribute('uk-tooltip', uiText.showTranslator);\n\n    iconLink.appendChild(icon);\n\n    return iconLink;\n  };\n\n  /**\n   * Creates a status placeholder\n   * @param  {string} text Button text\n   * @return {Element}\n   */\n  const createStatusElement = text => {\n    const elClasses = FtConfig.getElementClassesFor('statusPlaceholder');\n\n    const label = document.createElement('span');\n    label.setAttribute('class', elClasses.label);\n    label.innerText = text;\n\n    const container = document.createElement('div');\n    container.setAttribute('class', elClasses.container);\n\n    container.appendChild(createIcon());\n    container.appendChild(label);\n\n    return container;\n  };\n\n  /**\n   * Creates a translate button element\n   * @return {Object} Container element and Button element\n   */\n  const createTranslateButton = text => {\n    const elClasses = FtConfig.getElementClassesFor('translateButton');\n\n    const button = document.createElement('a');\n    button.innerText = text;\n    button.setAttribute('class', elClasses.button);\n    button.setAttribute('href', '');\n\n    const container = document.createElement('div');\n    container.setAttribute('class', elClasses.container);\n\n    container.appendChild(createIcon());\n    container.appendChild(button);\n\n    return {\n      button,\n      container,\n    };\n  };\n\n  /**\n   * Creates the translate to all for the language translator pages\n   * @param  {string} text Button label\n   * @return {Element}\n   */\n  const createLanguageTranslatorInputs = () => {\n    const elClasses = FtConfig.getElementClassesFor('languageTranslator');\n    const texts = FtConfig.getUiTextFor('languageTranslator');\n\n    // Translate All button\n    const translateAllButton = document.createElement('a');\n    translateAllButton.innerText = texts.translateAllButton;\n    translateAllButton.setAttribute('class', elClasses.translateButton);\n    translateAllButton.setAttribute('href', '');\n\n    // Source language select\n    const sourceLanguageSelect = document.createElement('select');\n    sourceLanguageSelect.setAttribute('class', elClasses.sourceLanguageSelect);\n\n    // Source language select options\n    FtConfig.getConfiguredLanguages().forEach(function (language) {\n      const option = document.createElement('option');\n      option.textContent = language.title;\n      option.value = language.engineLanguage.sourceCode;\n\n      if (language.default) {\n        option.selected = 'selected';\n        sourceLanguageSelect.prepend(option);\n\n        return;\n      }\n\n      sourceLanguageSelect.appendChild(option);\n    });\n\n    // Source language select label text\n    const selectLabelText = document.createElement('span');\n    selectLabelText.innerText = texts.sourceLanguageSelectLabel;\n\n    // Source language select label\n    const sourceLanguageSelectLabel = document.createElement('label');\n    sourceLanguageSelectLabel.setAttribute('class', elClasses.sourceLanguageSelectLabel);\n    sourceLanguageSelectLabel.appendChild(selectLabelText);\n    sourceLanguageSelectLabel.appendChild(sourceLanguageSelect);\n\n    // Container that holds all UI elements\n    const content = document.createElement('div');\n    content.setAttribute('class', elClasses.content);\n    content.appendChild(translateAllButton);\n    content.appendChild(sourceLanguageSelectLabel);\n\n    // ProcessWire UI fields container\n    const container = document.createElement('li');\n    container.setAttribute('class', elClasses.container);\n    container.appendChild(content);\n\n    return {\n      translateAllButton,\n      sourceLanguageSelect,\n      container,\n    };\n  };\n\n  return {\n    createStatusElement,\n    createTranslateButton,\n    createLanguageTranslatorInputs,\n    createIcon,\n    elementClasses,\n  };\n})();\n\nexport default FtUiElements;\n","/**\n * A stateful function handling  behaviors for a language tab associated with a input container\n * contained within an Inputfield. An \"input container\" is the div that contains the label and\n * input/textarea/element (depending on Inputfield type) for a language\n * @param {Element} inputContainer Language\n */\nconst FtLanguageTab = function (inputContainer) {\n  /**\n   * Note\n   * @type {String}\n   */\n  const contentModifiedClass = 'ft-content-changed';\n\n  /**\n   * Cached associated tab for this input container\n   * @type {Element}\n   */\n  let languageTab = null;\n\n  this.getContentModifiedClass = () => contentModifiedClass;\n\n  /**\n   * Sets state of tab\n   * @param  {bool} modified Determines state of tab display\n   * @return {void}\n   */\n  this.setModifiedState = modified => (modified ? this.setTabModified() : this.setTabUnmodified());\n\n  this.setTabModified = () => this.getLanguageTab().classList.add(contentModifiedClass);\n\n  this.setTabUnmodified = () => this.getLanguageTab().classList.remove(contentModifiedClass);\n\n  this.getLanguageTab = () => {\n    return (\n      languageTab ??\n      inputContainer\n        .closest('.langTabs')\n        .querySelector(`.langTabLink[data-lang=\"${inputContainer.dataset.language}\"`)\n    );\n  };\n\n  /**\n   * Init method executed on object instantiation\n   * @return {void}\n   */\n  (() => {\n    if (!inputContainer) {\n      return false;\n    }\n\n    languageTab = this.getLanguageTab();\n  })();\n};\n\nexport default FtLanguageTab;\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfields from './FtInputfields';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Determines if a given inputfield contains an inline CKEditor instance\n * @param  {Element} inputfield Inputfield (.langTabs) element\n * @return {Bool}\n */\nconst FtIsInputfieldCKEditorInline = inputfield =>\n  !!inputfield.querySelector('.InputfieldCKEditorInline');\n\n/**\n * Handles translations for CKEditor Inputfields\n * @return {object}  Public methods\n */\nconst FtInputfieldCKEditorInline = function (inputfield) {\n  /**\n   * Contains values for all fields/languages\n   * Populated on FtInputfieldCKEditorInline instantiation\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when they change keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {String} Inputfield content\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * Will contain FtLanguageTab object for each language keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type     {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all language input containers keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type {Object}\n   */\n  const inputContainers = {};\n\n  /**\n   * Will contain all CKEditor instances\n   * @property {String} ProcessWire Language ID\n   * @value    {CKEditor|null}\n   * @type     {Object}\n   */\n  const editorInstances = {};\n\n  /**\n   * Will contain all elements that the inline editor uses for content\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const contentElements = {};\n\n  /**\n   * Will contain the base CKEditor instance ID that can be used to get the default CKEditor instance\n   * using the CKEditor API, or another instance by modifying this one.\n   * Set on FtInputfieldCKEditor instantiation\n   * @type {?String}\n   */\n  let defaultLanguageInstanceId = null;\n\n  /**\n   * Activity overlay object, set on instantiation\n   *\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlay;\n\n  /**\n   * Gets existing or instantiates a new activity overlay\n   *\n   * @access public\n   * @return {Object}\n   */\n  this.getActivityOverlay = () => activityOverlay;\n\n  /**\n   * @access public\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @access public\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * Attempts to get the value for a language via the CKEditor API, falls back to directly getting\n   * the content of the content element\n   * @access public\n   * @param  {Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => {\n    const ckeditorInstance = this.getEditorInstanceForLanguage(languageId);\n\n    if (ckeditorInstance) {\n      return ckeditorInstance.getData();\n    }\n\n    return this.getContentElementForLanguage(languageId).innerHTML;\n  };\n\n  /**\n   * @access public\n   * @param  {Int}    languageId ProcessWire language ID\n   * @param  {Mixed}  value      Value to insert into field\n   * @return {Bool}              Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const instance = this.getEditorInstanceForLanguage(languageId);\n    const contentElement = this.getContentElementForLanguage(languageId);\n\n    instance ? instance.setValue(value) : (contentElement.innerHTML = value);\n\n    contentElement.dispatchEvent(new Event('input'));\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and Admin listeners work\n    $(contentElement).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * Attempts to get the CKEditor instance for a given language ID. This method should\n   * be used exclusively to get instances as it also sets event listeners for content\n   * changes if they have been instantiated after FtInputfieldCKEditor has loaded\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {?CKEditor}\n   */\n  this.getEditorInstanceForLanguage = languageId => {\n    if (Object.hasOwn(editorInstances, languageId) && !!editorInstances[languageId]) {\n      return editorInstances[languageId];\n    }\n\n    editorInstances[languageId] = CKEDITOR.instances[this.createCKEditorSelector(languageId)];\n\n    return editorInstances[languageId];\n  };\n\n  /**\n   * Gets the content element that CKEditor uses to store the field content\n   * Ensures memoization\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Element}\n   */\n  this.getContentElementForLanguage = languageId => {\n    if (Object.hasOwn(contentElements, languageId)) {\n      return contentElements[languageId];\n    }\n\n    contentElements[languageId] = this.getInputContainerForLanguage(languageId).querySelector(\n      '.InputfieldCKEditorInlineEditor',\n    );\n\n    return contentElements[languageId];\n  };\n\n  /**\n   * Creates a CKEditor ID used to get instances by language\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {String}\n   */\n  this.createCKEditorSelector = languageId => {\n    if (languageId == FtConfig.getDefaultLanguage().id) {\n      return defaultLanguageInstanceId;\n    }\n\n    return `${defaultLanguageInstanceId}__${languageId}`;\n  };\n\n  /**\n   * Get all input containers where content is entered, memoizes\n   * @access private\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    if (Object.keys(inputContainers).length === FtConfig.getLanguageCount()) {\n      return inputContainers;\n    }\n\n    this.getSelf()\n      .querySelectorAll('[data-language]')\n      .forEach(el => {\n        inputContainers[el.dataset.language] = el;\n      });\n\n    return inputContainers;\n  };\n\n  /**\n   * Gets a specific input container\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Element}\n   */\n  this.getInputContainerForLanguage = languageId => {\n    if (Object.hasOwn(inputContainers, languageId)) {\n      return inputContainers[languageId];\n    }\n\n    inputContainers[languageId] = inputfield.querySelector(`[data-language=\"${languageId}\"]`);\n\n    return inputContainers[languageId];\n  };\n\n  /**\n   * @access private\n   * @param  {Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  /**\n   * Creates a MutationObserver that will detect when the content has changed for a given content\n   * element. When content is changed, is will mock an 'input' even that an eventListener will\n   * respond to\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerUpdateEvent = languageId => {\n    const contentElement = this.getContentElementForLanguage(languageId);\n\n    new MutationObserver((mutations, observer) => {\n      for (let mutation of mutations) {\n        mutation.target.dispatchEvent(new Event('input'));\n      }\n    }).observe(contentElement, {\n      childList: true,\n    });\n  };\n\n  /**\n   * Registers an event listener that will respond to any 'input' changes in a\n   * content element\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerInputEventListener = languageId => {\n    this.getContentElementForLanguage(languageId).addEventListener('input', e => {\n      changedValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId].setModifiedState(this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Init on object instantiation\n   * @access private\n   * @return {Void}\n   */\n  (() => {\n    if (CKEDITOR === undefined) {\n      console.error('CKEditor was not found by Fluency, translation unavailable');\n\n      return null;\n    }\n\n    const allInputContainers = this.getInputContainers();\n\n    defaultLanguageInstanceId = Object.values(allInputContainers)[0].id.replace('langTab_', '');\n\n    for (let languageId in allInputContainers) {\n      let inputContainer = allInputContainers[languageId];\n\n      editorInstances[languageId] = this.getEditorInstanceForLanguage(languageId);\n      languageTabs[languageId] = new FtLanguageTab(inputContainer);\n\n      this.registerInputEventListener(languageId);\n    }\n\n    activityOverlay = new FtActivityOverlay(this);\n\n    new FtInputfieldTranslateButton(this, allInputContainers);\n  })();\n};\n\nexport { FtIsInputfieldCKEditorInline, FtInputfieldCKEditorInline };\n","/**\n * Determines if a given inputfield contains a Table instance\n * @param  {Element} inputfield Inputfield (.langTabs) element\n * @return {Bool}\n */\nconst FtIsInputfieldTable = inputfield =>\n  isInputfieldTable(inputfield) || isInputfieldTableRow(inputfield);\n\n/**\n * Handles table inputfields on load\n * @param  {Element} inputfield\n * @return {Bool}\n */\nconst isInputfieldTable = inputfield => !!inputfield.classList.contains('InputfieldTable');\n\nconst isInputfieldTableRow = inputfield =>\n  !!inputfield.tagName === 'TBODY' &&\n  inputfield.querySelectorAll('.InputfieldTable_hasLangTabs').length;\n\nexport { FtIsInputfieldTable };\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfields from './FtInputfields';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Determines if the current inputfield is an InputfieldText\n * @param  {Element} inputfield Element containing the multilanguage fields\n * @return {Bool}\n */\nconst FtIsInputfieldText = inputfield => !!inputfield.querySelector(\"input[type='text']\");\n\n/**\n * Handles IO operations for a multilanguage InputfieldText element\n * Language IDs are always converted to int to accept values from all sources since some may be\n * retrieved from various sources as a string\n * @param {Element} inputfield The Inputfield .hasLangTabs container\n */\nconst FtInputfieldText = function (inputfield) {\n  /**\n   * Page-load values for all fields/languages\n   * Populated on object instantiation\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when content is modified\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * FtLanguageTab objects for each language\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all elements containing language inputs\n   * @property {String} ProcessWire Language ID\n   * @type {NodeList}\n   */\n  const inputContainers = {};\n\n  /**\n   * Text input fields\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const languageFields = {};\n\n  /**\n   * Activity overlay object, set on instantiation\n   *\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlay;\n\n  /*\n   * @access public\n   * @return {Object}\n   */\n  this.getActivityOverlay = () => activityOverlay;\n\n  /**\n   * @access public\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @access public\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * @access public\n   * @param  {String|Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => this.getFieldForLanguage(languageId).value;\n\n  /**\n   * @access public\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @param  {Mixed}      value      Value to insert into field\n   * @return {Bool}                  Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const field = this.getFieldForLanguage(languageId);\n\n    FtInputfields.updateValue(field, value);\n\n    // Required to programmatically trigger the event listener for this field\n    field.dispatchEvent(new Event('keyup'));\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and Admin listeners work\n    $(field).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * @access private\n   * @param  {String|Int}  languageId ProcessWire language ID\n   * @return {Element}                Text field\n   */\n  this.getFieldForLanguage = languageId => {\n    if (Object.hasOwn(languageFields, languageId) && !!languageFields[languageId]) {\n      return languageFields[languageId];\n    }\n\n    languageFields[languageId] =\n      this.getInputContainerForLanguage(languageId).querySelector('input');\n\n    return languageFields[languageId];\n  };\n\n  /**\n   * Gets a specific input container\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Element}\n   */\n  this.getInputContainerForLanguage = languageId => {\n    if (Object.hasOwn(inputContainers, languageId) && !!inputContainers[languageId]) {\n      return inputContainers[languageId];\n    }\n\n    inputContainers[languageId] = inputfield.querySelector(`[data-language=\"${languageId}\"]`);\n\n    return inputContainers[languageId];\n  };\n\n  /**\n   * Get all input containers where content is entered, memoizes\n   * @access private\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    inputfield\n      .querySelectorAll('[data-language]')\n      .forEach(el => (inputContainers[el.dataset.language] = el));\n\n    return inputContainers;\n  };\n\n  /**\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  /**\n   * Registers the event listener that watches for changes\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerInputEventListener = languageId => {\n    this.getFieldForLanguage(languageId).addEventListener('keyup', e => {\n      changedValues[languageId] = e.target.value;\n      languageTabs[languageId].setModifiedState(this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Init method executed on object instantiation\n   * - Stores initial field values for each langauge\n   * - Creates/stores an FtLanguageTab object for each language\n   * - Binds an event that detects changes on input\n   * @return {Void}\n   */\n  (() => {\n    const allInputContainers = this.getInputContainers();\n\n    for (let languageId in allInputContainers) {\n      let inputContainer = allInputContainers[languageId];\n\n      initValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId] = new FtLanguageTab(inputContainer);\n\n      this.registerInputEventListener(languageId);\n    }\n\n    activityOverlay = new FtActivityOverlay(this);\n\n    new FtInputfieldTranslateButton(this, allInputContainers);\n  })();\n};\n\nexport { FtIsInputfieldText, FtInputfieldText };\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfields from './FtInputfields';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Determines if the current inputfield is an InputfieldText\n * @param  {Element} inputfield Element containing the multilanguage fields\n * @return {Bool}\n */\nconst FtIsInputfieldTextarea = inputfield =>\n  !!inputfield.querySelector('textarea:not(.InputfieldCKEditorNormal,.InputfieldTinyMCEEditor)');\n\n/**\n * Handles IO operations for a multilanguage InputfieldText element\n * Language IDs are always converted to int to accept values from all sources since some may be\n * retrieved from various sources as a string\n * @param {Element} inputfield The Inputfield .hasLangTabs container\n */\nconst FtInputfieldTextarea = function (inputfield) {\n  /**\n   * Contains values for all fields/languages keyed by ProcessWire language ID.\n   * Populated on object instantiation\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when they change keyed by language ID\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * Will contain FtLanguageTab object for each language keyed by language ID\n   * Language ID keys are integers\n   * @type {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all language input containers keyed by language ID\n   * Language ID keys are integers\n   * @type {NodeList}\n   */\n  const inputContainers = {};\n\n  /**\n   * Will contain all language input text fields keyed by language ID\n   * @type {Object}\n   */\n  const languageFields = {};\n\n  /**\n   * Activity overlay object, set on instantiation\n   *\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlay;\n\n  /*\n   * @access public\n   * @return {Object}\n   */\n  this.getActivityOverlay = () => activityOverlay;\n\n  /**\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * @param  {Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => this.getFieldForLanguage(languageId).value;\n\n  /**\n   * @param  {Int}    languageId ProcessWire language ID\n   * @param  {Mixed}  value      Value to insert into field\n   * @return {Bool}              Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const field = this.getFieldForLanguage(languageId);\n\n    FtInputfields.updateValue(field, value);\n\n    // Required to programmatically trigger the event listener for this field\n    field.dispatchEvent(new Event('keyup'));\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and admin JS listeners work\n    $(field).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * @param  {Int}    languageId ProcessWire language ID\n   * @return {Element}           Text field\n   */\n  this.getFieldForLanguage = languageId => {\n    if (Object.hasOwn(languageFields, languageId)) {\n      return languageFields[languageId];\n    }\n\n    languageFields[languageId] = inputfield.querySelector(\n      `[data-language=\"${languageId}\"] textarea`,\n    );\n\n    return languageFields[languageId];\n  };\n\n  /**\n   * Get all input containers where content is entered, memoizes\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    inputfield.querySelectorAll('[data-language]').forEach(el => {\n      inputContainers[el.dataset.language] = el;\n    });\n\n    return inputContainers;\n  };\n\n  /**\n   * @param  {Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  /**\n   * Registers the event listener that watches for changes\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerInputEventListener = languageId => {\n    this.getFieldForLanguage(languageId).addEventListener('keyup', e => {\n      changedValues[languageId] = e.target.value;\n      languageTabs[languageId].setModifiedState(this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Init method executed on object instantiation\n   * - Stores initial field values for each langauge\n   * - Creates/stores an FtLanguageTab object for each language\n   * - Binds an event that detects changes on input\n   * @return {Void}\n   */\n  (() => {\n    const allInputContainers = this.getInputContainers();\n\n    for (let languageId in allInputContainers) {\n      let inputContainer = allInputContainers[languageId];\n\n      initValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId] = new FtLanguageTab(inputContainer);\n\n      this.registerInputEventListener(languageId);\n    }\n\n    activityOverlay = new FtActivityOverlay(this);\n\n    new FtInputfieldTranslateButton(this, allInputContainers);\n  })();\n};\n\nexport { FtIsInputfieldTextarea, FtInputfieldTextarea };\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfields from './FtInputfields';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Determines if a given inputfield contains a regular TinyMCE instance\n * @param  {Element} inputfield Inputfield (.langTabs) element\n * @return {Bool}\n */\nconst FtIsInputfieldTinyMCE = inputfield => !!inputfield.querySelector('.InputfieldTinyMCENormal');\n\n/**\n * Handles IO operations for a multilanguage InputfieldTinyMCE elements\n * @param {Element} inputfield The Inputfield .hasLangTabs container\n */\nconst FtInputfieldTinyMCE = function (inputfield) {\n  /**\n   * Contains values for all fields/languages keyed by ProcessWire language ID.\n   * Populated on object instantiation\n   *\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when they change keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {String} Inputfield content\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * Will contain FtLanguageTab object for each language keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type     {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all language input containers keyed by language ID\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type {Object}\n   */\n  const inputContainers = {};\n\n  /**\n   * Will contain all language input textarea fields that hold Inputfield data before TinyMCE\n   * instances are initialized.\n   * @property {String} ProcessWire Language ID\n   * @value    {Element}\n   * @type     {Object}\n   */\n  const textareas = {};\n\n  /**\n   * Will contain all TinyMCE instances as they become available (are initialized). Most TinyMCE\n   * instances are lazy loaded or loaded on demand. Keyed by language ID\n   * This is populated on FtInputfieldTinyMCE on instantiation and language ID properties will either\n   * have a TinyMCE object or null\n   * @property {String} ProcessWire Language ID\n   * @value    {TinyMCE|null}\n   * @type     {Object}\n   */\n  const editorInstances = {};\n\n  /**\n   * Will contain the base TinyMCE instance ID that can be used to get the default TinyMCE instance\n   * using the TinyMCE API, or another instance by modifying this one.\n   * Set on FtInputfieldTinyMCE instantiation\n   * @type {?String}\n   */\n  let defaultLanguageInstanceId = null;\n\n  /**\n   * Activity overlay object, set on instantiation\n   *\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlay;\n\n  /*\n   * @access public\n   * @return {Object}\n   */\n  this.getActivityOverlay = () => activityOverlay;\n\n  /**\n   * @access public\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @access public\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * @param  {Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => {\n    const tinymceInstance = this.getTinymceInstanceForLanguage(languageId);\n\n    if (tinymceInstance) {\n      return tinymceInstance.getContent();\n    }\n\n    return this.getTextareaForLanguage(languageId).value;\n  };\n\n  /**\n   * Sets content for a language, will set the value for TinyMCE if it exists, and always set the\n   * value for the textarea\n   * @access public\n   * @param  {Int}    languageId ProcessWire language ID\n   * @param  {Mixed}  value      Value to insert into field\n   * @return {Bool}              Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const tinymceInstance = this.getTinymceInstanceForLanguage(languageId);\n\n    if (tinymceInstance) {\n      tinymceInstance.setContent(value);\n\n      tinymceInstance.fire('input');\n    }\n\n    const field = this.getTextareaForLanguage(languageId);\n\n    FtInputfields.updateValue(field, value);\n\n    field.dispatchEvent(new Event('input'));\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and Admin listeners work\n    $(field).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * Attempts to get the TinyMCE instance for a given language ID if it exists\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {?TinyMCE}\n   */\n  this.getTinymceInstanceForLanguage = languageId => {\n    if (Object.hasOwn(editorInstances, languageId) && editorInstances[languageId]) {\n      return editorInstances[languageId];\n    }\n\n    const tinymceSelector = this.createTinymceSelector(languageId);\n\n    editorInstances[languageId] = tinymce.get(tinymceSelector);\n\n    return editorInstances[languageId];\n  };\n\n  /**\n   * @access private\n   * @param  {Int}    languageId ProcessWire language ID\n   * @return {Element}           Text field\n   */\n  this.getTextareaForLanguage = languageId => {\n    if (Object.hasOwn(textareas, languageId) && !!textareas[languageId]) {\n      return textareas[languageId];\n    }\n\n    textareas[languageId] = this.getSelf().querySelector(\n      `[data-language=\"${languageId}\"] textarea`,\n    );\n\n    return textareas[languageId];\n  };\n\n  /**\n   * Get all input containers holding TinyMCE instances, memoizes. Keyed by ID\n   * @access private\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    this.getSelf()\n      .querySelectorAll('[data-language]')\n      .forEach(el => {\n        inputContainers[el.dataset.language] = el;\n      });\n\n    return inputContainers;\n  };\n\n  /**\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  /**\n   * Creates a TinyMCE ID used to get instances by language\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {String}\n   */\n  this.createTinymceSelector = languageId => {\n    if (languageId == FtConfig.getDefaultLanguage().id) {\n      return defaultLanguageInstanceId;\n    }\n\n    return `${defaultLanguageInstanceId}__${languageId}`;\n  };\n\n  /**\n   * Bind Inputfield required events to a TinyMCE instance\n   * @access private\n   * @param  {String|Int} languageId      ProcessWire language ID\n   * @param  {Object}     tinymceInstance TinyMCE object\n   * @return {Void}\n   */\n  this.bindTinymceEvents = (languageId, tinymceInstance) => {\n    tinymceInstance.on('keyup', e =>\n      this.getTextareaForLanguage(languageId).dispatchEvent(new Event('input')),\n    );\n  };\n\n  /**\n   * Creates an observer that looks for new TinyMCE instances within this Inputfield\n   * @access private\n   * @return {void}\n   */\n  this.initTinymceInstanceOnCreation = (languageId, inputContainer) => {\n    new MutationObserver((mutations, observer) => {\n      for (let mutation of mutations) {\n        let targetEl = mutation.target;\n\n        if (targetEl.dataset.language == languageId) {\n          editorInstances[languageId] = this.getTinymceInstanceForLanguage(languageId);\n          this.bindTinymceEvents(languageId, editorInstances[languageId]);\n\n          if (editorInstances[languageId]) {\n            observer.disconnect();\n          }\n        }\n      }\n    }).observe(inputContainer, {\n      childList: true,\n    });\n  };\n\n  /**\n   * Registers the event listener that watches for content changes\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {void}\n   */\n  this.registerInputEventListener = languageId => {\n    textareas[languageId].addEventListener('input', e => {\n      changedValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId].setModifiedState(this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Initializes FtInputfieldTinyMCE Inputfield\n   * @access private\n   * @param  {Array<Element>} allInputContainers All elements containing TinyMCE fields\n   * @return {Void}\n   */\n  this.initAll = allInputContainers => {\n    // TinyMCE instances are initialzied using a field ID. The default language element contains\n    // an ID substring that can be modified to create a TinyMCE ID string that can be used to get\n    // TinyMCE instances\n    defaultLanguageInstanceId = Object.values(allInputContainers)[0].id.replace('langTab_', '');\n\n    // At runtime/initialization only the TinyMCE instance will load for the default language, others\n    // will be loaded when switched to the tab. Still attempt to get all TinyMCE instances for all\n    // tabs in case they are available\n    for (let languageId in allInputContainers) {\n      const inputContainer = allInputContainers[languageId];\n\n      // Get initial content on page load\n      // Call this first to ensure getValueForLanguage() pulls from the textarea element rather than\n      // attempting to use the TinyMCE API on object instantiation\n      initValues[languageId] = this.getValueForLanguage(languageId);\n\n      languageTabs[languageId] = new FtLanguageTab(inputContainer);\n\n      editorInstances[languageId] = this.getTinymceInstanceForLanguage(languageId);\n\n      textareas[languageId] = this.getTextareaForLanguage(languageId);\n\n      this.registerInputEventListener(languageId);\n\n      // If there was no editor found at initialization, register when created\n      if (!editorInstances[languageId]) {\n        this.initTinymceInstanceOnCreation(languageId, inputContainer);\n      }\n    }\n\n    // Bind TinyMCE event listeners to any TinyMCE input fields found on initialization\n    for (let languageId in editorInstances) {\n      if (Object.hasOwn(editorInstances, languageId) && !!editorInstances[languageId]) {\n        this.bindTinymceEvents(languageId, editorInstances[languageId]);\n      }\n    }\n  };\n\n  /**\n   * Init method executed on object instantiation\n   * - Stores initial field values for each langauge\n   * - Creates/stores an FtLanguageTab object for each language\n   * - Binds an event that detects changes on input\n   * @return {Void}\n   */\n  (() => {\n    const allInputContainers = this.getInputContainers();\n\n    // Set a micro timeout to allow TinyMCE instances to instantiate.\n    // This is especially important when new fields are dynamically added after page load\n    setTimeout(() => {\n      this.initAll(allInputContainers);\n    }, 50);\n\n    activityOverlay = new FtActivityOverlay(this);\n\n    new FtInputfieldTranslateButton(this, allInputContainers);\n  })();\n};\n\nexport { FtIsInputfieldTinyMCE, FtInputfieldTinyMCE };\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfields from './FtInputfields';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Determines if a given inputfield contains an inline TinyMCE instance\n * @param  {Element} inputfield Inputfield (.langTabs) element\n * @return {Bool}\n */\nconst FtIsInputfieldTinyMCEInline = inputfield =>\n  !!inputfield.querySelector('.InputfieldTinyMCEInline');\n\n/**\n * Handles translations for TinyMCE Inputfields\n * @return {object}  Public methods\n */\nconst FtInputfieldTinyMCEInline = function (inputfield) {\n  /**\n   * Contains values for all fields/languages keyed by ProcessWire language ID.\n   * Populated on object instantiation\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when they change keyed by language ID\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * Will contain FtLanguageTab object for each language keyed by language ID\n   * Language ID keys are integers\n   * @type {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all language input containers keyed by language ID\n   * Language ID keys are integers\n   * @type {NodeList}\n   */\n  const inputContainers = {};\n\n  /**\n   * Will contain all the HTML elements that the inline TinyMCE editor stores/modifies content\n   * keyed by language ID\n   * @type {Object}\n   */\n  const contentElements = {};\n\n  /**\n   * Will contain all TinyMCE instances as they become available\n   * @type {Object}\n   */\n  const editorInstances = {};\n\n  /**\n   * Will contain the TinyMCE instance name for the default language.\n   * Used to get the TinyMCE instance\n   * @type {?String}\n   */\n  let defaultLanguageInstanceId = null;\n\n  /**\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlay;\n\n  /*\n   * @access public\n   * @return {Object}\n   */\n  this.getActivityOverlay = () => activityOverlay;\n\n  /**\n   * @access public\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @access public\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * @access public\n   * @param  {Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => {\n    const tinymceInstance = this.getEditorInstanceForLanguage(languageId);\n\n    if (tinymceInstance) {\n      return tinymceInstance.getContent();\n    }\n\n    return this.getContentElementForLanguage(languageId).innerHTML;\n  };\n\n  /**\n   * @access public\n   * @param  {Int}    languageId ProcessWire language ID\n   * @param  {Mixed}  value      Value to insert into field\n   * @return {Bool}              Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const contentElement = this.getContentElementForLanguage(languageId);\n\n    // Click event ensures that TinyMCE has been initialized before inserting content\n    contentElement.click();\n\n    contentElement.innerHTML = value;\n\n    // Required to programmatically trigger the event listener for this field\n    contentElement.dispatchEvent(new Event('input'));\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and Admin listeners work\n    $(contentElement).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * Attempts to get the TinyMCE instance for a given language ID if it exists\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {?TinyMCE}\n   */\n  this.getEditorInstanceForLanguage = languageId => {\n    if (Object.hasOwn(editorInstances, languageId) && !!editorInstances[languageId]) {\n      return editorInstances[languageId];\n    }\n\n    const tinymceSelector = this.createTinymceSelector(languageId);\n\n    editorInstances[languageId] = tinymce.get(tinymceSelector);\n\n    return editorInstances[languageId];\n  };\n\n  /**\n   * Gets the content element that TinyMCE uses to store the field content\n   * Ensures memoization\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Element}\n   */\n  this.getContentElementForLanguage = languageId => {\n    if (Object.hasOwn(contentElements, languageId)) {\n      return contentElements[languageId];\n    }\n\n    contentElements[languageId] =\n      this.getInputContainerForLanguage(languageId).querySelector('.mce-content-body');\n\n    return contentElements[languageId];\n  };\n\n  /**\n   * Gets a specific input container. Memoizes\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Element}\n   */\n  this.getInputContainerForLanguage = languageId => {\n    if (Object.hasOwn(inputContainers, languageId) && !!inputContainers[languageId]) {\n      return inputContainers[languageId];\n    }\n\n    inputContainers[languageId] = this.getSelf().querySelector(`[data-language=\"${languageId}\"]`);\n\n    return inputContainers[languageId];\n  };\n\n  /**\n   * Get all input containers where content is entered, memoizes\n   * @access private\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    this.getSelf()\n      .querySelectorAll('[data-language]')\n      .forEach(el => {\n        inputContainers[el.dataset.language] = el;\n      });\n\n    return inputContainers;\n  };\n\n  /**\n   * Determines if the content for a given langauge has changed. In some instances TinyMCE\n   * inserts unwanted elements into empty fields that will always register content as having been\n   * changed. This includes adding elements to fields that may be returned to their original content\n   * matching content at page load. These \"phantom elements\" must be checked for.\n   * @access private\n   * @param  {Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  /**\n   * Creates a TinyMCE ID used to get instances by language\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {String}\n   */\n  this.createTinymceSelector = languageId => {\n    if (languageId == FtConfig.getDefaultLanguage().id) {\n      return defaultLanguageInstanceId;\n    }\n\n    return `${defaultLanguageInstanceId}__${languageId}`;\n  };\n\n  /**\n   * Creates a MutationObserver that will detect when the innerHTML content has changed for a given\n   * content element. When content is changed, it will mock an 'input' event that an eventListener\n   * can respond to\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerUpdateEvent = languageId => {\n    const contentElement = this.getContentElementForLanguage(languageId);\n\n    new MutationObserver((mutations, observer) => {\n      for (let mutation of mutations) {\n        mutation.target.dispatchEvent(new Event('input'));\n      }\n    }).observe(contentElement, {\n      childList: true,\n    });\n  };\n\n  /**\n   * Register an input observer\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerInputEventListener = languageId => {\n    this.getContentElementForLanguage(languageId).addEventListener('input', e => {\n      changedValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId].setModifiedState(this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Init method executed on object instantiation\n   * - Stores initial field values for each langauge\n   * - Creates/stores an FtLanguageTab object for each language\n   * - Binds an event that detects changes on input\n   * @return {Void}\n   */\n  (() => {\n    if (tinymce === undefined) {\n      console.error('TinyMCE was not found by Fluency, translation unavailable');\n\n      return null;\n    }\n\n    const allInputContainers = this.getInputContainers();\n\n    // TinyMCE instances are initialzied using a field ID. The default language element contains\n    // an ID substring that can be modified to create a TinyMCE ID string that can be used to get\n    // TinyMCE instances\n    defaultLanguageInstanceId = Object.values(allInputContainers)[0].id.replace('langTab_', '');\n\n    for (let languageId in allInputContainers) {\n      let inputContainer = allInputContainers[languageId];\n\n      initValues[languageId] = this.getValueForLanguage(languageId);\n      languageTabs[languageId] = new FtLanguageTab(inputContainer);\n\n      this.registerUpdateEvent(languageId);\n      this.registerInputEventListener(languageId);\n    }\n\n    activityOverlay = new FtActivityOverlay(this);\n\n    new FtInputfieldTranslateButton(this, allInputContainers);\n  })();\n};\n\nexport { FtIsInputfieldTinyMCEInline, FtInputfieldTinyMCEInline };\n","import FtActivityOverlay from '../ui/FtActivityOverlay';\nimport FtConfig from '../global/FtConfig';\nimport FtInputfields from './FtInputfields';\nimport FtInputfieldTranslateButton from '../ui/FtInputfieldTranslateButton';\nimport FtLanguageTab from '../ui/FtLanguageTab';\n\n/**\n * Handles IO operations for a multilanguage InputfieldPageName element\n * The InputfieldPageName element has special considerations compared to other fields as they do not\n * have the same markup structure.\n * Some actions are internalized here, such as\n * @param {Element} inputfield The Inputfield .InputfieldPageName container\n */\nconst FtInputfieldPageName = function (inputfield) {\n  /**\n   * Page-load values for all fields/languages\n   * Populated on object instantiation\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const initValues = {};\n\n  /**\n   * Will contain new values for fields/languages when content is modified\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const changedValues = {};\n\n  /**\n   * FtLanguageTab objects for each language\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const languageTabs = {};\n\n  /**\n   * Will contain all elements containing language inputs\n   * @property {String} ProcessWire Language ID\n   * @type {NodeList}\n   */\n  const inputContainers = {};\n\n  /**\n   * Text input fields\n   * @property {String} ProcessWire Language ID\n   * @type {Object}\n   */\n  const languageFields = {};\n\n  let contentModifiedClass = new FtLanguageTab().getContentModifiedClass();\n\n  /**\n   * Activity overlays by language IDs\n   * @access public\n   * @type {Object}\n   */\n  let activityOverlays = {};\n\n  /*\n   * Return null to signal that the overlay should be by language ID\n   *\n   * @access public\n   * @return {Object|Null}\n   */\n  this.getActivityOverlay = languageId => {\n    if (!languageId) {\n      return null;\n    }\n\n    return activityOverlays[languageId].getActivityOverlay();\n  };\n\n  /**\n   * @access public\n   * @return {Element} Inputfield element passed to this object on creation\n   */\n  this.getSelf = () => inputfield;\n\n  /**\n   * @access public\n   * @return {Mixed}\n   */\n  this.getValueForDefaultLanguage = () =>\n    this.getValueForLanguage(FtConfig.getDefaultLanguage().id);\n\n  /**\n   * @access public\n   * @param  {String|Int}   languageId ProcessWire language ID\n   * @return {Mixed}\n   */\n  this.getValueForLanguage = languageId => this.getFieldForLanguage(languageId).value;\n\n  /**\n   * @access public\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @param  {Mixed}      value      Value to insert into field\n   * @return {Bool}                  Content is different from page load value\n   */\n  this.setValueForLanguage = (languageId, value) => {\n    const field = this.getFieldForLanguage(languageId);\n\n    FtInputfields.updateValue(field, value);\n\n    // Required to programmatically trigger the event listener for this field\n    field.dispatchEvent(new Event('keyup'));\n\n    // Vanilla JS events are not visible to jQuery and vice-versa. Trigger this so that other\n    // modules and Admin listeners work\n    $(field).trigger('change');\n\n    return this.contentHasChanged(languageId);\n  };\n\n  /**\n   * @access private\n   * @param  {String|Int}  languageId ProcessWire language ID\n   * @return {Element}                Text field\n   */\n  this.getFieldForLanguage = languageId => {\n    if (Object.hasOwn(languageFields, languageId) && !!languageFields[languageId]) {\n      return languageFields[languageId];\n    }\n\n    languageFields[languageId] =\n      this.getInputContainerForLanguage(languageId).querySelector('input');\n\n    return languageFields[languageId];\n  };\n\n  /**\n   * Gets a specific input container\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Element}\n   */\n  this.getInputContainerForLanguage = languageId => {\n    if (!Object.hasOwn(inputContainers, languageId) && !inputContainers[languageId]) {\n      this.getInputContainers();\n    }\n\n    return inputContainers[languageId];\n  };\n\n  /**\n   * Get all input containers where content is entered, memoizes\n   * @access private\n   * @return {Object} All languages keyed by (int) language ID\n   */\n  this.getInputContainers = () => {\n    // Page name fields require querying the child input and determining the language by analyzing\n    // the name attribute of the text input itself\n    this.getSelf()\n      .querySelectorAll('.LanguageSupport')\n      .forEach(el => {\n        // The default language input has no language ID, it's the default language, so fallback\n        const languageId =\n          el.querySelector('input[type=text]').name.replace('_pw_page_name', '') ||\n          FtConfig.getDefaultLanguage().id;\n\n        inputContainers[languageId] = el;\n      });\n\n    return inputContainers;\n  };\n\n  /**\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Bool}\n   */\n  this.contentHasChanged = languageId =>\n    Object.hasOwn(changedValues, languageId) &&\n    changedValues[languageId] !== initValues[languageId];\n\n  this.setModifiedState = (languageId, contentHasChanged) => {\n    const inputContainer = this.getInputContainerForLanguage(languageId);\n\n    if (contentHasChanged) {\n      inputContainer.classList.add(contentModifiedClass);\n    }\n\n    if (!contentHasChanged) {\n      inputContainer.classList.remove(contentModifiedClass);\n    }\n  };\n\n  /**\n   * Registers the event listener that watches for changes\n   * @access private\n   * @param  {String|Int} languageId ProcessWire language ID\n   * @return {Void}\n   */\n  this.registerInputEventListener = languageId => {\n    this.getFieldForLanguage(languageId).addEventListener('keyup', e => {\n      changedValues[languageId] = e.target.value;\n      this.setModifiedState(languageId, this.contentHasChanged(languageId));\n    });\n  };\n\n  /**\n   * Init method executed on object instantiation\n   * - Stores initial field values for each langauge\n   * - Creates/stores an FtLanguageTab object for each language\n   * - Binds an event that detects changes on input\n   * @return {Void}\n   */\n  (() => {\n    const allInputContainers = this.getInputContainers();\n\n    for (let languageId in allInputContainers) {\n      let inputContainer = allInputContainers[languageId];\n\n      initValues[languageId] = this.getValueForLanguage(languageId);\n      activityOverlays[languageId] = new createActivityOverlay(inputContainer);\n\n      this.registerInputEventListener(languageId);\n    }\n\n    new FtInputfieldTranslateButton(this, allInputContainers, true);\n  })();\n};\n\nconst createActivityOverlay = function (languageInput) {\n  let activityOverlay;\n\n  this.getSelf = () => languageInput;\n\n  this.getActivityOverlay = () => activityOverlay;\n\n  (() => {\n    activityOverlay = new FtActivityOverlay(this);\n  })();\n};\n\nexport default FtInputfieldPageName;\n","/**\n * Handles modifying the Fluency menu item\n * @return {object} Public methods\n */\nconst FtAdminMenu = (function () {\n  /**\n   * Initializes module\n   * @return {void}\n   */\n  const init = () => {\n    convertFtAdminMenuToModal();\n  };\n\n  /**\n   * Finds and converts the Translation admin menu item to open in a modal\n   * rather than navigating to the page.\n   * @return {void}\n   */\n  const convertFtAdminMenuToModal = () => {\n    const adminNavItems = document.querySelectorAll('.pw-masthead .pw-primary-nav > li > a'),\n      urlParams = new URLSearchParams(window.location.search);\n\n    // We don't want to modify this menu item if we are on the Fluency config page\n    // because the modal behavior is not available\n    if (urlParams.get('name') === 'Fluency') {\n      return false;\n    }\n\n    adminNavItems.forEach((el, i) => {\n      let hrefSegments = el.href.split('/').filter(Boolean);\n\n      if (hrefSegments[hrefSegments.length - 1].includes('fluency')) {\n        el.href = el.href + '?modal=1';\n        el.classList.add('pw-modal-large');\n        el.classList.add('pw-modal');\n      }\n    });\n  };\n\n  return {\n    init: init,\n  };\n})();\n\nexport default FtAdminMenu;\n"],"names":[],"version":3,"file":"fluency.js.map","sourceRoot":"../../../"}