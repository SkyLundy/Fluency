!function i(n,s,r){function l(t,e){if(!s[t]){if(!n[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(o)return o(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}a=s[t]={exports:{}},n[t][0].call(a.exports,function(e){return l(n[t][1][e]||e)},a,a.exports,i,n,s,r)}return s[t].exports}for(var o="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({1:[function(e,t,a){"use strict";var i=r(e("./ui/FtAdminMenu")),n=r(e("./ui/FtTranslationCacheControlButtons")),s=r(e("./ui/FtTranslatableLanguagesCacheControlButtons"));function r(e){return e&&e.__esModule?e:{default:e}}window.addEventListener("load",e=>{i.default.init(),n.default.init(),s.default.init()})},{"./ui/FtAdminMenu":5,"./ui/FtTranslatableLanguagesCacheControlButtons":6,"./ui/FtTranslationCacheControlButtons":7}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=(e=e("./FtConfig"))&&e.__esModule?e:{default:e};e=function(){const a=c.default.getUiTextFor("errors");const r=e=>{var t={"X-Requested-With":"XMLHttpRequest"};return"GET"===e&&(t.Accept="application/json"),"POST"===e&&(t["Content-Type"]="application/json"),t},e=(e,t)=>fetch(e,{method:"GET",cache:"no-store",headers:r("GET")}).then(l).then(t).catch(o),t=(e,t)=>fetch(e,{method:"DELETE",headers:r("GET")}).then(l).then(t).catch(o),l=e=>{if(204===e.status)return e;if(e.ok)return e.json();throw new Error},o=e=>{console.error("[Fluency module API failure]",e.message);var t={error:null,message:null};return"NetworkError"===e.message.split(" ")[0]?(t.error="FLUENCY_CLIENT_DISCONNECTED",t.message=a.FLUENCY_CLIENT_DISCONNECTED):(t.error="UNKNOWN_ERROR",t.message=a.UNKNOWN_ERROR),t};return{deleteTranslatableLanguagesCache:()=>t(c.default.getApiEndpointFor("translatableLanguagesCache"),e=>e),deleteTranslationCache:()=>t(c.default.getApiEndpointFor("translationCache"),e=>e),getAvailableLanguages:()=>e(c.default.getApiEndpointFor("languages"),e=>e),getTranslation:function(e,t,a){var i,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return i=c.default.getApiEndpointFor("translation"),e={sourceLanguage:e,targetLanguage:t,content:a,options:n,caching:s},t=e=>e,fetch(i,{method:"POST",cache:"no-store",headers:r,body:JSON.stringify(e)}).then(l).then(t).catch(o)},getUsage:()=>e(c.default.getApiEndpointFor("usage"),e=>e)}}();a.default=e},{"./FtConfig":3}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=function(){const e=ProcessWire.config.fluency;var t=e.localization;const a={activityOverlay:t.activityOverlay,languageSelect:t.languageSelect,inputfieldTranslateButtons:t.inputfieldTranslateButtons,standaloneTranslator:t.standaloneTranslator,usage:t.usage,errors:t.errors},i={languages:e.apiEndpoints.languages,translatableLanguagesCache:e.apiEndpoints.translatableLanguagesCache,test:e.apiEndpoints.test,translation:e.apiEndpoints.translation,translationCache:e.apiEndpoints.translationCache,usage:e.apiEndpoints.usage},n=e.configuredLanguages,s=e.unconfiguredLanguages;const r=()=>n;const l=()=>s;const o=()=>e.engine;return{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:e=>i[e],getConfiguredLanguages:r,getDefaultLanguage:()=>n.reduce((e,t)=>t.default?t:e,null),getEngineInfo:o,getEngineProvidesUsageData:()=>o().providesUsageData,getInputfieldTranslationAction:()=>e.interface.inputfieldTranslationAction,getLanguageCount:()=>n.length+s.length,getLanguageForId:a=>(a=parseInt(a,10),n.reduce((e,t)=>t.id===a?t:e,null)),getUiTextFor:e=>a[e],getUnconfiguredLanguages:l,languageIsTranslatable:e=>!s.includes(parseInt(e,10)),moduleShouldInitialize:()=>1<n.length}}();a.default=i},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(e=e("../global/FtConfig"))&&e.__esModule?e:{default:e};a.default=function(e){var a=this;let i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"translating";const n={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",success:"success",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};let t,s,r;this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5e3;a.setMessageContent(e),a.setActivityInactive(),a.setMessageActive(),a.setOverlayVisible(),a.hide(t)},this.flashSuccess=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;a.setSuccessActive(),a.setFlashActive(),a.showMessage(e,t)},this.flashError=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;a.setFlashActive(),a.setErrorActive(),a.showMessage(e,t)},this.showError=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:7e3;a.setErrorActive(),a.showMessage(e,t)},this.hide=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;setTimeout(()=>{a.setOverlayInvisible()},e),setTimeout(()=>{a.setActivityInactive(),a.setMessageInactive(),a.setErrorInactive(),a.setFlashInactive(),a.setMessageContent("")},e+500)},this.setActivityActive=()=>{t.classList.add(n.activity)},this.setActivityInactive=()=>{t.classList.remove(n.activity)},this.setMessageActive=()=>{t.classList.add(n.message)},this.setMessageInactive=()=>{t.classList.remove(n.message)},this.setMessageContent=e=>{s.innerText=e},this.setFlashActive=e=>{t.classList.add(n.flash)},this.setFlashInactive=e=>{t.classList.remove(n.flash)},this.setSuccessActive=()=>{t.classList.add(n.success)},this.setSuccessInactive=()=>{t.classList.remove(n.success)},this.setErrorActive=()=>{t.classList.add(n.error)},this.setErrorInactive=()=>{t.classList.remove(n.error)},this.setOverlayVisible=()=>{t.classList.add(n.visible)},this.setOverlayInvisible=()=>{t.classList.remove(n.visible)},this.create=()=>(t=this.buildOverlayEl(),r=this.buildActivityEl(),s=this.buildMessageEl(),t.appendChild(r),t.appendChild(s),t),this.buildOverlayEl=()=>{var e=document.createElement("div");return e.setAttribute("class",n.overlay),e},this.buildActivityEl=()=>{var e=l.default.getUiTextFor("activityOverlay")[i];let t=document.createElement("div");t.setAttribute("class",n.activityAnimationContainer),t=e.animated.reduce((e,t)=>{var a=document.createElement("span");return a.setAttribute("class",n.activityAnimationItem),a.innerHTML=t,e.appendChild(a),e},t);var a=document.createElement("div");return a.setAttribute("class",n.activityStaticText),a.innerText=e.static,(r=document.createElement("div")).setAttribute("class",n.activityContainer),r.appendChild(a),r.appendChild(t),r},this.buildMessageEl=()=>((s=document.createElement("div")).setAttribute("class",n.messageContainer),s),e=e.getSelf(),t=this.create(),e.classList.add(n.parent),e.appendChild(t)}},{"../global/FtConfig":3}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default={init:()=>{{var e=document.querySelectorAll(".pw-masthead .pw-primary-nav > li > a"),t;"Fluency"!==new URLSearchParams(window.location.search).get("name")&&e.forEach((e,t)=>{var a=e.href.split("/").filter(Boolean);a[a.length-1].includes("fluency")&&(e.href=e.href+"?modal=1",e.classList.add("pw-modal-large"),e.classList.add("pw-modal"))})}}}},{}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=s(e("../global/Fluency")),n=s(e("./FtActivityOverlay"));function s(e){return e&&e.__esModule?e:{default:e}}const r=function(e){let t=null,a=null;this.getSelf=()=>t,this.bindEventListener=()=>{const t=this.getSelf().querySelector(".notes");e.addEventListener("click",e=>{e.preventDefault(),a.showActivity(),i.default.deleteTranslatableLanguagesCache().then(e=>{e.error?a.showError(e.detail):(t&&(t.textContent="There are no languages cached"),a.hide())})})},t=e.closest(".Inputfields").parentElement,a=new n.default(this,"clearingCache"),this.bindEventListener()};a.default={init:()=>{var e=[...document.querySelectorAll(".js-ft-clear-translatable-languages-cache")];if(e.length)for(var t of e)new r(t)}}},{"../global/Fluency":2,"./FtActivityOverlay":4}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=s(e("../global/Fluency")),n=s(e("./FtActivityOverlay"));function s(e){return e&&e.__esModule?e:{default:e}}const r=function(e){let t=null,a=null;this.getSelf=()=>t,this.bindEventListener=()=>{const t=this.getSelf().querySelector(".notes");e.addEventListener("click",e=>{e.preventDefault(),a.showActivity(),i.default.deleteTranslationCache().then(e=>{e.error?a.showError(e.detail):(t&&(t.textContent=t.textContent.split(": ")[0]+": 0"),a.hide())})})},t=e.closest(".Inputfields").parentElement,a=new n.default(this,"clearingCache"),this.bindEventListener()};a.default={init:()=>{var e=[...document.querySelectorAll(".js-ft-clear-translation-cache")];if(e.length)for(var t of e)new r(t)}}},{"../global/Fluency":2,"./FtActivityOverlay":4}]},{},[1]);
//# sourceMappingURL=maps/fluency_module_config.bundle.js.map
