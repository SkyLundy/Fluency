!function n(i,s,r){function l(e,t){if(!s[e]){if(!i[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(o)return o(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}a=s[e]={exports:{}},i[e][0].call(a.exports,function(t){return l(i[e][1][t]||t)},a,a.exports,n,i,s,r)}return s[e].exports}for(var o="function"==typeof require&&require,t=0;t<r.length;t++)l(r[t]);return l}({1:[function(t,e,a){"use strict";var n=r(t("./ui/FtAdminMenu")),i=r(t("./ui/FtTranslationCacheControlButtons")),s=r(t("./ui/FtTranslatableLanguagesCacheControlButtons"));function r(t){return t&&t.__esModule?t:{default:t}}window.addEventListener("load",t=>{n.default.init(),i.default.init(),s.default.init()})},{"./ui/FtAdminMenu":5,"./ui/FtTranslatableLanguagesCacheControlButtons":6,"./ui/FtTranslationCacheControlButtons":7}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=(t=t("./FtConfig"))&&t.__esModule?t:{default:t};t=function(){const a=c.default.getUiTextFor("errors");const r=t=>{var e={"X-Requested-With":"XMLHttpRequest"};return"GET"===t&&(e.Accept="application/json"),"POST"===t&&(e["Content-Type"]="application/json"),e},t=(t,e)=>fetch(t,{method:"GET",cache:"no-store",headers:r("GET")}).then(l).then(e).catch(o),e=(t,e)=>fetch(t,{method:"DELETE",headers:r("GET")}).then(l).then(e).catch(o),l=t=>{if(204===t.status)return t;if(t.ok)return t.json();throw new Error},o=t=>{console.error("[Fluency module API failure]",t.message);var e={error:null,message:null};return"NetworkError"===t.message.split(" ")[0]?(e.error="FLUENCY_CLIENT_DISCONNECTED",e.message=a.FLUENCY_CLIENT_DISCONNECTED):(e.error="UNKNOWN_ERROR",e.message=a.UNKNOWN_ERROR),e};return{deleteTranslatableLanguagesCache:()=>e(c.default.getApiEndpointFor("translatableLanguagesCache"),t=>t),deleteTranslationCache:()=>e(c.default.getApiEndpointFor("translationCache"),t=>t),getAvailableLanguages:()=>t(c.default.getApiEndpointFor("languages"),t=>t),getTranslation:(t,e,a,n=[],i=null)=>{return s=c.default.getApiEndpointFor("translation"),t={sourceLanguage:t,targetLanguage:e,content:a,options:n,caching:i},e=t=>t,fetch(s,{method:"POST",cache:"no-store",headers:r,body:JSON.stringify(t)}).then(l).then(e).catch(o);var s},getUsage:()=>t(c.default.getApiEndpointFor("usage"),t=>t)}}();a.default=t},{"./FtConfig":3}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(){const t=ProcessWire.config.fluency;var e=t.localization;const a={translateButton:{container:"ft-translate-button-container",button:"ft-translate-button"},languageTranslator:{container:"Inputfield InputfieldHeaderHidden",content:"InputfieldContent ft-language-translator-button-content",translateButton:"ft-translate-all-button",sourceLanguageSelect:"uk-select ft-source-language-select",sourceLanguageSelectLabel:"ft-source-language-select-label"},statusPlaceholder:{container:"ft-translation-status-container",label:"ft-translation-status"},icon:"ft-icon"},n={activityOverlay:e.activityOverlay,languageSelect:e.languageSelect,inputfieldTranslateButtons:e.inputfieldTranslateButtons,standaloneTranslator:e.standaloneTranslator,usage:e.usage,errors:e.errors,languageTranslator:e.languageTranslator},i={languages:t.apiEndpoints.languages,translatableLanguagesCache:t.apiEndpoints.translatableLanguagesCache,test:t.apiEndpoints.test,translation:t.apiEndpoints.translation,translationCache:t.apiEndpoints.translationCache,usage:t.apiEndpoints.usage},s=t.configuredLanguages,r=t.unconfiguredLanguages;const l=()=>s;const o=()=>r;const c=()=>t.engine;return{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:t=>i[t],getConfiguredLanguages:l,getDefaultLanguage:()=>s.reduce((t,e)=>e.default?e:t,null),getElementClassesFor:t=>a[t],getEngineInfo:c,getEngineProvidesUsageData:()=>c().providesUsageData,getLanguageCount:()=>s.length+r.length,getLanguageForId:a=>(a=parseInt(a,10),s.reduce((t,e)=>e.id===a?e:t,null)),getTranslationAction:()=>t.interface.inputfieldTranslationAction,getTranslationDisabledFieldAttribute:()=>`[${t.interface.translationDisabledFieldAttr}]`,getUiTextFor:t=>n[t],getUnconfiguredLanguages:o,languageIsTranslatable:t=>!r.includes(parseInt(t,10)),moduleShouldInitialize:()=>1<s.length,translationActionTypes:{each:"translate_each_language",all:"translate_to_all_languages",both:"both"}}}();a.default=n},{}],4:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=(t=t("../global/FtConfig"))&&t.__esModule?t:{default:t};a.default=function(t,i="translating"){const n={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",success:"success",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};let e,a,s;this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=(t,e=5e3)=>{this.setMessageContent(t),this.setActivityInactive(),this.setMessageActive(),this.setOverlayVisible(),this.hide(e)},this.flashSuccess=(t,e=500)=>{this.setSuccessActive(),this.setFlashActive(),this.showMessage(t,e)},this.flashError=(t,e=500)=>{this.setFlashActive(),this.setErrorActive(),this.showMessage(t,e)},this.showError=(t,e=7e3)=>{this.setErrorActive(),this.showMessage(t,e)},this.hide=(t=0)=>{setTimeout(()=>{this.setOverlayInvisible()},t),setTimeout(()=>{this.setActivityInactive(),this.setMessageInactive(),this.setErrorInactive(),this.setFlashInactive(),this.setMessageContent("")},t+500)},this.setActivityActive=()=>{e.classList.add(n.activity)},this.setActivityInactive=()=>{e.classList.remove(n.activity)},this.setMessageActive=()=>{e.classList.add(n.message)},this.setMessageInactive=()=>{e.classList.remove(n.message)},this.setMessageContent=t=>{a.innerText=t},this.setFlashActive=t=>{e.classList.add(n.flash)},this.setFlashInactive=t=>{e.classList.remove(n.flash)},this.setSuccessActive=()=>{e.classList.add(n.success)},this.setSuccessInactive=()=>{e.classList.remove(n.success)},this.setErrorActive=()=>{e.classList.add(n.error)},this.setErrorInactive=()=>{e.classList.remove(n.error)},this.setOverlayVisible=()=>{e.classList.add(n.visible)},this.setOverlayInvisible=()=>{e.classList.remove(n.visible)},this.create=()=>(e=this.buildOverlayEl(),s=this.buildActivityEl(),a=this.buildMessageEl(),e.appendChild(s),e.appendChild(a),e),this.buildOverlayEl=()=>{var t=document.createElement("div");return t.setAttribute("class",n.overlay),t},this.buildActivityEl=()=>{var t=this.getActivityTexts();let e=document.createElement("div");e.setAttribute("class",n.activityAnimationContainer),e=t.animated.reduce((t,e)=>{var a=document.createElement("span");return a.setAttribute("class",n.activityAnimationItem),a.innerHTML=e,t.appendChild(a),t},e);var a=document.createElement("div");return a.setAttribute("class",n.activityStaticText),a.innerText=t.static,(s=document.createElement("div")).setAttribute("class",n.activityContainer),s.appendChild(a),s.appendChild(e),s},this.getActivityTexts=()=>{var t=r.default.getUiTextFor("activityOverlay")[i],e=t.animated;for(let t=e.length-1;0<t;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return t.animated=e,t},this.buildMessageEl=()=>((a=document.createElement("div")).setAttribute("class",n.messageContainer),a),t=t.getSelf(),e=this.create(),t.classList.add(n.parent),t.appendChild(e)}},{"../global/FtConfig":3}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default={init:()=>{{var t=document.querySelectorAll(".pw-masthead .pw-primary-nav > li > a"),e;"Fluency"!==new URLSearchParams(window.location.search).get("name")&&t.forEach((t,e)=>{var a=t.href.split("/").filter(Boolean);a[a.length-1].includes("fluency")&&(t.href=t.href+"?modal=1",t.classList.add("pw-modal-large"),t.classList.add("pw-modal"))})}}}},{}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=s(t("../global/Fluency")),i=s(t("./FtActivityOverlay"));function s(t){return t&&t.__esModule?t:{default:t}}const r=function(t){let e=null,a=null;this.getSelf=()=>e,this.bindEventListener=()=>{const e=this.getSelf().querySelector(".notes");t.addEventListener("click",t=>{t.preventDefault(),a.showActivity(),n.default.deleteTranslatableLanguagesCache().then(t=>{t.error?a.showError(t.detail):(e&&(e.textContent="There are no languages cached"),a.hide())})})},e=t.closest(".Inputfields").parentElement,a=new i.default(this,"clearingCache"),this.bindEventListener()};a.default={init:()=>{var t=[...document.querySelectorAll(".js-ft-clear-translatable-languages-cache")];if(t.length)for(var e of t)new r(e)}}},{"../global/Fluency":2,"./FtActivityOverlay":4}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=s(t("../global/Fluency")),i=s(t("./FtActivityOverlay"));function s(t){return t&&t.__esModule?t:{default:t}}const r=function(t){let e=null,a=null;this.getSelf=()=>e,this.bindEventListener=()=>{const e=this.getSelf().querySelector(".notes");t.addEventListener("click",t=>{t.preventDefault(),a.showActivity(),n.default.deleteTranslationCache().then(t=>{t.error?a.showError(t.detail):(e&&(e.textContent=e.textContent.split(": ")[0]+": 0"),a.hide())})})},e=t.closest(".Inputfields").parentElement,a=new i.default(this,"clearingCache"),this.bindEventListener()};a.default={init:()=>{var t=[...document.querySelectorAll(".js-ft-clear-translation-cache")];if(t.length)for(var e of t)new r(e)}}},{"../global/Fluency":2,"./FtActivityOverlay":4}]},{},[1]);
//# sourceMappingURL=maps/fluency_module_config.bundle.js.map
