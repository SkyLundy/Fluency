!function n(i,s,r){function l(e,t){if(!s[e]){if(!i[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(o)return o(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}a=s[e]={exports:{}},i[e][0].call(a.exports,function(t){return l(i[e][1][t]||t)},a,a.exports,n,i,s,r)}return s[e].exports}for(var o="function"==typeof require&&require,t=0;t<r.length;t++)l(r[t]);return l}({1:[function(t,e,a){"use strict";var n=s(t("./inputfields/FtLanguageTranslatorInputfields")),i=s(t("./global/FtConfig"));function s(t){return t&&t.__esModule?t:{default:t}}window.addEventListener("load",t=>{i.default.moduleShouldInitialize()&&n.default.init()})},{"./global/FtConfig":3,"./inputfields/FtLanguageTranslatorInputfields":5}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=(t=t("./FtConfig"))&&t.__esModule?t:{default:t};t=function(){const a=u.default.getUiTextFor("errors");const r=t=>{var e={"X-Requested-With":"XMLHttpRequest"};return"GET"===t&&(e.Accept="application/json"),"POST"===t&&(e["Content-Type"]="application/json"),e},t=(t,e)=>fetch(t,{method:"GET",cache:"no-store",headers:r("GET")}).then(l).then(e).catch(o),e=(t,e)=>fetch(t,{method:"DELETE",headers:r("GET")}).then(l).then(e).catch(o),l=t=>{if(204===t.status)return t;if(t.ok)return t.json();throw new Error},o=t=>{console.error("[Fluency module API failure]",t.message);var e={error:null,message:null};return"NetworkError"===t.message.split(" ")[0]?(e.error="FLUENCY_CLIENT_DISCONNECTED",e.message=a.FLUENCY_CLIENT_DISCONNECTED):(e.error="UNKNOWN_ERROR",e.message=a.UNKNOWN_ERROR),e};return{deleteTranslatableLanguagesCache:()=>e(u.default.getApiEndpointFor("translatableLanguagesCache"),t=>t),deleteTranslationCache:()=>e(u.default.getApiEndpointFor("translationCache"),t=>t),getAvailableLanguages:()=>t(u.default.getApiEndpointFor("languages"),t=>t),getTranslation:function(t,e,a){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return n=u.default.getApiEndpointFor("translation"),t={sourceLanguage:t,targetLanguage:e,content:a,options:i,caching:s},e=t=>t,fetch(n,{method:"POST",cache:"no-store",headers:r,body:JSON.stringify(t)}).then(l).then(e).catch(o)},getUsage:()=>t(u.default.getApiEndpointFor("usage"),t=>t)}}();a.default=t},{"./FtConfig":3}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(){const t=ProcessWire.config.fluency;var e=t.localization;const a={activityOverlay:e.activityOverlay,languageSelect:e.languageSelect,inputfieldTranslateButtons:e.inputfieldTranslateButtons,standaloneTranslator:e.standaloneTranslator,usage:e.usage,errors:e.errors},n={languages:t.apiEndpoints.languages,translatableLanguagesCache:t.apiEndpoints.translatableLanguagesCache,test:t.apiEndpoints.test,translation:t.apiEndpoints.translation,translationCache:t.apiEndpoints.translationCache,usage:t.apiEndpoints.usage},i=t.configuredLanguages,s=t.unconfiguredLanguages;const r=()=>i;const l=()=>s;const o=()=>t.engine;return{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:t=>n[t],getConfiguredLanguages:r,getDefaultLanguage:()=>i.reduce((t,e)=>e.default?e:t,null),getEngineInfo:o,getEngineProvidesUsageData:()=>o().providesUsageData,getLanguageCount:()=>i.length+s.length,getLanguageForId:a=>(a=parseInt(a,10),i.reduce((t,e)=>e.id===a?e:t,null)),getUiTextFor:t=>a[t],getUnconfiguredLanguages:l,languageIsTranslatable:t=>!s.includes(parseInt(t,10)),moduleShouldInitialize:()=>1<i.length}}();a.default=n},{}],4:[function(t,e,a){"use strict";function n(){var t=new URLSearchParams(window.location.search);return t?parseInt(t.get("id")):null}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default={tagElement:function(t,e){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=document.createElement("div");n.setAttribute("class","ft-element-tag"),a&&(e+=" | "+function(){return[...Array(0<arguments.length&&void 0!==arguments[0]?arguments[0]:5)].map(()=>Math.random().toString(36)[2]).join("")}()),n.innerText=e,t.appendChild(n)},getPageId:n,pageIdIs:t=>n()===t}},{}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.LanguageTranslatorInputfield=a.FtInputfieldText=void 0;var c=n(t("../ui/FtActivityOverlay")),r=n(t("../ui/FtUiElements")),d=n(t("../global/FtConfig")),l=n(t("../global/Fluency"));function n(t){return t&&t.__esModule?t:{default:t}}t={init:()=>{var t=document.querySelectorAll(".InputfieldContent");t&&[...t].forEach(t=>{t.querySelector("input.translatable")&&new i(t)})}};const i=function(a){const n=d.default.getUiTextFor("inputfieldTranslateButtons");let e,i=a.querySelector(".description").innerText,s=a.querySelector("input");this.getSelf=()=>a,this.getActivityOverlay=()=>e,this.addTranslateButton=()=>{var{button:t,container:e}=r.default.createTranslateButton(n.translate);this.bindTranslateButton(t),a.appendChild(e)},this.bindTranslateButton=t=>{t.addEventListener("click",t=>{t.preventDefault(),this.translateContent()})},this.translateContent=()=>{var t=new URLSearchParams(window.location.search),t=parseInt(t.get("language_id"));e.showActivity(),l.default.getTranslation(d.default.getDefaultLanguage().engineLanguage.sourceCode,d.default.getLanguageForId(t).engineLanguage.targetCode,i).then(t=>{t.error?e.showError(t.message):(s.value=t.translations[0],e.hide())})},e=new c.default(this),this.addTranslateButton()};a.LanguageTranslatorInputfield=i;a.default=t;a.FtInputfieldText=function(e){const a={},n={},i={},s={},r={};let t;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(d.default.getDefaultLanguage().id),this.getValueForLanguage=t=>this.getFieldForLanguage(t).value,this.setValueForLanguage=(t,e)=>{var a=this.getFieldForLanguage(t);return FtInputfields.updateValue(a,e),a.dispatchEvent(new Event("input")),this.contentHasChanged(t)},this.getFieldForLanguage=t=>(Object.hasOwn(r,t)&&r[t]||(r[t]=this.getInputContainerForLanguage(t).querySelector("input")),r[t]),this.getInputContainerForLanguage=t=>(Object.hasOwn(s,t)&&s[t]||(s[t]=e.querySelector(`[data-language="${t}"]`)),s[t]),this.getInputContainers=()=>(e.querySelectorAll("[data-language]").forEach(t=>s[t.dataset.language]=t),s),this.contentHasChanged=t=>Object.hasOwn(n,t)&&n[t]!==a[t],this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("input",t=>{n[e]=t.target.value,i[e].setModifiedState(this.contentHasChanged(e))})};var l,o=this.getInputContainers();for(l in o){var u=o[l];a[l]=this.getValueForLanguage(l),i[l]=new FtLanguageTab(u),this.registerInputEventListener(l)}t=new c.default(this),new FtInputfieldTranslateButton(this,o)}},{"../global/Fluency":2,"../global/FtConfig":3,"../ui/FtActivityOverlay":6,"../ui/FtUiElements":7}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=(t=t("../global/FtConfig"))&&t.__esModule?t:{default:t};a.default=function(t){var a=this;let n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"translating";const i={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",success:"success",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};let e,s,r;this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5e3;a.setMessageContent(t),a.setActivityInactive(),a.setMessageActive(),a.setOverlayVisible(),a.hide(e)},this.flashSuccess=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;a.setSuccessActive(),a.setFlashActive(),a.showMessage(t,e)},this.flashError=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;a.setFlashActive(),a.setErrorActive(),a.showMessage(t,e)},this.showError=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:7e3;a.setErrorActive(),a.showMessage(t,e)},this.hide=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;setTimeout(()=>{a.setOverlayInvisible()},t),setTimeout(()=>{a.setActivityInactive(),a.setMessageInactive(),a.setErrorInactive(),a.setFlashInactive(),a.setMessageContent("")},t+500)},this.setActivityActive=()=>{e.classList.add(i.activity)},this.setActivityInactive=()=>{e.classList.remove(i.activity)},this.setMessageActive=()=>{e.classList.add(i.message)},this.setMessageInactive=()=>{e.classList.remove(i.message)},this.setMessageContent=t=>{s.innerText=t},this.setFlashActive=t=>{e.classList.add(i.flash)},this.setFlashInactive=t=>{e.classList.remove(i.flash)},this.setSuccessActive=()=>{e.classList.add(i.success)},this.setSuccessInactive=()=>{e.classList.remove(i.success)},this.setErrorActive=()=>{e.classList.add(i.error)},this.setErrorInactive=()=>{e.classList.remove(i.error)},this.setOverlayVisible=()=>{e.classList.add(i.visible)},this.setOverlayInvisible=()=>{e.classList.remove(i.visible)},this.create=()=>(e=this.buildOverlayEl(),r=this.buildActivityEl(),s=this.buildMessageEl(),e.appendChild(r),e.appendChild(s),e),this.buildOverlayEl=()=>{var t=document.createElement("div");return t.setAttribute("class",i.overlay),t},this.buildActivityEl=()=>{var t=l.default.getUiTextFor("activityOverlay")[n];let e=document.createElement("div");e.setAttribute("class",i.activityAnimationContainer),e=t.animated.reduce((t,e)=>{var a=document.createElement("span");return a.setAttribute("class",i.activityAnimationItem),a.innerHTML=e,t.appendChild(a),t},e);var a=document.createElement("div");return a.setAttribute("class",i.activityStaticText),a.innerText=t.static,(r=document.createElement("div")).setAttribute("class",i.activityContainer),r.appendChild(a),r.appendChild(e),r},this.buildMessageEl=()=>((s=document.createElement("div")).setAttribute("class",i.messageContainer),s),t=t.getSelf(),e=this.create(),t.classList.add(i.parent),t.appendChild(e)}},{"../global/FtConfig":3}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(t("../global/FtConfig"));n(t("../global/FtTools")),n(t("../global/Fluency"));function n(t){return t&&t.__esModule?t:{default:t}}t=function(){const a={translateButton:{container:"ft-translate-button-container",button:"ft-translate-button"},statusPlaceholder:{container:"ft-translation-status-container",label:"ft-translation-status"},icon:"ft-icon"},e=i.default.getUiTextFor("inputfieldTranslateButtons"),n=()=>{var t=document.createElement("i");return t.setAttribute("class",a.icon+" fa fa-language"),t.setAttribute("title",e.poweredBy),t};return{createStatusElement:t=>{var e=document.createElement("span"),t=(e.setAttribute("class",a.statusPlaceholder.label),e.innerText=t,document.createElement("div"));return t.setAttribute("class",a.statusPlaceholder.container),t.appendChild(n()),t.appendChild(e),t},createTranslateButton:t=>{var e=document.createElement("button"),t=(e.innerText=t,e.setAttribute("class",a.translateButton.button),document.createElement("div"));return t.setAttribute("class",a.translateButton.container),document.createElement("i").setAttribute("class","ft-icon fa fa-language"),t.appendChild(n()),t.appendChild(e),{button:e,container:t}},createIcon:n,elementClasses:a}}();a.default=t},{"../global/Fluency":2,"../global/FtConfig":3,"../global/FtTools":4}]},{},[1]);
//# sourceMappingURL=maps/fluency_language_translator.bundle.js.map
