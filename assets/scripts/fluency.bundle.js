!function n(i,s,l){function r(e,t){if(!s[e]){if(!i[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}a=s[e]={exports:{}},i[e][0].call(a.exports,function(t){return r(i[e][1][t]||t)},a,a.exports,n,i,s,l)}return s[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)r(l[t]);return r}({1:[function(t,e,a){"use strict";var n=l(t("./inputfields/FtInputfields")),i=l(t("./ui/FtAdminMenu")),s=l(t("./global/FtConfig"));function l(t){return t&&t.__esModule?t:{default:t}}window.addEventListener("load",t=>{s.default.moduleShouldInitialize()&&(i.default.init(),n.default.init())})},{"./global/FtConfig":3,"./inputfields/FtInputfields":12,"./ui/FtAdminMenu":14}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=(t=t("./FtConfig"))&&t.__esModule?t:{default:t};t=function(){const a=o.default.getUiTextFor("errors");const l=t=>{var e={"X-Requested-With":"XMLHttpRequest"};return"GET"===t&&(e.Accept="application/json"),"POST"===t&&(e["Content-Type"]="application/json"),e},t=(t,e)=>fetch(t,{method:"GET",cache:"no-store",headers:l("GET")}).then(r).then(e).catch(u),e=(t,e)=>fetch(t,{method:"DELETE",headers:l("GET")}).then(r).then(e).catch(u),r=t=>{if(204===t.status)return t;if(t.ok)return t.json();throw new Error},u=t=>{console.error("[Fluency module API failure]",t.message);var e={error:null,message:null};return"NetworkError"===t.message.split(" ")[0]?(e.error="FLUENCY_CLIENT_DISCONNECTED",e.message=a.FLUENCY_CLIENT_DISCONNECTED):(e.error="UNKNOWN_ERROR",e.message=a.UNKNOWN_ERROR),e};return{deleteTranslatableLanguagesCache:()=>e(o.default.getApiEndpointFor("translatableLanguagesCache"),t=>t),deleteTranslationCache:()=>e(o.default.getApiEndpointFor("translationCache"),t=>t),getAvailableLanguages:()=>t(o.default.getApiEndpointFor("languages"),t=>t),getTranslation:function(t,e,a){var n,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;return n=o.default.getApiEndpointFor("translation"),t={sourceLanguage:t,targetLanguage:e,content:a,options:i,caching:s},e=t=>t,fetch(n,{method:"POST",cache:"no-store",headers:l,body:JSON.stringify(t)}).then(r).then(e).catch(u)},getUsage:()=>t(o.default.getApiEndpointFor("usage"),t=>t)}}();a.default=t},{"./FtConfig":3}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(){const t=ProcessWire.config.fluency;var e=t.localization;const a={translateButton:{container:"ft-translate-button-container",button:"ft-translate-button"},languageTranslator:{container:"Inputfield InputfieldHeaderHidden",content:"InputfieldContent ft-language-translator-button-content",translateButton:"ft-translate-all-button",sourceLanguageSelect:"uk-select ft-source-language-select",sourceLanguageSelectLabel:"ft-source-language-select-label"},statusPlaceholder:{container:"ft-translation-status-container",label:"ft-translation-status"},icon:"ft-icon"},n={activityOverlay:e.activityOverlay,languageSelect:e.languageSelect,inputfieldTranslateButtons:e.inputfieldTranslateButtons,standaloneTranslator:e.standaloneTranslator,usage:e.usage,errors:e.errors,languageTranslator:e.languageTranslator},i={languages:t.apiEndpoints.languages,translatableLanguagesCache:t.apiEndpoints.translatableLanguagesCache,test:t.apiEndpoints.test,translation:t.apiEndpoints.translation,translationCache:t.apiEndpoints.translationCache,usage:t.apiEndpoints.usage},s=t.configuredLanguages,l=t.unconfiguredLanguages;const r=()=>s;const u=()=>l;const o=()=>t.engine;return{fieldInitializedAttr:"data-ft-initialized",getApiEndpointFor:t=>i[t],getConfiguredLanguages:r,getDefaultLanguage:()=>s.reduce((t,e)=>e.default?e:t,null),getElementClassesFor:t=>a[t],getEngineInfo:o,getEngineProvidesUsageData:()=>o().providesUsageData,getLanguageCount:()=>s.length+l.length,getLanguageForId:a=>(a=parseInt(a,10),s.reduce((t,e)=>e.id===a?e:t,null)),getTranslationAction:()=>t.interface.inputfieldTranslationAction,getTranslationDisabledFieldAttribute:()=>`[${t.interface.translationDisabledFieldAttr}]`,getUiTextFor:t=>n[t],getUnconfiguredLanguages:u,languageIsTranslatable:t=>!l.includes(parseInt(t,10)),moduleShouldInitialize:()=>1<s.length,translationActionTypes:{each:"translate_each_language",all:"translate_to_all_languages",both:"both"}}}();a.default=n},{}],4:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldCKEditor=a.FtInputfieldCKEditor=void 0;var u=n(t("../ui/FtActivityOverlay")),o=n(t("../global/FtConfig")),g=(n(t("./FtInputfields")),n(t("../ui/FtInputfieldTranslateButton"))),d=n(t("../ui/FtLanguageTab"));function n(t){return t&&t.__esModule?t:{default:t}}a.FtIsInputfieldCKEditor=t=>!!t.querySelector(".InputfieldCKEditorNormal");a.FtInputfieldCKEditor=function(t){const e={},a={},n={},i={},s={};let l=null,r;this.getActivityOverlay=()=>r,this.getSelf=()=>t,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(o.default.getDefaultLanguage().id),this.getValueForLanguage=t=>this.getEditorInstanceForLanguage(t).getData(),this.setValueForLanguage=(t,e)=>{var a=this.getEditorInstanceForLanguage(t);return a.setData(e),a.fire("change"),this.contentHasChanged(t)},this.getEditorInstanceForLanguage=t=>{var e;return Object.hasOwn(s,t)&&s[t]||(e=this.createCKEditorSelector(t),s[t]=CKEDITOR.instances[e]),s[t]},this.createCKEditorSelector=t=>t==o.default.getDefaultLanguage().id?l:l+"__"+t,this.getInputContainers=()=>(this.getSelf().querySelectorAll("[data-language]").forEach(t=>{i[t.dataset.language]=t}),i),this.contentHasChanged=t=>Object.hasOwn(a,t)&&a[t]!==e[t],this.registerInputEventListener=e=>{this.getEditorInstanceForLanguage(e).on("change",t=>{a[e]=this.getValueForLanguage(e),n[e].setModifiedState(this.contentHasChanged(e))})},this.initContainers=()=>{var t,e=this.getInputContainers();for(t in l=Object.values(e)[0].id.replace("langTab_",""),e){var a=e[t];s[t]=this.getEditorInstanceForLanguage(t),n[t]=new d.default(a),this.registerInputEventListener(t)}r=new u.default(this),new g.default(this,e)},void 0===CKEDITOR?console.error("CKEditor was not found by Fluency, translation unavailable"):setTimeout(this.initContainers,50)}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldCKEditorInline=a.FtInputfieldCKEditorInline=void 0;var c=n(t("../ui/FtActivityOverlay")),f=n(t("../global/FtConfig")),h=(n(t("./FtInputfields")),n(t("../ui/FtInputfieldTranslateButton"))),v=n(t("../ui/FtLanguageTab"));function n(t){return t&&t.__esModule?t:{default:t}}a.FtIsInputfieldCKEditorInline=t=>!!t.querySelector(".InputfieldCKEditorInline");a.FtInputfieldCKEditorInline=function(e){const a={},n={},i={},s={},l={},r={};let u=null,t;if(this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(f.default.getDefaultLanguage().id),this.getValueForLanguage=t=>{var e=this.getEditorInstanceForLanguage(t);return e?e.getData():this.getContentElementForLanguage(t).innerHTML},this.setValueForLanguage=(t,e)=>{var a=this.getEditorInstanceForLanguage(t),n=this.getContentElementForLanguage(t);return a?a.setValue(e):n.innerHTML=e,n.dispatchEvent(new Event("input")),this.contentHasChanged(t)},this.getEditorInstanceForLanguage=t=>(Object.hasOwn(l,t)&&l[t]||(l[t]=CKEDITOR.instances[this.createCKEditorSelector(t)]),l[t]),this.getContentElementForLanguage=t=>(Object.hasOwn(r,t)||(r[t]=this.getInputContainerForLanguage(t).querySelector(".InputfieldCKEditorInlineEditor")),r[t]),this.createCKEditorSelector=t=>t==f.default.getDefaultLanguage().id?u:u+"__"+t,this.getInputContainers=()=>(Object.keys(s).length!==f.default.getLanguageCount()&&this.getSelf().querySelectorAll("[data-language]").forEach(t=>{s[t.dataset.language]=t}),s),this.getInputContainerForLanguage=t=>(Object.hasOwn(s,t)||(s[t]=e.querySelector(`[data-language="${t}"]`)),s[t]),this.contentHasChanged=t=>Object.hasOwn(n,t)&&n[t]!==a[t],this.registerUpdateEvent=t=>{t=this.getContentElementForLanguage(t);new MutationObserver((t,e)=>{for(var a of t)a.target.dispatchEvent(new Event("input"))}).observe(t,{childList:!0})},this.registerInputEventListener=e=>{this.getContentElementForLanguage(e).addEventListener("input",t=>{n[e]=this.getValueForLanguage(e),i[e].setModifiedState(this.contentHasChanged(e))})},void 0===CKEDITOR)console.error("CKEditor was not found by Fluency, translation unavailable");else{var o,g=this.getInputContainers();for(o in u=Object.values(g)[0].id.replace("langTab_",""),g){var d=g[o];l[o]=this.getEditorInstanceForLanguage(o),i[o]=new v.default(d),this.registerInputEventListener(o)}t=new c.default(this),new h.default(this,g)}}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(t("../ui/FtActivityOverlay")),g=i(t("../global/FtConfig")),d=i(t("./FtInputfields")),c=i(t("../ui/FtInputfieldTranslateButton")),f=i(t("../ui/FtLanguageTab"));function i(t){return t&&t.__esModule?t:{default:t}}function h(t){let e;this.getSelf=()=>t,this.getActivityOverlay=()=>e,e=new n.default(this)}a.default=function(t){const e={},a={};const n={},i={};let s=(new f.default).getContentModifiedClass(),l={};this.getActivityOverlay=t=>t?l[t].getActivityOverlay():null,this.getSelf=()=>t,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(g.default.getDefaultLanguage().id),this.getValueForLanguage=t=>this.getFieldForLanguage(t).value,this.setValueForLanguage=(t,e)=>{var a=this.getFieldForLanguage(t);return d.default.updateValue(a,e),a.dispatchEvent(new Event("keyup")),this.contentHasChanged(t)},this.getFieldForLanguage=t=>(Object.hasOwn(i,t)&&i[t]||(i[t]=this.getInputContainerForLanguage(t).querySelector("input")),i[t]),this.getInputContainerForLanguage=t=>(Object.hasOwn(n,t)||n[t]||this.getInputContainers(),n[t]),this.getInputContainers=()=>(this.getSelf().querySelectorAll(".LanguageSupport").forEach(t=>{var e=t.querySelector("input[type=text]").name.replace("_pw_page_name","")||g.default.getDefaultLanguage().id;n[e]=t}),n),this.contentHasChanged=t=>Object.hasOwn(a,t)&&a[t]!==e[t],this.setModifiedState=(t,e)=>{t=this.getInputContainerForLanguage(t);e&&t.classList.add(s),e||t.classList.remove(s)},this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("keyup",t=>{a[e]=t.target.value,this.setModifiedState(e,this.contentHasChanged(e))})};var r,u=this.getInputContainers();for(r in u){var o=u[r];e[r]=this.getValueForLanguage(r),l[r]=new h(o),this.registerInputEventListener(r)}new c.default(this,u,!0)}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldTable=void 0;a.FtIsInputfieldTable=t=>n(t)||i(t);const n=t=>!!t.classList.contains("InputfieldTable"),i=t=>"TBODY"===!!t.tagName&&t.querySelectorAll(".InputfieldTable_hasLangTabs").length},{}],8:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldText=a.FtInputfieldText=void 0;var g=n(t("../ui/FtActivityOverlay")),d=n(t("../global/FtConfig")),c=n(t("./FtInputfields")),f=n(t("../ui/FtInputfieldTranslateButton")),h=n(t("../ui/FtLanguageTab"));function n(t){return t&&t.__esModule?t:{default:t}}a.FtIsInputfieldText=t=>!!t.querySelector("input[type='text']");a.FtInputfieldText=function(e){const a={},n={},i={},s={},l={};let t;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(d.default.getDefaultLanguage().id),this.getValueForLanguage=t=>this.getFieldForLanguage(t).value,this.setValueForLanguage=(t,e)=>{var a=this.getFieldForLanguage(t);return c.default.updateValue(a,e),a.dispatchEvent(new Event("keyup")),this.contentHasChanged(t)},this.getFieldForLanguage=t=>(Object.hasOwn(l,t)&&l[t]||(l[t]=this.getInputContainerForLanguage(t).querySelector("input")),l[t]),this.getInputContainerForLanguage=t=>(Object.hasOwn(s,t)&&s[t]||(s[t]=e.querySelector(`[data-language="${t}"]`)),s[t]),this.getInputContainers=()=>(e.querySelectorAll("[data-language]").forEach(t=>s[t.dataset.language]=t),s),this.contentHasChanged=t=>Object.hasOwn(n,t)&&n[t]!==a[t],this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("keyup",t=>{n[e]=t.target.value,i[e].setModifiedState(this.contentHasChanged(e))})};var r,u=this.getInputContainers();for(r in u){var o=u[r];a[r]=this.getValueForLanguage(r),i[r]=new h.default(o),this.registerInputEventListener(r)}t=new g.default(this),new f.default(this,u)}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],9:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldTextarea=a.FtInputfieldTextarea=void 0;var g=n(t("../ui/FtActivityOverlay")),d=n(t("../global/FtConfig")),c=n(t("./FtInputfields")),f=n(t("../ui/FtInputfieldTranslateButton")),h=n(t("../ui/FtLanguageTab"));function n(t){return t&&t.__esModule?t:{default:t}}a.FtIsInputfieldTextarea=t=>!!t.querySelector("textarea:not(.InputfieldCKEditorNormal,.InputfieldTinyMCEEditor)");a.FtInputfieldTextarea=function(e){const a={},n={},i={},s={},l={};let t;this.getActivityOverlay=()=>t,this.getSelf=()=>e,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(d.default.getDefaultLanguage().id),this.getValueForLanguage=t=>this.getFieldForLanguage(t).value,this.setValueForLanguage=(t,e)=>{var a=this.getFieldForLanguage(t);return c.default.updateValue(a,e),a.dispatchEvent(new Event("keyup")),this.contentHasChanged(t)},this.getFieldForLanguage=t=>(Object.hasOwn(l,t)||(l[t]=e.querySelector(`[data-language="${t}"] textarea`)),l[t]),this.getInputContainers=()=>(e.querySelectorAll("[data-language]").forEach(t=>{s[t.dataset.language]=t}),s),this.contentHasChanged=t=>Object.hasOwn(n,t)&&n[t]!==a[t],this.registerInputEventListener=e=>{this.getFieldForLanguage(e).addEventListener("keyup",t=>{n[e]=t.target.value,i[e].setModifiedState(this.contentHasChanged(e))})};var r,u=this.getInputContainers();for(r in u){var o=u[r];a[r]=this.getValueForLanguage(r),i[r]=new h.default(o),this.registerInputEventListener(r)}t=new g.default(this),new f.default(this,u)}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],10:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldTinyMCE=a.FtInputfieldTinyMCE=void 0;var g=n(t("../ui/FtActivityOverlay")),d=n(t("../global/FtConfig")),c=n(t("./FtInputfields")),f=n(t("../ui/FtInputfieldTranslateButton")),h=n(t("../ui/FtLanguageTab"));function n(t){return t&&t.__esModule?t:{default:t}}a.FtIsInputfieldTinyMCE=t=>!!t.querySelector(".InputfieldTinyMCENormal");a.FtInputfieldTinyMCE=function(t){const i={},a={},s={},e={},l={},r={};let u=null,n;this.getActivityOverlay=()=>n,this.getSelf=()=>t,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(d.default.getDefaultLanguage().id),this.getValueForLanguage=t=>{var e=this.getTinymceInstanceForLanguage(t);return e?e.getContent():this.getTextareaForLanguage(t).value},this.setValueForLanguage=(t,e)=>{var a=this.getTinymceInstanceForLanguage(t),a=(a&&(a.setContent(e),a.fire("input")),this.getTextareaForLanguage(t));return c.default.updateValue(a,e),a.dispatchEvent(new Event("input")),this.contentHasChanged(t)},this.getTinymceInstanceForLanguage=t=>{var e;return Object.hasOwn(r,t)&&r[t]||(e=this.createTinymceSelector(t),r[t]=tinymce.get(e)),r[t]},this.getTextareaForLanguage=t=>(Object.hasOwn(l,t)&&l[t]||(l[t]=this.getSelf().querySelector(`[data-language="${t}"] textarea`)),l[t]),this.getInputContainers=()=>(this.getSelf().querySelectorAll("[data-language]").forEach(t=>{e[t.dataset.language]=t}),e),this.contentHasChanged=t=>Object.hasOwn(a,t)&&a[t]!==i[t],this.createTinymceSelector=t=>t==d.default.getDefaultLanguage().id?u:u+"__"+t,this.bindTinymceEvents=(e,t)=>{t.on("keyup",t=>this.getTextareaForLanguage(e).dispatchEvent(new Event("input")))},this.initTinymceInstanceOnCreation=(n,t)=>{new MutationObserver((t,e)=>{for(var a of t)a.target.dataset.language==n&&(r[n]=this.getTinymceInstanceForLanguage(n),this.bindTinymceEvents(n,r[n]),r[n])&&e.disconnect()}).observe(t,{childList:!0})},this.registerInputEventListener=e=>{l[e].addEventListener("input",t=>{a[e]=this.getValueForLanguage(e),s[e].setModifiedState(this.contentHasChanged(e))})},this.initAll=t=>{for(var e in u=Object.values(t)[0].id.replace("langTab_",""),t){var a=t[e];i[e]=this.getValueForLanguage(e),s[e]=new h.default(a),r[e]=this.getTinymceInstanceForLanguage(e),l[e]=this.getTextareaForLanguage(e),this.registerInputEventListener(e),r[e]||this.initTinymceInstanceOnCreation(e,a)}for(var n in r)Object.hasOwn(r,n)&&r[n]&&this.bindTinymceEvents(n,r[n])};{const o=this.getInputContainers();setTimeout(()=>{this.initAll(o)},50),n=new g.default(this),new f.default(this,o)}}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],11:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.FtIsInputfieldTinyMCEInline=a.FtInputfieldTinyMCEInline=void 0;var c=n(t("../ui/FtActivityOverlay")),f=n(t("../global/FtConfig")),h=(n(t("./FtInputfields")),n(t("../ui/FtInputfieldTranslateButton"))),v=n(t("../ui/FtLanguageTab"));function n(t){return t&&t.__esModule?t:{default:t}}a.FtIsInputfieldTinyMCEInline=t=>!!t.querySelector(".InputfieldTinyMCEInline");a.FtInputfieldTinyMCEInline=function(t){const e={},a={},n={},i={},s={},l={};let r=null,u;if(this.getActivityOverlay=()=>u,this.getSelf=()=>t,this.getValueForDefaultLanguage=()=>this.getValueForLanguage(f.default.getDefaultLanguage().id),this.getValueForLanguage=t=>{var e=this.getEditorInstanceForLanguage(t);return e?e.getContent():this.getContentElementForLanguage(t).innerHTML},this.setValueForLanguage=(t,e)=>{var a=this.getContentElementForLanguage(t);return a.innerHTML=e,a.dispatchEvent(new Event("input")),this.contentHasChanged(t)},this.getEditorInstanceForLanguage=t=>{var e;return Object.hasOwn(l,t)&&l[t]||(e=this.createTinymceSelector(t),l[t]=tinymce.get(e)),l[t]},this.getContentElementForLanguage=t=>(Object.hasOwn(s,t)||(s[t]=this.getInputContainerForLanguage(t).querySelector(".mce-content-body")),s[t]),this.getInputContainerForLanguage=t=>(Object.hasOwn(i,t)&&i[t]||(i[t]=this.getSelf().querySelector(`[data-language="${t}"]`)),i[t]),this.getInputContainers=()=>(this.getSelf().querySelectorAll("[data-language]").forEach(t=>{i[t.dataset.language]=t}),i),this.contentHasChanged=t=>Object.hasOwn(a,t)&&a[t]!==e[t],this.createTinymceSelector=t=>t==f.default.getDefaultLanguage().id?r:r+"__"+t,this.registerUpdateEvent=t=>{t=this.getContentElementForLanguage(t);new MutationObserver((t,e)=>{for(var a of t)a.target.dispatchEvent(new Event("input"))}).observe(t,{childList:!0})},this.registerInputEventListener=e=>{this.getContentElementForLanguage(e).addEventListener("input",t=>{a[e]=this.getValueForLanguage(e),n[e].setModifiedState(this.contentHasChanged(e))})},void 0===tinymce)console.error("TinyMCE was not found by Fluency, translation unavailable");else{var o,g=this.getInputContainers();for(o in r=Object.values(g)[0].id.replace("langTab_",""),g){var d=g[o];e[o]=this.getValueForLanguage(o),n[o]=new v.default(d),this.registerUpdateEvent(o),this.registerInputEventListener(o)}u=new c.default(this),new h.default(this,g)}}},{"../global/FtConfig":3,"../ui/FtActivityOverlay":13,"../ui/FtInputfieldTranslateButton":15,"../ui/FtLanguageTab":16,"./FtInputfields":12}],12:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=n(t("../global/FtConfig")),o=t("./FtInputfieldCKEditor"),g=t("./FtInputfieldCKEditorInline"),d=t("./FtInputfieldTable"),c=t("./FtInputfieldText"),f=t("./FtInputfieldTextarea"),h=t("./FtInputfieldTinyMCE"),v=t("./FtInputfieldTinyMCEInline"),p=n(t("./FtInputfieldPageName"));function n(t){return t&&t.__esModule?t:{default:t}}t=function(){const n="[class*='hasLangTabs']",e=u.default.getTranslationDisabledFieldAttribute();const i=t=>{for(var e of t)a(e)||s(e)},a=t=>!!t.querySelectorAll(e).length,s=t=>{l(t)||t.classList.contains("InputfieldItemList")||t.closest("[class*='Template']")||((t=>{switch(true){case(0,d.FtIsInputfieldTable)(t):i(t.querySelectorAll(".langTabs"));break;case(0,o.FtIsInputfieldCKEditor)(t):return new o.FtInputfieldCKEditor(t);case(0,g.FtIsInputfieldCKEditorInline)(t):return new g.FtInputfieldCKEditorInline(t);case(0,h.FtIsInputfieldTinyMCE)(t):return new h.FtInputfieldTinyMCE(t);case(0,v.FtIsInputfieldTinyMCEInline)(t):return new v.FtInputfieldTinyMCEInline(t);case(0,f.FtIsInputfieldTextarea)(t):return new f.FtInputfieldTextarea(t);case(0,c.FtIsInputfieldText)(t):return new c.FtInputfieldText(t);default:console.warn("Fluency does not recognize this inputfield, translation is not available",t)}})(t),r(t))},l=t=>t.hasAttribute(u.default.fieldInitializedAttr)||!!t.querySelector(".ft-translate-button"),r=t=>t.setAttribute(u.default.fieldInitializedAttr,"");return{init:function(){var t=document.querySelectorAll(n);t.length&&(i(t),t=document.getElementById("pw-content-body"),new MutationObserver((t,e)=>{for(var a of t){a=a.target.querySelectorAll(n);a.length&&i(a)}}).observe(t,{childList:!0,subtree:!0}),[...document.querySelectorAll(".InputfieldPageName")].forEach(t=>{t&&!l(t)&&(new p.default(t),r(t))}))},updateValue:(t,e)=>{t.focus(),t.value=e,t.blur()},fieldIsInitialized:l}}();a.default=t},{"../global/FtConfig":3,"./FtInputfieldCKEditor":4,"./FtInputfieldCKEditorInline":5,"./FtInputfieldPageName":6,"./FtInputfieldTable":7,"./FtInputfieldText":8,"./FtInputfieldTextarea":9,"./FtInputfieldTinyMCE":10,"./FtInputfieldTinyMCEInline":11}],13:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=(t=t("../global/FtConfig"))&&t.__esModule?t:{default:t};a.default=function(t){var a=this;let i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"translating";const n={parent:"ft-activity-overlay-container",overlay:"ft-activity-overlay",error:"error",message:"message",flash:"flash",success:"success",activity:"activity",visible:"visible",activityContainer:"ft-activity",activityStaticText:"ft-activity-text",activityAnimationContainer:"ft-activity-animation-container",activityAnimationItem:"ft-activity-animation-item",messageContainer:"ft-activity-message"};let e,s,l;this.showActivity=()=>{this.setActivityActive(),this.setOverlayVisible()},this.showMessage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5e3;a.setMessageContent(t),a.setActivityInactive(),a.setMessageActive(),a.setOverlayVisible(),a.hide(e)},this.flashSuccess=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;a.setSuccessActive(),a.setFlashActive(),a.showMessage(t,e)},this.flashError=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;a.setFlashActive(),a.setErrorActive(),a.showMessage(t,e)},this.showError=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:7e3;a.setErrorActive(),a.showMessage(t,e)},this.hide=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;setTimeout(()=>{a.setOverlayInvisible()},t),setTimeout(()=>{a.setActivityInactive(),a.setMessageInactive(),a.setErrorInactive(),a.setFlashInactive(),a.setMessageContent("")},t+500)},this.setActivityActive=()=>{e.classList.add(n.activity)},this.setActivityInactive=()=>{e.classList.remove(n.activity)},this.setMessageActive=()=>{e.classList.add(n.message)},this.setMessageInactive=()=>{e.classList.remove(n.message)},this.setMessageContent=t=>{s.innerText=t},this.setFlashActive=t=>{e.classList.add(n.flash)},this.setFlashInactive=t=>{e.classList.remove(n.flash)},this.setSuccessActive=()=>{e.classList.add(n.success)},this.setSuccessInactive=()=>{e.classList.remove(n.success)},this.setErrorActive=()=>{e.classList.add(n.error)},this.setErrorInactive=()=>{e.classList.remove(n.error)},this.setOverlayVisible=()=>{e.classList.add(n.visible)},this.setOverlayInvisible=()=>{e.classList.remove(n.visible)},this.create=()=>(e=this.buildOverlayEl(),l=this.buildActivityEl(),s=this.buildMessageEl(),e.appendChild(l),e.appendChild(s),e),this.buildOverlayEl=()=>{var t=document.createElement("div");return t.setAttribute("class",n.overlay),t},this.buildActivityEl=()=>{var t=this.getActivityTexts();let e=document.createElement("div");e.setAttribute("class",n.activityAnimationContainer),e=t.animated.reduce((t,e)=>{var a=document.createElement("span");return a.setAttribute("class",n.activityAnimationItem),a.innerHTML=e,t.appendChild(a),t},e);var a=document.createElement("div");return a.setAttribute("class",n.activityStaticText),a.innerText=t.static,(l=document.createElement("div")).setAttribute("class",n.activityContainer),l.appendChild(a),l.appendChild(e),l},this.getActivityTexts=()=>{var t=r.default.getUiTextFor("activityOverlay")[i],e=t.animated;for(let t=e.length-1;0<t;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return t.animated=e,t},this.buildMessageEl=()=>((s=document.createElement("div")).setAttribute("class",n.messageContainer),s),t=t.getSelf(),e=this.create(),t.classList.add(n.parent),t.appendChild(e)}},{"../global/FtConfig":3}],14:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default={init:()=>{{var t=document.querySelectorAll(".pw-masthead .pw-primary-nav > li > a"),e;"Fluency"!==new URLSearchParams(window.location.search).get("name")&&t.forEach((t,e)=>{var a=t.href.split("/").filter(Boolean);a[a.length-1].includes("fluency")&&(t.href=t.href+"?modal=1",t.classList.add("pw-modal-large"),t.classList.add("pw-modal"))})}}}},{}],15:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=n(t("../global/FtConfig")),g=n(t("../global/Fluency")),l=n(t("./FtUiElements"));function n(t){return t&&t.__esModule?t:{default:t}}a.default=function(u,t){let e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];const s=o.default.getUiTextFor("inputfieldTranslateButtons");this.addTranslateFromDefaultButton=(t,e)=>{var a=o.default.languageIsTranslatable(t),n=t==o.default.getDefaultLanguage().id;a?n?e.appendChild(l.default.createStatusElement(s.translationAvailable)):({button:a,container:n}=l.default.createTranslateButton(s.translateButton),this.bindButton(a,o.default.getLanguageForId(t)),e.appendChild(n)):e.appendChild(l.default.createStatusElement(s.languageNotAvailable))},this.bindButton=(t,a)=>{t.addEventListener("click",t=>{t.preventDefault();t=u.getValueForDefaultLanguage();if(t){const e=u.getActivityOverlay()??u.getActivityOverlay(a.id);e.showActivity(),g.default.getTranslation(o.default.getDefaultLanguage().engineLanguage.sourceCode,a.engineLanguage.targetCode,t).then(t=>{t.error?u.getActivityOverlay().showError(t.message):(u.setValueForLanguage(a.id,t.translations[0]),e.hide())})}})},this.addTranslateToAllButton=(t,e)=>{var a,n=o.default.languageIsTranslatable(t),i=e[t];n?({button:n,container:a}=l.default.createTranslateButton(s.translateToAllButton),this.bindTranslateToAllButton(n,o.default.getLanguageForId(t),e),i.appendChild(a)):i.appendChild(l.default.createStatusElement(s.languageNotAvailable))},this.bindTranslateToAllButton=(t,r,e)=>{t.addEventListener("click",t=>{t.preventDefault();var s=u.getValueForLanguage(r.id);if(s){let a=Object.keys(e).length,n=!1,i=u.getActivityOverlay();for(var l in i.showActivity(),e){l=parseInt(l,10);let e=o.default.getLanguageForId(l);l!==r.id&&r&&e?g.default.getTranslation(r.engineLanguage.sourceCode,e.engineLanguage.targetCode,s).then(t=>{t.error?(n||u.getActivityOverlay().showError(t.message),n=!0):u.setValueForLanguage(e.id,t.translations[0])}).then(t=>{0!==--a||n||i.hide()}):a--}}})},this.addBothTranslationButtonTypes=(t,e)=>{this.addTranslateToAllButton(t,e),this.addTranslateFromDefaultButton(t,e[t])};var a,n=o.default.translationActionTypes,i=o.default.getTranslationAction();for(a in t)i!==n.all||e||this.addTranslateToAllButton(a,t),i!==n.each&&!e||this.addTranslateFromDefaultButton(a,t[a]),i!==n.both||e||(this.addTranslateToAllButton(a,t),this.addTranslateFromDefaultButton(a,t[a]))}},{"../global/Fluency":2,"../global/FtConfig":3,"./FtUiElements":17}],16:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;a.default=function(t){const e="ft-content-changed";let a=null;this.getContentModifiedClass=()=>e,this.setModifiedState=t=>t?this.setTabModified():this.setTabUnmodified(),this.setTabModified=()=>this.getLanguageTab().classList.add(e),this.setTabUnmodified=()=>this.getLanguageTab().classList.remove(e),this.getLanguageTab=()=>a??t.closest(".langTabs").querySelector(`.langTabLink[data-lang="${t.dataset.language}"`),t&&(a=this.getLanguageTab())}},{}],17:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=n(t("../global/FtConfig"));n(t("../global/Fluency"));function n(t){return t&&t.__esModule?t:{default:t}}t=function(){var t=s.default.elementClasses;const a=s.default.getUiTextFor("inputfieldTranslateButtons"),n=()=>{var t=document.createElement("a"),e=(t.setAttribute("href",ProcessWire.config.urls.admin+"fluency/?modal=1"),t.setAttribute("class","pw-modal pw-modal-large"),document.createElement("i"));return e.setAttribute("class",s.default.getElementClassesFor("icon")+" fa fa-language"),e.setAttribute("uk-tooltip",a.showTranslator),t.appendChild(e),t};return{createStatusElement:t=>{var e=s.default.getElementClassesFor("statusPlaceholder"),a=document.createElement("span"),t=(a.setAttribute("class",e.label),a.innerText=t,document.createElement("div"));return t.setAttribute("class",e.container),t.appendChild(n()),t.appendChild(a),t},createTranslateButton:t=>{var e=s.default.getElementClassesFor("translateButton"),a=document.createElement("a"),t=(a.innerText=t,a.setAttribute("class",e.button),a.setAttribute("href",""),document.createElement("div"));return t.setAttribute("class",e.container),t.appendChild(n()),t.appendChild(a),{button:a,container:t}},createLanguageTranslatorInputs:()=>{var t=s.default.getElementClassesFor("languageTranslator"),e=s.default.getUiTextFor("languageTranslator"),a=document.createElement("a");a.innerText=e.translateAllButton,a.setAttribute("class",t.translateButton),a.setAttribute("href","");const n=document.createElement("select");n.setAttribute("class",t.sourceLanguageSelect),s.default.getConfiguredLanguages().forEach(function(t){var e=document.createElement("option");e.textContent=t.title,e.value=t.engineLanguage.sourceCode,t.default?(e.selected="selected",n.prepend(e)):n.appendChild(e)});var i=document.createElement("span"),e=(i.innerText=e.sourceLanguageSelectLabel,document.createElement("label")),i=(e.setAttribute("class",t.sourceLanguageSelectLabel),e.appendChild(i),e.appendChild(n),document.createElement("div")),e=(i.setAttribute("class",t.content),i.appendChild(a),i.appendChild(e),document.createElement("li"));return e.setAttribute("class",t.container),e.appendChild(i),{translateAllButton:a,sourceLanguageSelect:n,container:e}},createIcon:n,elementClasses:t}}();a.default=t},{"../global/Fluency":2,"../global/FtConfig":3}]},{},[1]);
//# sourceMappingURL=maps/fluency.bundle.js.map
